{"posts":[{"title":"æ–°æ‰‹è¡¨å±…ç„¶å°±å¡bugï¼ŸwatchOS 9 å¤ªæ‹‰äº†...","text":"æ­¤é—®é¢˜å·²åœ¨ watchOS 9.0.2 ä¸­ä¿®å¤ã€‚ å¦‚å›¾ é«˜é«˜å…´å…´åœ°å¼€ç®± ä½ è¿˜å¯ä»¥ï¼šåœ¨Bç«™è§‚çœ‹ éº¦å…‹é£å¼€å§‹æŠ½é£åˆšåˆšæ¿€æ´»ï¼Œå°±â€¦ åˆé™†é™†ç»­ç»­å¤±çµäº†å‡ æ¬¡ï¼Œé‡å¯éƒ½èƒ½è§£å†³â€¦ å‘äº†æ¡å¾®åšï¼šéº¦å…‹é£å¤±çµ è¯„è®ºæ¥çœ‹ï¼Œä¹Ÿæœ‰é—®é¢˜â€¦ åœ¨è®ºå›é‡Œä¹Ÿæ‰¾åˆ°äº†ä¸€æ ·çš„é—®é¢˜ï¼šiwatch s8 éº¦å…‹é£é«˜é¢‘ç‡æ‹¾éŸ³æ•…éšœ åæ§½ä¸‹ï¼ŒiWatchæ˜¯ä»€ä¹ˆä¸œè¥¿â€¦æ‡‚ï¼Œä½†æ˜¯æ²¡æœ‰è¿™ä¸ªåå­— å¤ç°é—®é¢˜ &amp;&amp; åé¦ˆé—®é¢˜è§‰å¾—åƒæ˜¯è½¯ä»¶çš„ bug æ‰“äº†ä¸ª 400 ç”µè¯ï¼Œè®©æˆ‘é‡æ–°é…å¯¹ï¼Œ è‚¯å®šæ˜¯æ²¡æ•ˆæœçš„å•¦ï¼ ä½†æ˜¯ï¼Œ æˆ‘æ„Ÿè§‰åƒæ˜¯å™ªå£°appçš„ç¯å¢ƒéŸ³é‡æ£€æµ‹å‡º bug äº†ï¼Œå…³æ‰ä¹‹åï¼Œç¡®å®ç¼“è§£äº†ã€‚ è§£å†³äº†ï¼Œä½†æ˜¯æ²¡æœ‰å®Œå…¨è§£å†³ã€‚ å¥½åœ¨ï¼Œ åˆå‘ç°äº†ä¸€ä¸ªä¸ç”¨é‡å¯çš„è§£å†³æ–¹æ¡ˆï¼Œ æ”¾å……ç”µå™¨ä¸Šå……ä¼šå„¿ç”µå°±å¥½äº†ã€‚ è§£å†³æ–¹æ¡ˆç›®å‰ä¸ºæ­¢æœ‰ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼Œå†æ¥æ¢³ç†ä¸€ä¸‹ï¼š é‡å¯ Apple Watchï¼ˆåªèƒ½çŸ­æš‚è§£å†³ï¼Œåç»­è¿˜å¯èƒ½ä¼šå‡ºç°ç›¸åŒçš„é—®é¢˜ï¼Œéœ€è¦å†æ¬¡é‡å¯ï¼‰ å…³é—­å™ªå£°appä¸­çš„ç¯å¢ƒéŸ³é‡æµ‹é‡ï¼ˆåœ¨watchè®¾ç½®-å™ªå£°ä¸­ï¼‰ å‡ºç°è¯¥é—®é¢˜æ—¶ï¼Œå°†æ‰‹è¡¨æ”¾åˆ°å……ç”µå™¨ä¸Šå……ç”µ5åˆ†é’Ÿï¼Œå¯ä»¥æ¢å¤ å…¶ä¸­ï¼Œç¬¬ä¸€ç§åªèƒ½çŸ­æš‚åœ°è§£å†³è¯¥é—®é¢˜ï¼Œç¬¬äºŒç§èƒ½ç¼“è§£è¯¥é—®é¢˜ï¼Œç¬¬ä¸‰ç§ä¹Ÿåªèƒ½ä½œä¸ºä¸€ç§è¡¥æ•‘æªæ–½ã€‚ æˆ‘çš„å»ºè®®æ˜¯ï¼šç¬¬äºŒç¬¬ä¸‰ç§æ­é…ä½¿ç”¨ã€‚ è‹¹æœé‚£è¾¹å·²ç»åé¦ˆè¿‡å»äº†ï¼Œæ­£åœ¨ç­‰å¾… watchOS 9.0.1æˆ–è€… watchOS 9.1è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å¥‡æ€ªçš„æ˜¯ï¼Œ ç”¨ç¬¬äºŒç§å…³é—­äº†ç¯å¢ƒéŸ³é‡æ£€æµ‹åï¼Œä»ç„¶å¯ä»¥åœ¨å¥åº·appé‡ŒæŸ¥çœ‹åˆ°ç¯å¢ƒå™ªå£°åˆ†è´çš„ä¿¡æ¯ï¼Œ è€Œä¸”æ•°æ®è¿˜æ˜¯æ‰‹è¡¨æä¾›çš„ ï£¿çœŸåƒåœ¾ï¼ åç»­è²Œä¼¼è‹¹æœç¡®è®¤äº† ç¡®è®¤äº†è¿™ä¸ªé—®é¢˜çš„å­˜åœ¨ï¼Œ ä½†æ˜¯ä¸çŸ¥é“èƒ½ä¸èƒ½æ‰¾åˆ°é—®é¢˜çš„åŸå› ï¼Œ è¿™å†³å®šäº†æœ€ç»ˆèƒ½ä¸èƒ½ä¿®å¤è¿™ä¸ªbugã€‚ 2022.10.11 watchOS 9.0.2 æ›´æ–°æ—¥å¿—ä¸­å†™é“ï¼šä¿®å¤äº†éƒ¨åˆ† Apple Watch Series 8 å’Œ Ultra ç”¨æˆ·çš„éº¦å…‹é£éŸ³é¢‘ä¸­æ–­çš„é—®é¢˜ ç»è¿‡æµ‹è¯•ï¼Œé‡æ–°æ‰“å¼€â€œç¯å¢ƒéŸ³é‡æ£€æµ‹â€åä¸€æ•´å¤©éƒ½æ²¡å†å‡ºç°æ­¤é—®é¢˜äº†","link":"/apple-watch-series-8-mic-failed/"},{"title":"ASCIIç å¯¹åº”å…³ç³»","text":"ç‰ˆæƒå£°æ˜ å›¾ç‰‡æ¥æºäºç™¾åº¦ç™¾ç§‘ Tips å¤§å°å†™è½¬æ¢ Â±32 A-Z &lt; a-z å­—æ¯èŒƒå›´ï¼š65-90ï¼Œ97-122 æ•°å­—èŒƒå›´ï¼š48-57 â€œAâ€ä¸º65ï¼›â€œaâ€ä¸º97ï¼›â€œ0â€ä¸º 48 ASCII å¯è¾“å‡º %dï¼ˆå­—ç¬¦çš„ ASCII ç çš„åè¿›åˆ¶æ•°ï¼‰ï¼Œä¹Ÿå¯è¾“å‡º %cï¼ˆå¯¹åº”çš„å­—ç¬¦ï¼‰ã€‚","link":"/ascii/"},{"title":"Google Chromium Encryption Structure","text":"æ¥æºï¼šGitHubï¼Œä»…ä¾›å­¦ä¹ ä½¿ç”¨ã€‚ Google Chrome stores browser cookies in an SQLite database. The database has two tables, meta containing format and version metadata, and cookies with the contents of the cookies. The cookies table uses this schema: 1234567891011121314151617181920-- To reproduce: sqlite path/to/Cookies .schemaCREATE TABLE cookies ( creation_utc INTEGER NOT NULL, -- microseconds since epoch host_key TEXT NOT NULL, -- domain name TEXT NOT NULL, value TEXT NOT NULL, path TEXT NOT NULL, expires_utc INTEGER NOT NULL, -- microseconds since epoch is_secure INTEGER NOT NULL, is_httponly INTEGER NOT NULL, last_access_utc INTEGER NOT NULL, has_expires INTEGER NOT NULL DEFAULT 1, is_persistent INTEGER NOT NULL DEFAULT 1, priority INTEGER NOT NULL DEFAULT 1, encrypted_value BLOB DEFAULT '', samesite INTEGER NOT NULL DEFAULT -1, source_scheme INTEGER NOT NULL DEFAULT 0, UNIQUE (host_key, name, path)); TimestampsThe expires_utc and creation_utc fields contain timestamps given as integer numbers of microseconds elapsed since midnight 01-Jan-1601 UTC in the proleptic calendar. The Unix epoch is 11644473600 seconds after this moment. ValuesThe value and encrypted_value fields are used to store cookie values. In practice, one or the other is populated, but not both. value encrypted_value Description empty non-empty Value is encrypted non-empty empty Value is unencrypted empty empty Value is unencrypted non-empty non-empty (not observed) Storage FormatAn encrypted value consists of a data packet that is encrypted with AES-128 in CBC mode. The encrypted data packet has the following format: Bytes Content Description 3 â€œv10â€ (0x76 0x31 0x30) Version tag (unencrypted) n value Payload (encrypted) p padding Padding (encrypted), 1â€“16 bytes The encrypted portion of the packet (n+ p) contains a multiple of 16 bytes. If n is a multiple of 16, p = 16; otherwise 1 â‰¤ p â‰¤ 15. PaddingBefore encryption, p bytes of padding are added to the plaintext value to ensure a multiple of 16 bytes. At least one byte of padding is always added, so if the value is already a multiple of 16 bytes, p=16 additional are added. Each padding byte has the value p, so if p=5, the padding is the 5-byte sequence [5, 5, 5, 5, 5]. After decryption, the padding must be removed, and it can be used to verify that the decryption key was correct. The final byte of the decrypted packet must be a padding byte with value 1 â‰¤ p â‰¤ 16, and the last p bytes of the packet must contain the value p. Otherwise, the decryption key can be assumed to be incorrect. EncryptionEncryption and decryption are performed using AES-128 in cipher-block chaining (CBC) mode with an initialization vector consisting of 16 space bytes (Unicode 32). The encryption key is described below. Key GenerationThe 16-byte AES-128 encryption key is generated using the PBKDF2 (RFC 2898) algorithm from a user-provided passphrase. The key generation salt is the fixed string saltysalt. On macOS, Chrome uses 1003 iterations of the key generation algorithm; on Linux it uses 1 iteration. I donâ€™t know what it does on Windows.","link":"/chromium-encryption-structure/"},{"title":"Cè¯­è¨€ ä¹‹ æ ¼å¼åŒ–è¾“å‡º","text":"å‰ä¸¤å¤©ä¸Šè¯¾çš„æ—¶å€™ï¼Œè€å¸ˆè®©è¾“å‡ºä¸ªä¹ä¹ä¹˜æ³•è¡¨ã€‚ ä½†æ˜¯å®é™…è¾“å‡ºä¼šè§‰å¾—æ€ªæ€ªçš„ï¼Œæ²¡å¯¹é½ï¼Œå°è¯•ä¸‹å¯¹é½å§ã€‚ è¿™æ ·ä¹Ÿä¸æ˜¯ä¸è¡Œæ˜¯å§ï¼Œå“ˆå“ˆã€‚ 123456789printf(&quot;1x1=1&quot;);printf(&quot;2x1=2 2x2= 4&quot;);printf(&quot;3x1=3 3x2= 6 3x3= 9&quot;);printf(&quot;4x1=4 4x2= 8 4x3=12 4x4=16&quot;);printf(&quot;5x1=5 5x2=10 5x3=15 5x4=20 5x5=25&quot;);printf(&quot;6x1=6 6x2=12 6x3=18 6x4=24 6x5=30 6x6=36&quot;);printf(&quot;7x1=7 7x2=14 7x3=21 7x4=28 7x5=35 7x6=42 7x7=49&quot;);printf(&quot;8x1=8 8x2=16 8x3=24 8x4=32 8x5=40 8x6=48 8x7=56 8x8=64&quot;);printf(&quot;9x1=9 9x2=18 9x3=27 9x4=36 9x5=45 9x6=54 9x7=63 9x8=72 9x9=81&quot;); æ²¡å¯¹é½çš„ç‰ˆæœ¬123456789101112#include &lt;stdio.h&gt;int main(){ int i,j; for(i = 1; i &lt;= 9; i++) { for(j = 1; j &lt;= i; j++) { printf(&quot;%dx%d=%d &quot;, i, j, i*j); } printf(&quot;\\n&quot;); } return 0;} å¯¹å ä½ç¬¦æ ¼å¼åŒ–è¾“å‡ºå°±ç”¨ä¹˜æ³•è¡¨ä½œä¸ºä¾‹å­ï¼Œ è¾“å‡ºçš„æ˜¯ Intï¼ˆ%dï¼‰ï¼Œ éœ€è¦å¯¹ä¸€ä½æ•°çš„ç»“æœè¿›è¡Œæ‰©å±•ï¼Œè®©å®ƒèƒ½å¤Ÿå¯¹é½ä¸‹é¢çš„ä¸¤ä½æ•°æ•°å­—ã€‚ æ ¼å¼åŒ–è¾“å‡ºæ ¼å¼ï¼š% (-/0) [ä½å®½ n] . [ç²¾åº¦ m] d æ ¼å¼ä¸­æˆ‘å¢åŠ äº†ç©ºæ ¼ï¼Œæ–¹ä¾¿é˜…è¯»ï¼Œå®é™…ä»£ç ä¸­ä¸èƒ½æœ‰ç©ºæ ¼å“¦ã€‚ è§£é‡Šä¸€ä¸‹ï¼š ä½å®½ nï¼šè¾“å‡ºçš„å†…å®¹å å‘½ä»¤è¡Œçš„ n ä¸ªå­—ç¬¦å®½åº¦ï¼Œæ¯”å¦‚ï¼š[4]ï¼ˆn=1ï¼‰ï¼Œ[ 4]ï¼ˆn=2ï¼‰ ç²¾åº¦mï¼šå°æ•°ç‚¹åä¿ç•™å‡ ä½ï¼ˆè²Œä¼¼é»˜è®¤æ˜¯ 6 å¥½åƒï¼‰ï¼Œæ¯”å¦‚ printf(&quot;%.2f&quot;, 3.1415); è¾“å‡ºçš„æ˜¯3.14 -/0ï¼šè¿™ä¸€éƒ¨åˆ†æ˜¯å¯¹è‡ªå®šä¹‰æ ¼å¼çš„ä¸€ä¸ªè¡¥å……ã€‚ â€˜-â€˜ï¼šé å·¦è¾“å‡ºï¼ˆæ–¹æ‹¬å·å¹¶éè¾“å‡ºå†…å®¹ï¼Œåªæ˜¯æ–¹ä¾¿çœ‹åˆ°ç©ºæ ¼å“ˆï¼‰ printf(&quot;%-2d, 1&quot;); è¾“å‡ºçš„æ˜¯ï¼š[1 ] printf(&quot;%2d, 1&quot;); è¾“å‡ºçš„æ˜¯ï¼š[ 1] â€˜0â€™ï¼šå·¦ä¾§è¡¥0âƒ£ï¸ printf(&quot;%02d, 1&quot;); è¾“å‡ºçš„æ˜¯ï¼š01 -/0 åªèƒ½ç”¨ä¸€ä¸ªï¼Œå…¶ä¸­ï¼ˆé å·¦è¾“å‡ºâ€™-â€˜ï¼‰çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œæ‰€ä»¥ printf(&quot;%-02d&quot;, 1); è¾“å‡ºçš„æ˜¯ [1 ] %d å°±æ²¡æœ‰å¿…è¦è®¾ç½®ç²¾åº¦äº†å“ˆï¼Œä¸‰ä¸ªæ ¼å¼åŒ–å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œä½†æ˜¯è¦è®¾ç½®ç²¾åº¦çš„è¯è®°å¾—åŠ ä¸Š Dotï¼ˆ.ï¼‰ å“¦ï¼ æ¯”å¦‚ï¼š %-2d %05d %.3f %-5.2f â€¦ å¯ä»¥åœ¨ç”µè„‘ä¸Šè¯•è¯•çœ‹è¿™äº›çš„è¾“å‡ºï¼Œæ›´å¥½åœ°ç†è§£ä¸‹ã€‚ æ”¹è¿›åçš„ç‰ˆæœ¬ é å³å¯¹é½ï¼š 123456789101112#include &lt;stdio.h&gt;int main(){ int i,j; for(i = 1; i &lt;= 9; i++) { for(j = 1; j &lt;= i; j++) { printf(&quot;%dx%d=%2d &quot;, i, j, i*j); } printf(&quot;\\n&quot;); } return 0;} è¾“å‡ºç»“æœ 1x1= 12x1= 2 2x2= 43x1= 3 3x2= 6 3x3= 94x1= 4 4x2= 8 4x3=12 4x4=165x1= 5 5x2=10 5x3=15 5x4=20 5x5=256x1= 6 6x2=12 6x3=18 6x4=24 6x5=30 6x6=367x1= 7 7x2=14 7x3=21 7x4=28 7x5=35 7x6=42 7x7=498x1= 8 8x2=16 8x3=24 8x4=32 8x5=40 8x6=48 8x7=56 8x8=649x1= 9 9x2=18 9x3=27 9x4=36 9x5=45 9x6=54 9x7=63 9x8=72 9x9=81 è¡¥é›¶ç‰ˆæœ¬ï¼š 123456789101112#include &lt;stdio.h&gt;int main(){ int i,j; for(i = 1; i &lt;= 9; i++) { for(j = 1; j &lt;= i; j++) { printf(&quot;%dx%d=%02d &quot;, i, j, i*j); } printf(&quot;\\n&quot;); } return 0;} è¾“å‡ºç»“æœ 1x1=012x1=02 2x2=043x1=03 3x2=06 3x3=094x1=04 4x2=08 4x3=12 4x4=165x1=05 5x2=10 5x3=15 5x4=20 5x5=256x1=06 6x2=12 6x3=18 6x4=24 6x5=30 6x6=367x1=07 7x2=14 7x3=21 7x4=28 7x5=35 7x6=42 7x7=498x1=08 8x2=16 8x3=24 8x4=32 8x5=40 8x6=48 8x7=56 8x8=649x1=09 9x2=18 9x3=27 9x4=36 9x5=45 9x6=54 9x7=63 9x8=72 9x9=81 é å·¦å¯¹é½ï¼š 123456789101112#include &lt;stdio.h&gt;int main(){ int i,j; for(i = 1; i &lt;= 9; i++) { for(j = 1; j &lt;= i; j++) { printf(&quot;%dx%d=%-2d &quot;, i, j, i*j); } printf(&quot;\\n&quot;); } return 0;} è¾“å‡ºç»“æœ 1x1=12x1=2 2x2=43x1=3 3x2=6 3x3=94x1=4 4x2=8 4x3=12 4x4=165x1=5 5x2=10 5x3=15 5x4=20 5x5=256x1=6 6x2=12 6x3=18 6x4=24 6x5=30 6x6=367x1=7 7x2=14 7x3=21 7x4=28 7x5=35 7x6=42 7x7=498x1=8 8x2=16 8x3=24 8x4=32 8x5=40 8x6=48 8x7=56 8x8=649x1=9 9x2=18 9x3=27 9x4=36 9x5=45 9x6=54 9x7=63 9x8=72 9x9=81","link":"/formatted-output-in-c-programming-language/"},{"title":"JsDelivrä¸çµäº†ï¼Ÿæ·¦ï¼","text":"è¿˜è®°å¾—å‡ å¹´å‰åšåšå®¢çš„æ—¶å€™ï¼Œ å›¾ç‰‡ä¸Šä¼ åˆ° GitHub ä¸Šï¼Œ ç”¨ JsDelivr æ‹‰å– GitHub ä¸Šçš„é™æ€èµ„æºï¼Œ é€Ÿåº¦å˜å˜å¿«ï¼Œ ä½†æ˜¯æœ€è¿‘å‘ç°ï¼Œ é™æ€èµ„æºè²Œä¼¼éƒ½è¢«é‡å®šå‘åˆ° githubusercontent ä¸Šå»äº†ï¼Œ å¯æ˜¯ï¼Œå®˜ç½‘ä¸Šå´å†™ç€ï¼š DNS è¢«æ±¡æŸ“GitHub ä¸Šçš„ issueï¼š Jsdelivr has been block again in China. Some places are polluted by DNS and are resolved to the IP of websites such as Facebook, Twitter, etc. Although other places can be resolved to the correct IP, they are reset by GWF during the TLS handshake and still inaccessible.But fortunately, fastly.jsdelivr.net is not polluted at present. è‡³äºåŸå› ï¼Œ ä¼°è®¡æ˜¯æŸäº›äººæŠŠéæ³•çš„ä¸œè¥¿æŒ‚åˆ° GitHub ä¸Šé¢å»åˆ†äº«ï¼Œ ç”¨ JsDelivr å»æ­£å¸¸è®¿é—®ï¼Œ é’»ç©ºå­åˆ«å‘ç°äº† å“ˆå“ˆã€‚ ä¸è¿‡å¥½åœ¨ DNS æ±¡æŸ“å·²ç»è¢«è§£å†³ï¼Œä½†æ˜¯åœ¨å¤§é™†åœ°åŒºä¹Ÿå¢åŠ äº†è®¸å¤šé™åˆ¶äº†ï¼Œæ¥ä¿è¯ä¸ä¼šå†æ¬¡è¢«æ±¡æŸ“ã€‚ æœ‰ä»€ä¹ˆå½±å“ï¼ŸDNSè§£æç°åœ¨å·²ç»æ¢å¤æ­£å¸¸ï¼Œ ä½†æ˜¯å›½å†…çš„ ICP åº”è¯¥æ˜¯ä¸å¯èƒ½æ¢å¤äº†ï¼Œ JsDelivr ä¹Ÿä¸å†æä¾› ä¸­å›½å¤§é™†åœ°åŒº çš„ GitHub é™æ€èµ„æºçš„åŠ é€Ÿï¼Œï¼ˆJS CSS ç±»æ–‡ä»¶é™¤å¤–ï¼‰ æ‰€ä»¥åšå®¢å†…çš„å›¾ç‰‡ä¹Ÿåªèƒ½ä» GitHub æ‹‰å–äº†ï¼Œ å¯¼è‡´ç½‘ç«™åŠ è½½æ—¶é—´å¯èƒ½ä¼šç•¥é•¿ã€‚ 6æœˆä»½çš„æ—¶å€™å›½å†…é™æ€èµ„æºå·²ç»ä¸ç»™è®¿é—®äº† ä¸­å›½ä»…æ­¤ä¸€å®¶åˆæ³•çš„å…¬å…± CDN å°±è¿™ä¹ˆè¢«é™åˆ¶äº†ã€‚ ICPä¹Ÿè¢«åŠé”€äº†ã€‚ æ·¦ï¼ï¼ æ€ä¹ˆåŠå‘¢ï¼Ÿ æˆ‘ä¹Ÿåœ¨å¯»æ‰¾æ›´ä¼˜çš„è§£å†³æ–¹æ¡ˆæ¥åŠ é€Ÿé¡µé¢åŠ è½½ã€‚ åç»­å¯èƒ½è€ƒè™‘ä» GitHub è½¬åˆ°å›½å†…çš„ Gitee","link":"/jsdelivr-can-no-longer-accelerate-static-resources/"},{"title":"è®°å½•ä¸‹ MarkdownView çš„æ€§èƒ½ä¼˜åŒ–","text":"æˆ‘çš„å¼€æºé¡¹ç›® MarkdownView çš„ 0.2.0 ç‰ˆæœ¬ ç»ˆäºå‘å¸ƒäº†ï¼ æ”¹ç‰ˆæœ¬å¸¦æ¥äº†æ€§èƒ½ä¸Šçš„å·¨å¤§è¿›æ­¥ï¼š Performance Rendering is now at least 3x faster on ALL DEVICES. Real-time previewing is now much much smoother. Scrolling is much quicker and smoother with no frame drop. Memory usage has been reduced by 30% å€Ÿæ­¤æœºä¼šï¼Œè®°å½•ä¸‹æˆ‘çš„ä¼˜åŒ–æ€è·¯ã€‚ å‰æœŸè¡¨ç° å¯åŠ¨ã€åˆæ¬¡æ¸²æŸ“è€—æ—¶é•¿ æ¸²æŸ“å®Œæˆåä¸Šä¸‹æ»šåŠ¨çš„æ—¶å€™æ‰å¸§ä¸¥é‡ï¼ˆä½¿ç”¨æ‡’åŠ è½½æ¨¡å¼ï¼‰ æ¸²æŸ“å®Œæˆåä¸Šä¸‹æ»šåŠ¨çš„æ—¶å€™å†…å­˜å ç”¨é‡å¤ªå¤§äº†ï¼ˆå…³é—­äº†æ‡’åŠ è½½æ¨¡å¼ï¼‰ ç”¨ä½œâ€œå®æ—¶é¢„è§ˆâ€çš„æ—¶å€™ä¼šå¡ï¼Œå¯¼è‡´è¾“å…¥ä½“éªŒå¾ˆç³Ÿç³• ç»¼åˆä»¥ä¸Šè¡¨ç°ï¼Œæ–°åŠŸèƒ½éƒ¨åˆ†ä¹Ÿå·²ç»å®šå‹äº†ï¼Œæ‰€ä»¥å†³å®šå¥½å¥½ä¼˜åŒ–ä¸‹æ€§èƒ½ï¼Œ è‡³å°‘åœ¨æˆ‘è¿™å° 2019 æ¬¾çš„ MacBook Pro ä¸Šä¸è¦æœ‰æ˜æ˜¾çš„å¡é¡¿å§â€¦ æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–å®šä½é—®é¢˜æˆ‘æƒ³å…ˆæ¥ä»‹ç»ä¸‹ MarkdownView çš„æ•´å¥—æ¸²æŸ“æµç¨‹ï¼Œ å¦‚å›¾æ‰€ç¤ºï¼š æœ¬æ¥ä»¥ä¸ºæ˜¯åœ¨æœ€åæ•´åˆçš„æ—¶å€™ Layout åå¤è¿ç®—å¯¼è‡´é€Ÿåº¦æ…¢ï¼Œ æœ€åæˆ‘ç”¨æˆ‘ç¬¬ä¸€ç¯‡åšå®¢æµ‹è¯•äº†ä¸‹ï¼Œå¯åŠ¨æ¸²æŸ“å±…ç„¶éœ€è¦ 20sï¼Œ å±äºæ˜¯å®Œå…¨å¡ä½çš„æ„Ÿè§‰ï¼Œåœ¨ Xcode ä¸­èƒ½çœ‹åˆ° CPU å ç”¨æŒç»­åœ¨ 100% å·¦å³ï¼Œ æœ€åå®šä½åˆ° åˆ†è¯æ¨¡å— è€—è´¹äº†å¤§é‡ CPU æ—¶é—´ï¼Œ è¿™å°±æ˜¯ä¼˜åŒ–çš„é‡ç‚¹äº†ï¼ï¼ é—®é¢˜åˆ†æåˆ†è¯æ¨¡å—çš„ä½œç”¨æ˜¯ä¿è¯æ–‡æœ¬éƒ½èƒ½ä»¥å¾ˆçŸ­çš„å½¢å¼å‘ˆç°ï¼Œ ç”¨äºå®ç°åˆç†çš„è‡ªåŠ¨æ¢è¡Œï¼Œ ä½†æ˜¯åˆ†è¯æ¨¡å—ä¾èµ– Natural Language æ¡†æ¶è¿›è¡Œåˆ†è¯ï¼Œ æœ¬è´¨ä¸Šå°±æ˜¯æœºå™¨å­¦ä¹ çš„åˆ†è¯ï¼Œéœ€è¦æ—¶é—´æ¥å®Œæˆï¼Œ åŒæ—¶æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯ åŒæ­¥æ‰§è¡Œï¼ˆsyncï¼‰ çš„ï¼Œ ä¸Šä¸€ä¸ªç»“æŸäº†æ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªï¼Œ æ®µè½ä¸€å¤šï¼Œå¤§é‡çš„æ—¶é—´éƒ½è¢«æµªè´¹åœ¨ä¸€æ®µæ®µåˆ†è¯äº†ã€‚ è§£å†³æ€è·¯ å¼‚æ­¥æ‰§è¡Œï¼ˆasyncï¼‰æ‰€æœ‰çš„åˆ†è¯æ“ä½œï¼Œè¿™æ ·å¯ä»¥è®©æ‰€æœ‰æ®µè½çš„åˆ†è¯åŒæ—¶å¼€å§‹ æ–‡æœ¬æ¸²æŸ“ä½¿ç”¨å•ç‹¬çš„ TextView æ¥æ¸²æŸ“ï¼Œé»˜è®¤æ˜¾ç¤ºç©ºç™½ç­‰å¾…åˆ†è¯ç»“æŸåè‡ªåŠ¨æ’ç‰ˆ è¿˜æ˜¯ç”¨æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ä½œä¸ºæµ‹è¯•ï¼ŒåŠ è½½é€Ÿåº¦ä» 20s ç¼©çŸ­åˆ°äº† 1sï¼Œå†…å­˜å ç”¨ä¹Ÿä¸‹é™äº† 20%ã€‚ è¿™ä¹Ÿæ˜¯æˆ‘ä¸ºä»€ä¹ˆä¼šåœ¨æ–°ç‰ˆä¸­å¼ƒç”¨ æ‡’åŠ è½½ (Lazy Loading) çš„ä¸»è¦åŸå› ã€‚ å®æ—¶é¢„è§ˆæ€§èƒ½ä¼˜åŒ–å®šä½é—®é¢˜è¿™é‡Œçš„é—®é¢˜å…·ä½“è¡¨ç°åœ¨å½“æˆ‘è¿ç»­è¾“å…¥æ–‡æœ¬çš„æ—¶å€™ï¼Œ CPUå ç”¨é«˜ï¼Œå¹¶ä¸”ä¼´éš è¾“å…¥æ¡† ä¹Ÿå¾ˆå¡é¡¿ã€‚ é—®é¢˜åˆ†ææ¥ç€ä¸Šé¢çš„æ€è·¯ï¼Œ æ¯æ¬¡æœ‰å¾®å°å˜åŠ¨çš„æ—¶å€™ï¼ŒMarkdownView éƒ½ä¼šé‡æ–°èµ°æ•´å¥—æµç¨‹ï¼Œ æœ¬ä»¥ä¸ºæ˜¯å¼‚æ­¥å¤„ç†å¾—è¿‡äºé¢‘ç¹å¯¼è‡´å¡é¡¿ï¼Œ äºæ˜¯å°±ç”¨Combineåšäº†debounceå¤„ç†ï¼Œåœ¨è¾“å…¥é—´éš™æ‰§è¡Œé‡æ–°æ¸²æŸ“ï¼Œ é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œ è€Œä¸”ï¼Œä¸­æ–‡è¾“å…¥å°±æ²¡æœ‰é—®é¢˜ï¼Œ é‡æ–°è€ƒè™‘äº†ä¸‹ æ¸²æŸ“æµç¨‹ å’Œ SwiftUI åˆ·æ–°æœºåˆ¶ï¼Œ æ¯æ¬¡æœ‰å˜åŠ¨çš„æ—¶å€™ï¼Œéƒ½è¦é‡æ–°è¿›å…¥è§£ææµç¨‹ï¼Œ è‹±æ–‡ä¸è®ºæ˜¯å¤šæ‰“ä¸€ä¸ªå­—æ¯æˆ–æ˜¯åˆ é™¤ä¸€ä¸ªå­—æ¯ï¼Œéƒ½ä¼šé‡è§£æï¼Œ ä¸­æ–‡è¾“å…¥æ‹¼éŸ³æ—¶æœ¬è´¨ä¸Šè¿˜æ²¡æœ‰è®©æ–‡æœ¬æ”¹å˜ï¼Œä¸ä¼šé‡è§£æï¼Œ åªæœ‰æ‹¼éŸ³è½¬æˆæ–‡æœ¬ä¹‹åï¼Œç»Ÿä¸€è¿›è¡Œä¸€æ¬¡é‡è§£æï¼Œ Soï¼Œ åœ¨è‹±æ–‡çŠ¶æ€ä¸‹ï¼Œè¿‡äºé¢‘ç¹çš„é‡è§£ææ˜¯å¯¼è‡´å¡é¡¿çš„â€œç½ªé­ç¥¸é¦–â€ã€‚ è§£å†³æ€è·¯ å¯¹äºä¸€å¼€å§‹çš„æ–‡æœ¬è¾“å…¥åš debounce å¤„ç†ï¼Œåœ¨è¾“å…¥é—´éš™æ‰§è¡Œé‡è§£æã€é‡æ¸²æŸ“ã€‚ è¿™æ ·ä¸€æ¥ï¼Œåœ¨è¿ç»­è¾“å…¥å­—ç¬¦çš„æ—¶å€™ä¸ä¼šæ¯ä¸€æ¬¡éƒ½æ‰§è¡Œé‡æ–°è§£æå’Œæ¸²æŸ“ï¼Œ åªæœ‰åœ¨æˆ‘è¾“å…¥æ—¶çš„åœé¡¿å¤„ï¼Œæ‰ä¼šåˆ·æ–°æ•´ä¸ªæ–‡æ¡£ï¼Œæ‰§è¡Œä¸€æ¬¡é‡æ¸²æŸ“ï¼Œ è¿™æ ·æ—¢ä¿è¯äº†é¢„è§ˆçš„å®æ—¶æ€§ï¼Œä¹Ÿæå‡äº†æ•´ä½“æ€§èƒ½ã€‚ åšäº†debounceå»¶è¿Ÿï¼Œæ€ä¹ˆä¿è¯é¢„è§ˆçš„å®æ—¶æ€§ï¼Ÿåœ¨çœŸæ­£åœ°è¿ç»­å¿«é€Ÿè¾“å…¥çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ä¼šå»çœ‹é¢„è§ˆçš„ ä½†å‡¡å°‘è®¸åœé¡¿äº†ä¸‹ï¼ˆ0.3sï¼‰ï¼ŒMarkdownViewå°±å·²ç»è‡ªåŠ¨åˆ·æ–°å®Œæˆäº† é¿å…äº†åœ¨å¿«é€Ÿè¾“å…¥æ—¶ï¼Œé¢‘ç¹åœ°åšæ— ç”¨çš„åˆ·æ–° æ€»ç»“åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ³¨æ„ï¼š å¯¹äºä¸€äº›æ¯”è¾ƒè€—æ—¶çš„éƒ¨åˆ†ï¼ˆæ¯”å¦‚ï¼šä¸‹è½½ã€å¤§é‡æœºå™¨å­¦ä¹ é¢„æµ‹â€¦ï¼‰ä½¿ç”¨å¼‚æ­¥ï¼ˆasyncï¼‰æ¥å®Œæˆï¼Œ åœ¨ UI å‡ºç°é—®é¢˜æ—¶ï¼Œå…³æ³¨ä¸‹ UI æ˜¯å¦‚ä½•åˆ·æ–°çš„ï¼Œ çœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰è¿‡å¤šç¹æ‚çš„ä»»åŠ¡ï¼Œ é‡æ–°æ€è€ƒä¸‹ç°å®ä¸­çš„é€»è¾‘ï¼Œå¯ä»¥è¯•ç€é™ä½ä»–ä»¬çš„ä¼˜å…ˆçº§ï¼Œ æµ“ç¼©ä¸€ä¸‹å°±æ˜¯ï¼šä¸»çº¿ç¨‹ï¼ˆmain threadï¼‰ä¸è¦æœ‰è¿‡å¤šè¿ç»­ç¹æ‚ä¸”æ— ç”¨çš„è¿ç®—ï¼ï¼","link":"/markdownview-performance-optimization/"},{"title":"å°±çˆ±åœ¨ç½‘ä¸ŠBBï¼ŸIPç›´æ¥æ‹¿æä½ ","text":"å‘ç”Ÿåœ¨é«˜ä¸­åŒå­¦èº«ä¸Šçš„çœŸå®äº‹ä»¶ã€‚ è¿™å¹´å¤´è¿˜æœ‰äººå–œæ¬¢åœ¨äº’è”ç½‘ä¸Šå¹³ç™½æ— æ•…åœ°é€ è°£çš„å˜›ï¼Ÿ è¿˜æ˜¯ä¸€ä¸ªé«˜ä¸­çš„ï¼Œ è¡¨é¢çœ‹çœ‹è¿˜çœŸä¸è§‰å¾—â€¦ å®é™…ä¸Šåšç€ä¸‹ä¸‰æ»¥çš„äº‹æƒ…ã€‚ ä¸€ä¼šå„¿ç«‹ä¿¡ä¸€ä¼šå„¿ğŸ”å¤§ã€‚ å®³ã€‚ ä¸€äº›ç»è¿‡è¨€å½’æ­£ä¼ ã€‚ å…ˆç®€å•æ‹ä¸€ä¸‹ç»è¿‡å“ˆã€‚ åœ¨ç”¨å°å·è·Ÿå¥¹â€œäº†è§£â€æƒ…å†µè¿‡åï¼Œä¹Ÿè¦åˆ°äº†QQï¼Œåº”è¯¥æ˜¯å°å·ï¼Œç¡®å®šäº†ä¸¤åâ€œå«Œç–‘äººâ€ï¼Œ åˆ†åˆ«åœ¨è¡«è¾¾ï¼ˆå˜‰å–„æ ¡åŒºï¼‰å’Œä¸Šæµ·å»ºæ¡¥å­¦é™¢ï¼Œ ä½†æ˜¯ä¹Ÿæ²¡æœ‰æ‰¾åˆ°åˆ«çš„è¯æ®èƒ½å¾ˆå¥½çš„åˆ¤æ–­æ˜¯è°ã€‚ å¥½å°±å¥½åœ¨ä¸€ä¸ªå¼€å­¦äº†ä¸€ä¸ªæ²¡å¼€ï¼Œä¸¤æ‰€å­¦æ ¡çš„å¤§è‡´è·ç¦»ï¼ˆä¸€å…¬é‡Œçš„é‚£ä¸ªåœˆï¼‰ç›¸å·®è›®è¿œçš„ã€‚ è„‘ä¸­æµ®ç°å‡ºä¸€ä¸ªæƒ³æ³•ï¼ŒIPèƒ½å®šä½å—ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼Œå¯ä»¥ï¼Œè€Œä¸”è¿˜è›®å‡†ã€‚ æ‰€éœ€å‡†å¤‡ ä¸€ä¸ªåˆç†çš„ç†ç”±ï¼ˆè¦ç‚¹å¼€æ‰èƒ½è·å–åˆ°IPç„¶åä¸Šä¼ ï¼Œå¯¹å§ï¼Ÿï¼‰ åç«¯ç»“æ„åŒ–æ•°æ®å­˜å‚¨æœåŠ¡å™¨ï¼ˆç”¨æ¥å­˜æ¥æ”¶åˆ°çš„IPï¼‰ ä¸€ä¸ªåŸŸåï¼ˆç”¨æ¥é…ç½®æœåŠ¡å™¨ï¼Œå…è´¹çš„å°±è¡Œï¼‰ ä¸€äº›JSçš„åŸºç¡€ï¼ˆè¦å†™ä¸€ä¸ªç½‘é¡µçš„å˜›ï½ï¼‰ åç«¯å­˜å‚¨æœåŠ¡å™¨ä¹‹å‰åšåšå®¢çš„æ—¶å€™ç”¨è¿‡Leancloudåšè¯„è®ºç³»ç»Ÿï¼Œ åç»­è¿™ä¸ªæ–°åšå®¢çš„è¯„è®ºç³»ç»Ÿä¹Ÿå°†åŸºäº Leancloudã€‚ è¿™æ¬¡ç”¨çš„æ˜¯Leancloudå›½é™…ç‰ˆã€‚ è‡³äºä¸ºä»€ä¹ˆæ˜¯å›½é™…ç‰ˆåé¢ä¼šè¯´ã€‚ IPè·å–ç”¨çš„æ˜¯æœç‹å¼€æ”¾çš„scriptåµŒå…¥ã€‚ 1&lt;script src=&quot;https://pv.sohu.com/cityjson?ie=utf-8&quot;&gt;&lt;/script&gt; 1var ip_address = returnCitySN[&quot;cip&quot;] æ•°æ®ä¸Šä¼ è¿™éƒ¨åˆ†åœ¨ Leancloud çš„æŠ€æœ¯æ–‡æ¡£é‡Œå†™çš„å¾ˆæ˜ç™½ï¼Œ æˆ‘è¿™ä¸ªéœ€æ±‚å…¶å®å°±æ˜¯æŠŠè·å–åˆ°çš„IPåœ°å€å­—ç¬¦ä¸²ä¸Šä¼ åˆ° Leancloud ç»“æ„åŒ–å­˜å‚¨ä¸­ï¼Œ ç¨å¾®æ”¹ä¸‹å®ä¾‹ä»£ç å°±è¡Œã€‚ å…·ä½“ä¸å¤šèµ˜è¿°ï¼Œæƒ³è¦äº†è§£çš„å¯ä»¥çœ‹æŠ€æœ¯æ–‡æ¡£ã€‚ è‡³äºä¸ºä»€ä¹ˆè¦ç”¨å›½é™…ç‰ˆ å› ä¸ºå›½å†…ç‰ˆæœ¬å¼ºåˆ¶è¦æ±‚æ·»åŠ  API åŸŸåå¹¶ä¸”éœ€è¦å¤‡æ¡ˆ æ—¶é—´ç´§è¿« ä¹Ÿä¸æƒ³æè¿™äº›ä¸œè¥¿ ç”³è¯·ä¸€ä¸ªå…è´¹çš„ç®€å•ç”¨ä¸‹å°±å¥½å›½é™…ç‰ˆä¸éœ€è¦æä¾› serverURL ä½†æ˜¯å›½å†…ç½‘ç»œä¸Šä¼ ä¼š 403ï¼Œæ‰€ä»¥ç”³è¯·äº†ä¸ªåŸŸåï¼Œé…ç½®å¥½ä»¥åå›½å†…å¤–éƒ½èƒ½ç”¨ï¼Œä¹Ÿä¸éœ€è¦å¤‡æ¡ˆäº† å…è´¹åŸŸååœ¨ Freenomã€‚ ä¸€åˆ‡å°±ç»ª åç­‰IPç½‘é¡µå‘è¿‡å»ï¼Œè¢«å¯¹é¢ç‚¹å¼€ï¼Œ è¿‡äº†ä¼šå„¿æ˜¾ç¤ºè¿æ¥é”™è¯¯ï¼Œ ä½ ä»¥ä¸ºæ˜¯çœŸçš„è¿æ¥é”™è¯¯å—ï¼Ÿæ ¼å±€å°äº† æˆ‘ä»£ç é‡Œå†™çš„å°±æ˜¯é”™è¯¯ğŸ¤£ï¼Œ æˆ‘è¿™é‡Œæ˜¾ç¤ºä»–ç‚¹å¼€äº†4æ¬¡ã€‚ IPã€è®¾å¤‡ç±»å‹ ä¹Ÿå®Œç¾æ¥æ”¶è¿‡æ¥äº†ã€‚ è®©æˆ‘çœ‹çœ‹ä½ åœ¨å“ªæ‹¿åˆ°IPå°±æ˜¯è¦æ‰¾ä½ç½®å’¯ï¼Ÿ åœ¨è¿™æŸ¥è¯¢ä¸‹IPçš„å¤§è‡´ä½ç½® å¤§è‡´ç²¾åº¦åœ¨1å…¬é‡Œå·¦å³ï¼Œ é‚£ä¹ˆ æ˜¯è°ä¹Ÿå°±ä¸€ç›®äº†ç„¶äº†ã€‚ å†™åœ¨æœ€åè¿™å±äºæ˜¯å¤šå¹´æ¥çš„æŠ€æœ¯ç»éªŒçš„ä¸€æ¬¡å¤§è€ƒï¼Œä¹‹å‰åšä¸ªäººåšå®¢çš„æ—¶å€™æœ‰å¹¸æ¥è§¦åˆ°äº†è¿™äº›ï¼Œè¿™æ¬¡æ‰æ¯”è¾ƒé¡ºåˆ©ã€‚ æœ€å¥½çš„ç»“æœå°±æ˜¯èƒ½æ‰¾åˆ°è¿™ä¸ªåœ¨ç½‘ç»œä¸Šä¼ªè£…ä»–äººå‘å¸ƒè°£è¨€çš„å‚»ziï¼ˆBï¼‰ çœŸçš„ï¼Œç»™ä»–æµ‹è¯•çš„æ—¶å€™çœŸçš„å¾ˆå¼€å¿ƒï¼Œåšå‡ºæ¥äº†ï¼Œç²¾åº¦å¯ä»¥ï¼ŒåŠªåŠ›ä¸ç™½è´¹ã€‚ ä¹Ÿå¸Œæœ›è¿™ä¸ªä¼ªè£…åˆ«äººé€ è°£çš„äººåœ¨ç§ç«‹å¤§å­¦é‡Œå¥½å¥½åçœå§ï¼Œçœ‹æ¥ä¸‹æ¥å­¦æ ¡æ€ä¹ˆå¯¹å¥¹å¤„ç†äº†ï¼Œå“ˆå“ˆ é¡ºä¾¿è®°å½•ä¸‹æ—¶é—´ç‚¹ï¼š 9.27 ç¬¬ä¸€æ¬¡å‘ç°åœ¨è´´å§é€ è°£ 9.28 è¢«æˆ‘æŸ¥åˆ° IP å®šä½ï¼Œä¾ç„¶å¾ˆæ‹½ï¼Œæ™šä¸Šè¿˜åœ¨è´´å§BBï¼ˆä¹Ÿæ˜¯è¿™ä¸€å¤©å—å®³è€…å‘ä»–ä»¬å­¦æ ¡å‘é€äº†é‚®ä»¶ä¸¾æŠ¥ï¼‰ 9.29 æ—©ä¸Š10ç‚¹å·¦å³å¼€å§‹å…³é—­è´´å§ç§ä¿¡ï¼ŒQQåˆ é™¤å¥½å‹å¹¶è®¾ç½®ä¸å¯æœç´¢ï¼Œå¾®ä¿¡å·æ›´æ”¹å¹¶è®¾ç½®ä¸å¯æœç´¢ 9.30 è´´å§æ›´æ–°å¤´åƒï¼šå·®ä¸å¤šå¾—äº†ã€‚ å“ˆå“ˆï¼Œç”»ä¸Šåœ†æ»¡çš„å¥å·ã€‚","link":"/ip-locate/"},{"title":"macOS å¼€å‘ -- URL è®¿é—®æƒé™æŒä¹…åŒ–ï¼ˆåŸºäº Sandboxï¼‰","text":"å¥½ä¹…ä¸è§ï¼Œæœ€è¿‘æœ‰åœ¨å¥½å¥½å­¦ä¹ å“ˆå“ˆï¼Œ ä»Šå¤©æ¥åˆ†äº«ä¸‹åŸºäº Sandbox çš„ URL è®¿é—®æƒé™æŒä¹…åŒ–çš„æ–¹æ¡ˆã€‚ å†™è¿™ç¯‡æ–‡ç« çš„èµ·å› æ˜¯ï¼š ç®€å•æµè§ˆäº†ä¸‹ Tencent/lemon-cleaner çš„éƒ¨åˆ†æºç ï¼Œ å‘ç°ä»–ä»¬ç”¨ Apple Script è°ƒç”¨ Finder æ“ä½œæ–‡ä»¶ï¼Œ è¿™æ ·å¾ˆå¥½åœ°é¿å…äº†æƒé™é—®é¢˜ï¼Œä½†æ˜¯ç ”ç©¶ä¸€ç•ªå‘ç°ï¼Œæ²¡é‚£ä¹ˆç®€å•â€¦. Bookmark å¤§æ³•è¿™æ˜¯æˆ‘è‡ªå·±é¡¹ç›®é‡Œä½¿ç”¨çš„æ–¹æ³•ï¼Œ å¥½å¤„åœ¨äºæ–‡ä»¶æ“ä½œå¾ˆè‡ªç„¶ï¼Œ ä¸ä¼šè®©ç”¨æˆ·è§‰å¾—è‡ªå·±çš„æ•°æ®å¯ä»¥è¢«éšä¾¿ä¹±ç¿»ï¼ˆäº‹å®ä¹Ÿç¡®å®æ˜¯è¿™æ ·çš„ï¼‰ å°† App Sandbox â€“&gt; File Access å†…çš„ User Selected File æ”¹ä¸º Read/Write åœ¨é¡¹ç›®çš„ entitlements æ–‡ä»¶ä¸­æ·»åŠ è¿™æ ·ä¸€é¡¹ com.apple.security.files.bookmarks.app-scopeï¼Œè®¾ä¸º YES ä½¿ç”¨ NSOpenPannel / NSSavePannel é€‰æ‹©éœ€è¦è®¿é—®çš„æ–‡ä»¶ï¼ˆå¤¹ï¼‰ åœ¨ SwiftUI ä¸­ç›´æ¥ç”¨ .fileImporter ä¹‹ç±»çš„ modifer å°±è¡Œ è¿™æ ·å°±æ‹¿åˆ°äº†ç”¨æˆ·é€‰æ‹©çš„ URL å•¦ï¼Œå› ä¸ºæ˜¯ç”¨æˆ·é€‰æ‹©çš„ï¼Œç›®å‰è¿™ä¸ª URL æ˜¯æœ‰æƒè®¿é—®çš„ æ³¨æ„ï¼Œæ˜¯ç›®å‰ï¼Œé‡å¯ app å°±ä¸è¡Œäº† å› æ­¤æˆ‘ä»¬éœ€è¦æŠŠæƒé™æŒä¹…åŒ–ã€‚ ä¿å­˜ URL çš„ bookmark 1@AppStorage(&quot;bookmark&quot;) private var bookmark: Data? 12345do { bookmark = try url.bookmarkData(options: .withSecurityScope)} catch { print(error.localizedDescription) } ï¼ˆapp é‡å¯åï¼‰å†æ¬¡è®¿é—®æ­¤ URL 1234567guard let bookmark else { return }var isStale = falselet url = try URL(resolvingBookmarkData: bookmark, options: .withSecurityScope, relativeTo: nil, bookmarkDataIsStale: &amp;isStale)url.startAccessingSecurityScopedResource()// Do some file-related works like move, duplicate, etc.// try? FileManager.default.moveItem(at: a, to: b)url.stopAccessingSecurityScopedResource() start å’Œ stop ä¸€å®šè¦æˆå¯¹ï¼ï¼ è¿™é‡Œå±äºæ˜¯è®¿é—®ç³»ç»Ÿæ•æ„Ÿæ•°æ®ï¼Œå¦‚æœä¸åŠæ—¶ stop çš„è¯ç³»ç»Ÿå¯èƒ½ä¼šå¯¹ app çš„æƒé™åšé™åˆ¶ï¼Œ å› æ­¤ä¸èƒ½æ»¥ç”¨ï¼Œè¿™å°±æ˜¯ Sandbox ä¸ºä»€ä¹ˆå®‰å…¨ã€è®©äººæ”¾å¿ƒçš„åŸå› äº†ã€‚ url.startAccessingSecurityScopedResource() ä¹Ÿä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå‘Šè¯‰ä½ ä½ æ˜¯å¦çœŸçš„å¯ä»¥è¿™é‡Œçš„æ•°æ®äº†ï¼Œå¦‚æœä¸º true æ‰èƒ½ç®—æˆåŠŸã€‚ Apple Script å¤§æ³•Apple Script å®é™…ä¸Šæ˜¯ä»£æ›¿ç”¨æˆ·æ“ä½œçš„ä¸€ç§è„šæœ¬ï¼Œæœ¬è´¨ä¸Šæ˜¯ä»£æ›¿äº†æ‰‹åŠ¨çš„æ“ä½œè€Œå·²ï¼Œå› æ­¤è¿™é‡Œå¯ä»¥æ“ä½œæ‰€æœ‰æ–‡ä»¶äº†ï¼Œåœ¨æ²™ç›’ç¯å¢ƒä¸‹å½“ç„¶æ˜¯ä¸ä¼šé»˜è®¤å…è®¸çš„ã€‚ å¦‚æœå¯ç”¨äº† Hardened Runtimeï¼Œè¦å…ˆåœ¨é‡Œé¢å¯ç”¨ Apple Eventsï¼Œå¦åˆ™æ— æ³•å¼¹å‡ºè¯·æ±‚æ¡†ã€‚ é Sandboxå¦‚æœåœ¨ é Sandbox ç¯å¢ƒä¸‹ï¼Œåªéœ€è¦é…ç½® Privacy - AppleEvents Sending Usage Description å‘Šè¯‰ç”¨æˆ·ä½ æ‰§è¡Œçš„è„šæœ¬çš„åŠŸèƒ½æ˜¯å¹²å•¥çš„å°±è¡Œã€‚ ç„¶åå°±å¯ä»¥ä»»æ„è°ƒç”¨ applicationsäº†ï¼Œä¾‹å¦‚ï¼Œè°ƒç”¨ Finder æ¥ move æ–‡ä»¶ä¹‹ç±»çš„ã€‚ åˆ«æ…Œï¼å³ä½¿æ˜¯é Sandbox ä¹Ÿä¼šæœ‰ä¸€æ­¥â€œè‡ªåŠ¨åŒ–â€æˆæƒçš„ï¼ Sandboxåœ¨ Sandbox ç¯å¢ƒä¸‹å°±ä¼šæœ‰é™åˆ¶äº†ï¼Œä¸ä¼šè®©ä½ èƒ½ç›´æ¥è®¿é—®æ‰€æœ‰çš„ applications ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šæœ‰æ½œåœ¨çš„æ¶æ„è¡Œä¸ºã€‚ ä½ è¿˜æ˜¯å¾—é…ç½® Privacy - AppleEvents Sending Usage Description å‘Šè¯‰ç”¨æˆ·ä½ æ‰§è¡Œçš„è„šæœ¬çš„åŠŸèƒ½æ˜¯å¹²å•¥çš„ï¼Œ ä½ åœ¨éœ€è¦ä½¿ç”¨å¯¹åº”çš„ applications ä¹‹å‰éœ€è¦å» entitlements é‡Œæå‰å£°æ˜ã€‚ï¼ˆç”¨åˆ°å‡ ä¸ªå†™å‡ ä¸ªï¼‰ 1234&lt;key&gt;com.apple.security.temporary-exception.apple-events&lt;/key&gt;&lt;array&gt; &lt;string&gt;com.apple.Finder&lt;/string&gt;&lt;/array&gt; è¿™æ ·ä½ å°±å¯ä»¥åœ¨ app ä¸­ä½¿ç”¨ NSAppleScript æ‰§è¡Œè„šæœ¬äº†ã€‚ å¦åˆ™ï¼Œä¼šæŠ¥é”™ -600 å› ä¸ºæ˜¯æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œçš„è„šæœ¬ï¼Œå› æ­¤åœ¨ç§»åŠ¨æ–‡ä»¶ã€åˆ é™¤æ–‡ä»¶çš„æ—¶å€™éƒ½ä¼šæœ‰ç³»ç»Ÿæç¤ºéŸ³å“¦ï½ ç»“å°¾ç›®å‰æˆ‘çš„é¡¹ç›®ä¸­è¿˜æ˜¯ä½¿ç”¨äº† Bookmark å¤§æ³•ï¼Œæ›´åŠ ç®€å•ï¼Œä¸ä¼šè®©ç”¨æˆ·è§‰å¾—å±é™©ã€‚ ä¸»è¦æ˜¯ Apple Script é‚£äº›å¼¹çª—å°±è›®å“äººäº†â€¦","link":"/sandbox-url-persistence/"},{"title":"æ¢ç´¢ Swift Concurrency (1)","text":"Swift å¹¶å‘æ˜¯ WWDC 21 ä¸Šçš„ä¸€ä¸ªé‡ç£…æ”¹è¿›ï¼Œæä¾›äº† async/await çš„è¯­æ³•ï¼Œ è®©ä»£ç ç»“æ„æ›´åŠ æµç¨‹åŒ–ï¼Œæ›´åŠ ä¾¿äºç†è§£å’Œè°ƒè¯•ã€‚ å®˜æ–¹æŒ‡å—ï¼šå¼€å§‹ä½¿ç”¨ Swift å¹¶å‘ actor WWDC Sessionsï¼š åˆ©ç”¨ Swift å¹¶å‘æ¶ˆé™¤æ•°æ®äº‰ç”¨ åˆ©ç”¨ Swift Actor ä¿æŠ¤å¯å˜çŠ¶æ€ actor å’Œ class å¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯ Ref Typeã€‚ ä½†æ˜¯ Actor ä¿è¯äº†å†…éƒ¨æ•°æ®çš„å”¯ä¸€æ€§ï¼Œå³ä¸€æ¬¡åªæœ‰ä¸€ä¸ªå‡½æ•°èƒ½è°ƒç”¨ï¼Œ å¦‚æœæœ‰å¤šä¸ªå‡½æ•°åŒæ—¶è°ƒç”¨è¯¥å±æ€§ï¼Œåˆ™éœ€è¦æ’é˜Ÿã€‚ ä¿è¯äº†åœ¨å¹¶å‘ç¯å¢ƒä¸‹çš„æ•°æ®ç«äº‰ (Data Races)ã€‚ å…¶ç”¨æ³•ä¸ struct/class ä¸€è‡´ã€‚ Main Actor WWDC Sessionï¼šåˆ©ç”¨ Swift Actor ä¿æŠ¤å¯å˜çŠ¶æ€ ç®€å•ç†è§£å°±æ˜¯ï¼šä¸»çº¿ç¨‹ã€‚ æ‰€æœ‰çš„ UI Updates éƒ½éœ€è¦åœ¨ Main Actor ç¯å¢ƒä¸‹å®Œæˆã€‚ æœ‰ä»¥ä¸‹å‡ ç§å†™æ³•ï¼š 123Task { @MainActor in // UI Updates} 123@MainActor func updateUI() { // UI Updates} 12345Task { await MainActor.run { // UI Updates }} 12345678910111213@MainActorclass ViewModel: ObservableObject { @Published var show = false func fetch() async { let data = ... updateUI() // Run on the MainActor because the whole class is in MainActor. } func updateUI() { // UI Updates }} async let WWDC Sessionï¼šæ¢ç´¢ Swift ä¸­çš„ç»“æ„åŒ–å¹¶å‘ async let å¯ä»¥è®©å¤šä¸ªæ“ä½œä¸€èµ·æ‰§è¡Œï¼Œåˆ°çœŸæ­£éœ€è¦ä½¿ç”¨çš„æ—¶å€™å† awaitã€‚ 12345678910111213141516func fetchImage() async { // Fetching Image}func fetchMetaData() async { // Fetching Meta Data}async let image = fetchImage() // Start fetching while the CPU is free.async let metaData = fetchMetaData() // The same as image.// Do other work...// Display the image and backup.display(await image)backup(await metaData) // This is just an example...haha è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœåªç”¨ awaitï¼Œimage å’Œ metaData ä¼šä¾æ¬¡è·å–ï¼Œåœ¨è·å–æœŸé—´ç¨‹åºæŒ‚èµ· (Suspended)ï¼Œä¸ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚ å¦‚æœ image çš„è·å–æ¯”è¾ƒæ…¢ï¼Œé‚£ä¹ˆå°±ä¼šå¡åœ¨è¿™é‡Œã€‚ 123456789101112func fetchImage() async { }func fetchMetaData() async { }let image = await fetchImage() // It's stuck here.ğŸ˜…let metaData = await fetchMetaData() // As well as here.ğŸ˜…// Do other work...// Because we were stuck before, so we waste a large amount of time.// Display the image and backup.display(image)backup(metaData) // This is just an example...haha Task Group WWDC Sessionï¼šæ¢ç´¢ Swift ä¸­çš„ç»“æ„åŒ–å¹¶å‘ å¤šä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œçš„æ—¶å€™å¯ä»¥ä½¿ç”¨ Task Group 123456789101112131415161718192021// Throwing Task GroupTask.detached { await withThrowingTaskGroup(of: Void.self) { group in for task in self.tasks { group.addTask { try await ... } } }}// Non-Throwing Task GroupTask.detached { await withTaskGroup(of: Void.self) { group in for task in self.tasks { group.addTask { await ... } } }} TaskGroup å¸¸ç”¨åœ¨ä¸€ç»„æ•°æ®çš„å¤„ç†ï¼Œä¾‹å¦‚ï¼šè·å–æ‰€æœ‰å•†å“çš„ç¼©ç•¥å›¾â€¦ ç”±äºæœ‰å¾ˆå¤š tasks åŒæ—¶æ‰§è¡Œï¼Œå› æ­¤å°±ä¼šæœ‰æ½œåœ¨çš„ Data Races æˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹å¤–éƒ¨çš„å˜é‡èµ‹å€¼ï¼ˆè¿™æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶æ£€æŸ¥é”™è¯¯ï¼‰ 1234567891011121314151617181920var integers = [Int]()// Throwing Task Groupfunc foo() { Task.detached { try await withThrowingTaskGroup(of: Int.self) { group in for _ in 0...10 { group.addTask { // Return some values here. return (0...100).randomElement()! } } // Read values from the group. for try await value in group { self.integers.append(value) } } }} Non-Throwing Task Group æ–¹æ³•ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸å†æ¼”ç¤ºäº†ã€‚ è¿™é‡Œä½¿ç”¨ Task.detached æ˜¯ä¸ºäº†é˜²æ­¢å—åˆ° Context çš„å½±å“ï¼Œ ä¾‹å¦‚ï¼šä¸‹è½½æ‰€æœ‰å•†å“çš„ç¼©ç•¥å›¾åº”åœ¨å…¶ä»–çº¿ç¨‹ä¸Šå®Œæˆï¼Œè€Œéä¸»çº¿ç¨‹ã€‚ å¾€ä¸‹çœ‹å°±çŸ¥é“æˆ‘åœ¨è¯´ä»€ä¹ˆäº†ã€‚ Task vs. Task.detached WWDC Sessionï¼šæ¢ç´¢ Swift ä¸­çš„ç»“æ„åŒ–å¹¶å‘ ç›¸å…³æ–‡ç« ï¼šWhatâ€™s the difference between a task and a detached task? Task æä¾›äº†ä¸€ç§ async çš„ç¯å¢ƒæ¥æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚ Task: Runs the given nonthrowing operation asynchronously as part of a new top-level task on behalf of the current actor. Task.detached: Runs the given throwing operation asynchronously as part of a new top-level task. Task ä¼šç»§æ‰¿å½“å‰çš„ Context å’Œ Priorityï¼Œ Honestlyï¼Œè¿™å¥è¯æˆ‘ç†è§£äº†å¾ˆä¹…ï¼ŒPriorityå¥½ç†è§£ï¼Œä½†æ˜¯ Context æ˜¯ä»€ä¹ˆï¼Ÿ 12345678910111213141516171819@MainActorclass TaskManager1 { func doWorks() { Task { print(&quot;Execute on main thread: \\(Thread.isMainThread)&quot;) // true } Task.detached { print(&quot;Execute on main thread: \\(Thread.isMainThread)&quot;) // false } }}class TaskManager2 { func doWorks() { Task { print(&quot;Execute on main thread: \\(Thread.isMainThread)&quot;) // false } }} è¯¸å¦‚çº¿ç¨‹ä¹‹ç±»çš„å±æ€§å°±æ˜¯æ‰€è°“çš„ Contextã€‚ ä¹Ÿå°±æ˜¯è¯´ä¸Šå±‚çš„è¿è¡Œç¯å¢ƒä¼šè¢«ç»§æ‰¿åˆ° Task ä¸­æ¥ï¼Œå¦‚æœä¸æƒ³è¦è¿™ç§ç»§æ‰¿ï¼Œä½¿ç”¨ Task.detached éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ Task.detached éœ€è¦æ˜¾å¼æ•è· selfï¼Œå³ self.variable Task + ObservableObject WWDC Sessionï¼šæ¢ç´¢ Swift ä¸­çš„ç»“æ„åŒ–å¹¶å‘ ç›¸å…³æ–‡ç« ï¼šWhatâ€™s the difference between a task and a detached task? åœ¨ SwiftUI ä¸­ï¼Œå¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬ä¼šä½¿ç”¨ @ObservedObject æˆ–è€… @StateObject æ¥ç®¡ç† ViewModel è¿™æ—¶å€™ï¼Œè¯¥è§†å›¾å°±ä¼šåœ¨ MainActor ä¸‹æ‰§è¡Œã€‚ 12345678910Task { for i in 0...1000 { print(&quot;Task 1: \\(i)&quot;) }}Task { for i in 0...1000 { print(&quot;Task 2: \\(i)&quot;) }} ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä½ ä¼šå‘ç°æ§åˆ¶å°ä¸­ Task 1 å’Œ Task 2 ä»ç„¶ä¼šæŒ‰æ¬¡åºæ‰§è¡Œã€‚ è¿™æ˜¯å› ä¸º @ObservedObject æˆ–è€… @StateObject é™åˆ¶äº†è§†å›¾è¿è¡Œåœ¨ MainActor ä¸Šï¼Œ æ‰€æœ‰çš„æ›´æ–°éƒ½å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ï¼Œè€Œ Task ä¼šç»§æ‰¿ Contextï¼Œå› æ­¤è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨ Task.detached 12345678910Task.detached { for i in 0...1000 { print(&quot;Task 1: \\(i)&quot;) }}Task.detached { for i in 0...1000 { print(&quot;Task 2: \\(i)&quot;) }} éƒ½æ¢æˆ Task.detached ä¹‹åï¼ŒTask 1/2 å°±æ˜¯ä¸€èµ·æ‰§è¡Œäº†ï¼Œä¹Ÿä¸ä¼šéƒ½æŒ¤åœ¨ä¸»çº¿ç¨‹ä¸Šè·‘äº†ã€‚ nonisolated ç›¸å…³æ–‡ç« ï¼šHow to make parts of an actor nonisolated è¿˜è®°å¾—æœ€å¼€å§‹çš„ actor å§ï¼Œ å¤šä¸ªå‡½æ•°è°ƒç”¨å®ƒçš„æ—¶å€™åªæœ‰å…¶ä¸­ä¸€ä¸ªèƒ½æ‰§è¡Œï¼Œå…¶ä½™çš„ç­‰å¾…ä¸Šä¸€ä¸ªæ‰§è¡Œå®Œæˆå†è¿›å…¥ï¼Œ è¿™è¢«ç§°ä¸ºéš”ç¦»ï¼Œå¾ˆæœ‰æ•ˆåœ°é¿å…äº† Data Races ä½†æ˜¯å¹¶é actor ä¸­æ‰€æœ‰çš„å‡½æ•°ã€å±æ€§éƒ½éœ€è¦è¢«éš”ç¦»å¼€ã€‚ å¯¹ actor æ‰©å±• Hashable åè®®æ—¶ï¼Œhash(into hasher: inout Hasher) ä¸æ”¯æŒ async/await WWDC Sessionï¼šåˆ©ç”¨ Swift Actor ä¿æŠ¤å¯å˜çŠ¶æ€ 123456789101112131415actor MyHashableActor { let staticValue = 0 var variable = 1}extension MyHashableActor: Hashable { static func == (lhs: MyHashableActor, rhs: MyHashableActor) -&gt; Bool { return true // Comforms to Equatable } nonisolated func hash(into hasher: inout Hasher) { hasher.combine(staticValue) hasher.combine(variable) // ğŸ™… // This is an error because variable is mutable // and the `hash(into hasher: inout Hasher)` is nonisolated. }} actor å†…éƒ¨çš„å‡½æ•°çš„å…¶ä¸­ä¸€éƒ¨åˆ†å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸æ€§èƒ½ã€‚ WWDC Sessionï¼š Swift å¹¶å‘çš„å¯è§†åŒ–ä¸ä¼˜åŒ– 123456789101112131415161718192021222324252627actor Compressor { var state = true // Since the function is nonisolated // and we still need to update the state, // so, the `compressFile()` funtion is marked `async`. // Now, the programme will only be blocked when updating the state. nonisolated func compressFile(_ file: File) async -&gt; Data { await updateState() // Blocked here to avoid Data races. let data = compress(file) // This operation can be ran simultaneously. await updateState() // Also blocked here to avoid Data races. return data } func updateState() { state.toggle() }}let compressor = Compressor()for file in files { Task.detached { let data = await self.compressor.compressFile(file) }}func compress(_ file: File) -&gt; Data { // Compress file.} æ‰§è¡Œé€»è¾‘ï¼ˆä¸ªäººç†è§£ï¼‰ WWDC Sessionï¼šSwift å¹¶å‘åŠŸèƒ½ï¼šå¹•åæ•…äº‹ @MainActor ä¸­çš„ Task Task ä¸­çš„æ“ä½œå‡ç”± ä¸»çº¿ç¨‹ å®Œæˆï¼Œç»§æ‰¿ MainActor é‡åˆ° await æ—¶ï¼Œ ç¨‹åºè¢«æŒ‚èµ·ï¼Œå¾…æ‰§è¡Œçš„ä»£ç è¢«è¿ç§»åˆ°å…¶ä»–çº¿ç¨‹ï¼ˆæ ¹æ® priority ä¾æ¬¡æ‰§è¡Œï¼‰ï¼Œä¸»çº¿ç¨‹é‡Šæ”¾ï¼Œä¾›å…¶ä»–éœ€è¦åœ¨ä¸»çº¿ç¨‹è¿è¡Œçš„ä»£ç ç»§ç»­ã€‚ await ç»“æœå¯ç”¨ä¹‹åï¼Œä»å‘†åœ¨åŸåœ°ï¼Œç­‰å¾…ä¸»çº¿ç¨‹ç©ºé—²ï¼Œä¹‹åå›åˆ°ä¸»çº¿ç¨‹ï¼Œæ¢å¤ä¹‹å‰çš„çŠ¶æ€ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚ é @MainActor ä¸­çš„ Task Task ä¸­çš„æ“ä½œå‡ä¼šåœ¨ å…¶ä»–çº¿ç¨‹ ä¸­å®Œæˆï¼Œç»§æ‰¿ä¸Šå±‚çš„ Context åä¸¤ç‚¹ä¸ä¸Šä¸€æ¡åŸºæœ¬ä¸€è‡´ Task.detached ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å®Œæˆæ“ä½œã€‚","link":"/swift-concurrency/"},{"title":"SwiftUI ä¸­çš„ Conditional Scene","text":"åœ¨ SwiftUI ä¸­ï¼Œæœ‰æ—¶éœ€è¦å¯¹æ–°çš„ API åšéš”ç¦»æ¥ä¿è¯å…¼å®¹è€çš„ç³»ç»Ÿã€‚ åœ¨ View ä¸­å¾ˆå¥½è§£å†³ï¼Œä½†æ˜¯åœ¨ Scene ä¸­ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°è¿™æ ·çš„é”™è¯¯æç¤ºã€‚ Closure containing control flow statement cannot be used with result builder â€˜SceneBuilderâ€™ è§£å†³æ€è·¯è§£å†³æ–¹æ³•å°±æ˜¯æŠŠéœ€è¦ç”¨æ¡ä»¶åˆ¤æ–­ç»™å‡ºä¸åŒçš„ Scene çš„éƒ¨åˆ†å•ç‹¬å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œ è¿”å› some Sceneï¼ŒåŒæ—¶ä¸è¦ä½¿ç”¨ @SceneBuilder body ä¸­é»˜è®¤ä½¿ç”¨ @SceneBuilder æ¥æ”¯æŒå¤šä¸ª Scene åœ¨ if-condition ä¸­è¿”å›çš„å¯èƒ½æ˜¯ä¸¤ä¸ªä¸åŒç±»å‹çš„ Sceneï¼Œä½†æ˜¯å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸é€æ˜çš„ some Sceneï¼Œå› æ­¤åªè¦è¿”å›çš„å†…å®¹æ˜¯ç¬¦åˆ Scene åè®®çš„å°±å¯ä»¥ã€‚ å¯ä»¥å‚è€ƒæˆ‘åœ¨ stackoverflow ä¸Šçš„å›ç­” æœ€åï¼Œä¸Šä»£ç ï¼ 12345678910111213141516171819202122232425262728293031323334@mainstruct YourApp: App { var body: some Scene {#if os(macOS) // macOS conditionalWindowScene().windowStyle(.hiddenTitleBar)#else // Other Platform WindowGroup { ContentView() }#endif }#if os(macOS) /// Extract your conditional scene to avoid using `@SceneBuilder` /// In `body`, SwiftUI will always use `@SceneBuilder` to build multiple Scene. /// Because the result type is `some Scene`, /// you just need to return a type that conforms to `Scene` Protocol. func conditionalWindowScene() -&gt; some Scene { if #available(macOS 13.0, *) { /// `Window` Scene is only available on macOS 13.0+ return Window(&quot;App&quot;, id: &quot;MAIN&quot;) { ContentView() } } else { /// Otherwise, using `WindowGroup` return WindowGroup { ContentView() } } }#endif}","link":"/swiftui-conditional-scene/"},{"title":"è®°å½•ä¸€æ¬¡ ï£¿ å®˜æ–¹å¬å›è®¡åˆ’çš„ç»´ä¿®","text":"è¿˜è®°å¾—å‡ å¹´å‰è‹¹æœæ¨å‡ºä¸€é¡¹å¬å›è®¡åˆ’ï¼Œ æ‰€æœ‰ä½¿ç”¨äº†è¶å¼é”®ç›˜çš„ MacBook å‡ºç°é”®ç›˜é—®é¢˜éƒ½å¯ä»¥å…è´¹æ¢é”®ç›˜ï¼Œ å½“æ—¶ä¹°ç”µè„‘çš„æ—¶å€™ä¹°äº† Apple Care+ æœ¬æƒ³æ¢å—æ–°ç”µæ± ï¼Œç»“æœæ­»æ´»å¡åœ¨ 80% - 82%ï¼Œ å½“æ—¶åº—å‘˜å°±è·Ÿæˆ‘è¯´è®©æˆ‘ç•™æ„é”®ç›˜é—®é¢˜ï¼Œä¿ä¿®æ—¶é—´æ˜¯4å¹´ å…·ä½“è¡¨ç°é”®ç›˜çš„ N æŒ‰ä¸‹å»æ²¡ååº”ï¼Œéœ€è¦å¤§åŠ›å‡ºå¥‡è¿¹æ‰èƒ½æ‰“å‡ºå­—æ¯ï¼Œ æŒ‰ç…§æƒ¯ä¾‹ï¼Œç¬¬ä¸€æ—¶é—´å½•ä¸‹è§†é¢‘ä½œä¸ºè¯æ® è¿™ç§é—®é¢˜å¾ˆæœ‰å¯èƒ½ä¼šåœ¨ç¬¬äºŒå¤©è‡ªåŠ¨æ¢å¤ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯ï¼Œæ‰€ä»¥è¦ç•™ä¸‹è¯æ®ï¼Œéå¸¸é‡è¦â€¼ï¸ é¢„çº¦ç»´ä¿®ç¬¬ä¸€æ¬¡å‡ºç°é—®é¢˜æ—¶æ²¡å¤ªåœ¨æ„ï¼Œå°±å½•äº†ä¸ªè§†é¢‘ä¹Ÿå°±æ²¡ç®¡ï¼Œ å¥½å·§ä¸å·§ï¼Œå‰å‡ å¤©æ™šä¸Šåˆé‡åˆ°äº†ï¼Œèµ¶ç´§é¢„çº¦äº†ç¬¬äºŒå¤©çš„å¤©æ‰å§ã€‚ è·Ÿå¤©æ‰å§çš„å¤©æ‰äº¤æµå½“å¤©æ—©ä¸Šï¼Œé—®é¢˜åˆâ€œè‡ªåŠ¨ä¿®å¤â€äº†ğŸ˜‚ï¼Œæ‰€ä»¥è¯´å½•è§†é¢‘å¾ˆé‡è¦â€¼ï¸ï¼Œ å¤©æ‰å§é‡Œçš„å¤©æ‰æŒ‰äº†å¾ˆä¹…ä¹Ÿæ²¡èƒ½æˆåŠŸå¤ç°ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰å› æ­¤è¯´ç”µè„‘æ²¡é—®é¢˜ï¼ˆä¸åƒæŸå“ç‰Œé‚£ä¹ˆå‚²æ…¢ï¼‰ï¼Œ æœ€åæ˜¯æŠŠ N é”®æ‹†å¼€ä¹‹åç›´æ¥è§¦ç¢°è§¦ç‚¹å¤ç°äº†ä¸€ä¸ªæˆ‘ä»æ¥æ²¡æœ‰é‡åˆ°çš„é—®é¢˜ğŸ˜‚ æˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯ï¼šæŒ‰ä¸‹å»æ²¡ååº” ä»–æµ‹è¯•å‡ºæ¥çš„æ˜¯ï¼šæŒ‰ä¸‹å»ä¹‹åååº”ä¸¤ä¸‹ğŸ˜‚ æ—¢ç„¶è¿™æ ·ï¼Œé‚£å°±ç»´ä¿®å‘—ï¼Œæ›´æ¢äº†æ•´ä¸ªé”®ç›˜æ€»æˆå’Œä¸Šå£³å¥—ä»¶ã€‚ åŒ…æ‹¬ é”®ç›˜ã€Touch Barã€Touch IDã€è§¦æ§æ¿ã€æŒæ‰˜ä¸€ç›´åˆ°USB-Cçš„å¤–å£³ ä»¥åŠ ç”µæ± ã€‚ çº¦ç­‰äº æ¢äº†åŠå°æ–°ç”µè„‘ï¼Œ åé¢å°±æ˜¯ç­¾ä¸ªå­—ï¼Œè·‘ä¸ªè¯Šæ–­ï¼Œå°±æ¬§äº†ï½ æˆ‘çš„æ•´ä¸ªæ›´æ¢çš„å‘¨æœŸæ˜¯1å¤©åŠã€‚ æ–°æ¢çš„å¥—ä»¶éƒ½å¸¦ 90 å¤©ä¿ä¿®ã€‚ ä¹Ÿæ€»ç®—æ˜¯ç»™æˆ‘æ¢åˆ°ç”µæ± äº†ï¼æ»¡è¡€å¤æ´»ï¼ï¼ è°ˆè°ˆå”®åå”®åçš„ç›®çš„å°±æ˜¯è®©æ¶ˆè´¹è€…æ”¾å¿ƒçš„å»ä½¿ç”¨è‡ªå·±è´­ä¹°çš„äº§å“ï¼Œ å¦‚æœä½ æœ‰æ½œåœ¨çš„è´¨é‡é—®é¢˜ï¼Œç»™äºˆå®¢æˆ·è¿™æ ·çš„å¬å›ä¿ä¿®æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œ ä¹‹å‰æˆ‘çš„ Apple Pencil å‡ºç°äº†æ’åœ¨ iPad ä¸Šåå‘å……ç”µï¼ˆè¶Šå……è¶Šå°‘ï¼‰çš„é—®é¢˜ï¼Œ åœ¨ç°åœºä¸èƒ½å¤ç°ï¼Œä½†æ˜¯æˆ‘å½•äº†è§†é¢‘ï¼Œç¡®å®æœ‰è¿™æ ·çš„é—®é¢˜ï¼Œä»–ä»¬ä¹Ÿä¾ç„¶ç»™æˆ‘åšäº†æ›´æ¢ï¼Œ å°±è§‰å¾—è‹¹æœåœ¨è¿™æ–¹é¢åšçš„ç‰¹åˆ«å¥½ï¼ŒçœŸçœŸåˆ‡åˆ‡çš„å¸®åŠ©å®¢æˆ·å°è¯•è§£å†³é—®é¢˜ï¼ˆæ›´æ¢ä¹‹åä¹Ÿç¡®å®æ˜¯æ²¡å†å‡ºç°è¿‡è¿™ä¸ªæƒ…å†µäº†ï¼‰ï¼Œ ä½†æ˜¯è¿™ç»å¯¹ä¸æ˜¯æ„å‘³ç€å¯ä»¥è¿™æ ·å­å»éª—ä¿ï¼Œè¿™æ˜¯æˆ‘çš„åº•çº¿ã€‚ æœ€è¿‘ä¹Ÿåœ¨å„å¤§å¹³å°ä¸Šä¹Ÿçœ‹åˆ°äº†åä¸ºæ‹’ä¿ Pocket S å±å¹•è´¨é‡é—®é¢˜çš„æ¡ˆä¾‹ï¼Œ å¾ˆå¤šäººæ˜æ˜æ²¡æœ‰è®¤ä¸ºæŸåï¼Œå°±æ˜¯ä¸€ç‚¹ç‚¹æ‰æ¼†éƒ½è¢«è®¤å®šä¸ºäººä¸ºæŸåæ‹’ä¿äº†ï¼Œ åªèƒ½è¯´ï¼Œå‰²éŸ­èœå‰²çš„çœŸçˆ½â€¦","link":"/macbook-pro-keyboard-repair/"},{"title":"Swift ä¸­çš„ç±»å‹æ“¦é™¤ï¼ˆä¸Šï¼‰â€”â€” ä¸ºä»€ä¹ˆ &amp; æ€ä¹ˆåš","text":"æ¢ç´¢ç±»å‹æ“¦é™¤çš„åŸç†å’Œå®ç°ï¼Œå¸¸è§çš„ç±»å‹æ©¡çš®æ“¦æœ‰ï¼šAnyViewã€AnyShapeã€AnyCollectionâ€¦ 1234protocol Tool { associatedtype S: StringProtocol func name() -&gt; S} é€šè¿‡è¿™ä¸ªåè®®ï¼ˆæˆ–è€…å«æ¥å£ï¼‰å¯ä»¥åˆ›å»ºä¸€ä¸ª Tool 1234567891011121314151617struct Pen: Tool { func name() -&gt; some StringProtocol { &quot;Pen&quot; }}struct Pencil: Tool { func name() -&gt; some StringProtocol { &quot;Pencil&quot; }}struct Ruler: Tool { func name() -&gt; some StringProtocol { &quot;Ruler&quot; }} æ¥ä¸‹æ¥ï¼Œæˆ‘è¦åˆ›å»ºä¸€ä¸ª ToolController æ¥ç®¡ç†æˆ‘çš„â€œå·¥å…·ä»¬â€ï¼Œ 123class ToolController {} æˆ‘ä»¬å…ˆæ¥è·å–æ‰€æœ‰å·¥å…·ï¼Œä½†æ˜¯é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œ è¿™é‡Œè™½ç„¶åªæœ‰ä¸‰ä¸ªå·¥å…·ï¼Œå¯ä»¥ä¸€ä¸ªä¸ªå†™ï¼Œ ä½†æ˜¯è¿™åªæ˜¯ä¸ªä¾‹å­ï¼Œåœ¨å®é™…åº”ç”¨ä¸­è¿™é‡Œçš„æ•°é‡æ˜¯æœªçŸ¥çš„ï¼Œ åº”è¯¥å¦‚ä½•è·å–æ‰€æœ‰çš„å·¥å…·å‘¢ï¼Ÿå¤§è‡´æ€è·¯æ˜¯è¿™æ ·çš„ã€‚ 1let tools: [Tool] = [Pen(), Pencil(), Ruler()] ä½†æ˜¯ï¼ŒTool ä¸­æœ‰ associatedtypeï¼Œå› æ­¤ Tool ä¸èƒ½å½“ä½œç±»å‹æ¥ä½¿ç”¨ï¼Œ å¥½æ¶ˆæ¯æ˜¯ï¼Œåœ¨ Swift 5.7 æˆ–æ›´æ–°ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ any Tool æ¥ä½œä¸ºç±»å‹ï¼Œ ä½†æ˜¯ä¹‹åçš„æ‰€æœ‰ç»“æœéƒ½å¸¦æœ‰ anyï¼Œå¯èƒ½ä¸ä¼šæ˜¯ä½ é¢„æœŸçš„ç»“æœã€‚ æ¯”å¦‚ any View ä¸ç¬¦åˆ View åè®®â€¦ é™¤äº†è¿™æ ·çš„æ•°ç»„åˆ›å»ºå’Œä½¿ç”¨ä¸Šå¯èƒ½ä¼šå—é˜»ï¼Œåœ¨å¤šåˆ†æ”¯è¿”å›æ˜¯ä¹Ÿä¼šå‡ºé—®é¢˜ã€‚ 123456789101112class ToolController { var currentTool = &quot;pen&quot; // âŒ Function declares an opaque return type 'some Tool', but the return statements in its body do not have matching underlying types. func getCurrentTool() -&gt; some Tool { switch currentTool { case &quot;pen&quot;: return Pen() case &quot;ruler&quot;: return Ruler() default: return Pencil() } }} some å…³é”®å­—è¡¨ç¤ºä¸é€æ˜çš„ç±»å‹ï¼ˆopaque typeï¼‰ï¼Œ æˆ‘ä»¬åªéœ€è¦çŸ¥é“ä»–æ˜¯ä¸€ä¸ªç¬¦åˆ Tool åè®®çš„ä¸œè¥¿ï¼Œ ä½†æ˜¯å…·ä½“æ˜¯ä»€ä¹ˆä¸çŸ¥é“ï¼Œä¹Ÿä¸å…³å¿ƒæ˜¯ä»€ä¹ˆï¼Œäº¤ç»™ç¼–è¯‘å™¨å»æ¨æ–­ã€‚ å› ä¸ºåœ¨ä¸‰ä¸ª case ä¸­è¿”å›çš„ç»“æœç±»å‹ä¸ä¸€è‡´ï¼Œç¼–è¯‘æ—¶æ— æ³•æ¨æ–­ Tool çš„ç±»å‹ï¼Œ è€Œä¸‰ä¸ªåˆ†æ”¯ä¸­ä½¿ç”¨çš„ Tool æ˜¯å®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼Œä¸èƒ½ç›´æ¥æ›¿æ¢ã€‚ å¦‚æœè¿˜æœ‰æ›´å¤šåˆ†æ”¯çš„è¯æƒ…å†µä¼šæ›´åŠ å¤æ‚ï¼Œ å› æ­¤ï¼Œè‹¥æƒ³ç»Ÿä¸€ç±»å‹ï¼Œä¸å¦¨åˆ›å»ºä¸€ä¸ªç±»å‹æ©¡çš®æ“¦æ¥æ“¦é™¤åŸæœ¬çš„ç±»å‹ï¼Œ è¿™æ—¶å€™æ¯ä¸€ä¸ªåˆ†æ”¯è¿”å›çš„ç±»å‹éƒ½æ˜¯â€œæ©¡çš®æ“¦â€çš„ç±»å‹ï¼Œä¹Ÿå°±æ²¡é—®é¢˜äº†ã€‚ ç±»å‹æ“¦é™¤çš„åŸç†ä»¥åŠå®ç° åˆ›å»ºæ©¡çš®æ“¦ï¼ˆä»¥ä¸‹ç§°ä¹‹ä¸º Eraserï¼‰ï¼ŒEraser è¦ç¬¦åˆä½ çš„ Protocol æ©¡çš®æ“¦çš„åç§°ä¸€èˆ¬æ˜¯ Any + åè®®å 12345struct AnyTool: Tool { func name() -&gt; some StringProtocol { }} åˆå§‹åŒ–ä¸­ä¼ å…¥ä¸€ä¸ªè¦è¢«æ“¦é™¤ç±»å‹çš„ Tool ï¼ˆä¸‹é¢ç§°ä¹‹ä¸ºTypeï¼‰ 123init&lt;T: Tool&gt;(erasing tool: T) {} åˆ›å»ºä¸­é—´å˜é‡æ¥ä¼ é€’ Type ä¸­çš„å¿…è¦çš„æ–¹æ³•å’Œå±æ€§ 12345internal let _name: Sinit&lt;T: Tool&gt;(erasing tool: T) { _name = (tool.name() as? S) ?? &quot;IDK.&quot;} æœ€åï¼Œç”¨ name æ¥å¡«è¡¥ Eraser ä¸­éœ€è¦çš„æ–¹æ³• 123456789101112struct AnyTool: Tool { typealias S = String // This must be a type that conforms to StringProtocol. internal let _name: S init&lt;T: Tool&gt;(erasing tool: T) { _name = (tool.name() as? S) ?? &quot;IDK.&quot; } func name() -&gt; S { _name }} åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ç±»å‹ä» some StringProtocol å˜æˆäº† String å¦‚æœæ˜¯ Viewï¼Œä¸€èˆ¬ä¼šæŠŠä»–æ›¿æ¢æˆ AnyView è¿™é‡Œå¦‚æœä¸èƒ½å°† tool.name() è½¬æ¢æˆ String çš„è¯å°±è¿”å› IDK. è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°† Penã€Pencilã€Ruler éƒ½å˜æˆ AnyToolï¼Œè§£å†³äº†ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ã€‚ 1234567891011121314151617class ToolController { var allTools: [AnyTool] = [] var currentTool = &quot;pen&quot; func getAllTools() { let tools = [AnyTool(erasing: Pen()), AnyTool(erasing: Pencil()), AnyTool(erasing: Ruler())] allTools = tools } func getCurrentTool() -&gt; some Tool { switch currentTool { case &quot;pen&quot;: return AnyTool(erasing: Pen()) case &quot;ruler&quot;: return AnyTool(erasing: Ruler()) default: return AnyTool(erasing: Pencil()) } }} å®ç°åŸç†å‚è€ƒ Approaches to Type Erasure in Swift","link":"/type-erasure-in-swift/"},{"title":"Swift ä¸­çš„ç±»å‹æ“¦é™¤ï¼ˆä¸‹ï¼‰â€”â€” ä»æ¨¡ä»¿ä¸­å­¦ä¹ ","text":"ä¸Šç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬åˆæ­¥äº†è§£äº†ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ª Type Eraser ï¼Œ ä¹Ÿåˆ†äº«äº†ä¸€ä¸ªç®€å•å®ç° Type Erasure çš„æ–¹æ¡ˆã€‚ ä¸ºäº†æ›´åŠ æ·±å…¥äº†è§£ç±»å‹æ“¦é™¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—æ¥çœ‹çœ‹ Swift è‡ªå¸¦çš„ä¸€äº› Type Eraser æ˜¯å¦‚ä½•å®ç°çš„ã€‚ ç›®æ ‡æ˜¯ï¼šç†è§£ä¸€ä¸‹å…¶åŸºæœ¬æ€è·¯ï¼Œå¹¶ä¸”ä»¿åˆ¶ä¸€ä¸ªå‡ºæ¥ã€‚ åº•å±‚åŸç†ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬èšç„¦äºä¸€ä¸ª Type Eraserï¼šAnyIterator ä¸ºä»€ä¹ˆæ˜¯å®ƒå‘¢ï¼Ÿ å› ä¸ºå®ƒå‡ºç°åœ¨æºç çš„æœ€ä¸Šé¢ğŸ˜‚ï¼Œè€Œä¸”ä¸‹é¢çš„ AnySequence å’Œ AnyCollection éƒ½å¾—å›åˆ° AnyIteratorã€‚ å…ˆçœ‹æºç ï¼ˆæˆ‘è¿™é‡Œå»é™¤äº†æ³¨é‡Šå’Œä¸€äº›ä¸å¤ªé‡è¦çš„ä»£ç ï¼Œæ–¹ä¾¿å¤§å®¶é˜…è¯»ï¼‰ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556@inline(never)@usableFromInlineinternal func _abstract( file: StaticString = #file, line: UInt = #line) -&gt; Never { fatalError(&quot;Method must be overridden&quot;, file: file, line: line)}public struct AnyIterator&lt;Element&gt; { @usableFromInline internal let _box: _AnyIteratorBoxBase&lt;Element&gt; @inlinable public init&lt;I: IteratorProtocol&gt;(_ base: I) where I.Element == Element { self._box = _IteratorBox(base) }}extension AnyIterator: IteratorProtocol { @inlinable public func next() -&gt; Element? { return _box.next() }}@_fixed_layout@usableFromInlineinternal class _AnyIteratorBoxBase&lt;Element&gt;: IteratorProtocol { @inlinable // FIXME(sil-serialize-all) internal init() {} @inlinable // FIXME(sil-serialize-all) deinit {} @inlinable // FIXME(sil-serialize-all) internal func next() -&gt; Element? { _abstract() }}@_fixed_layout@usableFromInlineinternal final class _IteratorBox&lt;Base: IteratorProtocol&gt; : _AnyIteratorBoxBase&lt;Base.Element&gt; { @inlinable internal init(_ base: Base) { self._base = base } @inlinable // FIXME(sil-serialize-all) deinit {} @inlinable internal override func next() -&gt; Base.Element? { return _base.next() } @usableFromInline internal var _base: Base} æ•´ç†ä¸€ä¸‹ï¼Œä¸€å…±ç”¨åˆ°ä¸¤ä¸ªç±»ï¼Œ_AnyIteratorBoxBaseï¼ˆåŸºç±»ï¼‰ å’Œ _IteratorBoxï¼ˆä¸­è½¬ç±»ï¼‰ åŸºç±»ç¬¦åˆåè®®ï¼Œå¹¶ä¸”ç”¨ä¸€äº›å ä½ç¬¦åšå¥½å¡«å……ï¼ˆéœ€è¦åœ¨ä¸­è½¬ç±»ä¸­é‡å†™è¿™äº›æ–¹æ³•ï¼‰ ä¸­è½¬ç±»ç»§æ‰¿è‡ªåŸºç±»ï¼Œå¹¶ä»å¤–éƒ¨æ¥æ”¶ä¸€ä¸ªç¬¦åˆåè®®çš„å®ä¾‹ï¼Œç”¨æ¥é‡å†™ï¼ˆè¦†ç›–ï¼‰åŸºç±»ä¸­çš„æ–¹æ³•å’Œå±æ€§ã€‚ æœ€åï¼Œç”¨ä¸€ä¸ªå¯¹å¤–çš„ Type Eraser å†åšä¸€æ¬¡ä¸­è½¬ã€‚ ä»¿åˆ¶è¿‡ç¨‹ä¸­çš„ä¸€äº›å‘123456789101112// MARK: - Protocol and Type Eraserprotocol MyCollection { â€¦ }struct AnyMyCollection&lt;Element&gt; { â€¦ }extension AnyMyCollection: MyCollection { â€¦ }â€¦// MARK: - Custom Typesstruct Animals: MyCollection { â€¦ }struct Digits: MyCollection { â€¦ }// MARK: - Type Erasure// âŒ Heterogeneous collection literal could only be inferred to '[Any]'; add explicit type annotation if this is intentionalvar collections = [AnyMyCollection(Animals()), AnyMyCollection(Digits())] é¦–å…ˆï¼Œæˆ‘æ³¨æ„åˆ°çš„æ˜¯ç±»å‹æ¨æ–­çš„é—®é¢˜ï¼Œ å¯ä»¥å°è¯•ä¸‹ AnyCollectionï¼ŒAnyIterator è¿™äº›ï¼Œå‘ç° collections ä¸­çš„ Element å˜æˆäº† Anyï¼Œ ä¹Ÿå°±å¼•å‡ºäº†ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ Swift çš„ç‰¹æ€§ä¹‹ä¸€ï¼šç±»å‹æ¨æ–­12345678// Type: AnyIterator&lt;Int&gt;AnyIterator([1, 2, 3].makeIterator())// Type: AnyIterator&lt;String&gt;AnyIterator([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;].makeIterator())// Type: [AnyIterator&lt;Any&gt;][AnyIterator([1, 2, 3].makeIterator()), AnyIterator([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;].makeIterator())] è¿™ä¿©ä¸œè¥¿çš„ Element ç±»å‹ä¸ä¸€è‡´ï¼Œä¸ºä»€ä¹ˆæ”¾åœ¨ä¸€èµ·è¿˜èƒ½ç¼–è¯‘å¹¶ä¸” Element å˜æˆ Any äº†å‘¢ï¼Ÿ å®é™…ä¸Šï¼Œæ˜¯ Swift çš„ç±»å‹æ¨æ–­åœ¨å¹²æ´» è€Œå¦‚æœæ¢ä¸€ç§å†™æ³•ï¼š 1234let intIterator = AnyIterator([1, 2, 3].makeIterator())let stringIterator = AnyIterator([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;].makeIterator())let together = [intIterator, stringIterator] // âŒ Heterogeneous collection literal could only be inferred to '[Any]'; add explicit type annotation if this is intentional å°±ä¼šæŠ¥é”™ï¼ŒåŸå› å°±åœ¨äºè¿™ä¸¤ä¸ªä¸œè¥¿çš„ç±»å‹ä¸ä¸€è‡´ï¼Œä¸èƒ½æ”¾åœ¨ä¸€ä¸ª Array é‡Œï¼Œ æå‰å£°æ˜çš„è¯ï¼Œç¼–è¯‘å™¨ä¼šå›ºåŒ–ç±»å‹ï¼Œæ˜¯ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆ AnyIterator&lt;String&gt; å’Œ AnyIterator&lt;Int&gt; æ˜¯ä¸¤ç§ä¸åŒçš„ç±»å‹ï¼Œå®ƒä»¬çš„ Element ä¸åŒ æ›´åŠ è¯¦ç»†çš„å¯ä»¥çœ‹æˆ‘é—®çš„è¿™ä¸ªå¸–å­ï¼šAnyCollection with different generic types å¯¹ Array å†åšä¸€ä¸ªæ‰©å±•ï¼Œè®©ä»»ä½•æ•°ç»„éƒ½ç¬¦åˆåè®®ã€‚ 12345extension Array: MyCollection { func allValues() -&gt; [Element] { self }}let arrayCollection = [AnyMyCollection([1, 2, 3]), AnyMyCollection([&quot;a&quot;, &quot;b&quot;])] // âœ… AnyMyCollection&lt;Any&gt; è¿™é‡Œçš„ä¸¤ä¸ªç±»å‹åˆ†åˆ«æ˜¯ï¼šAnyMyCollection&lt;Int&gt; å’Œ AnyMyCollection&lt;String&gt; ä½†æ˜¯å†åŠ ä¸Š Digits å´æŠ¥é”™äº†ã€‚ 12// âŒ Heterogeneous collection literal could only be inferred to '[Any]'; add explicit type annotation if this is intentionallet collection = [AnyMyCollection(Digits()), AnyMyCollection([1, 2, 3]), AnyMyCollection([&quot;a&quot;, &quot;b&quot;])] è¿™å°±æ˜¯ç¬¬äºŒä¸ªé—®é¢˜ã€‚ ç¼–è¯‘æ—¶æ¨æ–­ å’Œ è¿è¡Œæ—¶æ¨æ–­åˆ†æä¸€ä¸‹æ¯ä¸€ä¸ª AnyMyCollection çš„ç±»å‹ï¼š 12345678// AnyMyCollection&lt;Digits.Element&gt;AnyMyCollection(Digits())// AnyMyCollection&lt;Int&gt;AnyMyCollection([1, 2, 3])// AnyMyCollection&lt;String&gt;AnyMyCollection([&quot;a&quot;, &quot;b&quot;]) æŒ‰ç…§ä¹‹å‰è¯´çš„ï¼Œåº”è¯¥ç»Ÿä¸€æˆ AnyMyCollection&lt;Any&gt; æ‰å¯¹ï¼Œ ä½†æ˜¯ï¼Œä»”ç»†è§‚å¯Ÿèƒ½å¤Ÿå‘ç°ï¼Œä¼ å…¥ AnyMyCollection çš„ç±»å‹åˆ†åˆ«æ˜¯ Digits, Array&lt;Int&gt; å’Œ Array&lt;String&gt;ï¼Œ ç¬¬ä¸€ä¸ªä¸å¸¦æ³›å‹ï¼Œè€Œå…¶ä»–çš„å‡å¸¦æ³›å‹ï¼Œ å¯¹äº Array&lt;Element&gt; æ¥è¯´ï¼Œç¼–è¯‘æ—¶æ˜¯å¯ä»¥ç¡®å®š Element çš„å…·ä½“ç±»å‹çš„, ä¸” Array ä¸­çš„ Element å’Œ MyCollection ä¸­çš„ Element æ˜¯ä¸€è‡´çš„ï¼Œ å› æ­¤ï¼Œç¼–è¯‘æ—¶å¯ä»¥ç¡®å®šå‡º AnyMyCollection ä¸­çš„ Elementï¼ˆå³ Array ä¸­çš„ Elementï¼‰çš„ç±»å‹ã€‚ ä½†å¯¹äº Digits æ¥è¯´ï¼Œç”±äºå…¶æœ¬èº«æ²¡æœ‰æ³›å‹ï¼Œæ‰€ä»¥ Element äº‹å®ä¸Šæ˜¯è¢«â€œéšè—â€èµ·æ¥çš„ï¼Œ ç¼–è¯‘å™¨æ— æ³•æ¨æ–­å…¶ç±»å‹ï¼Œå› æ­¤ä¸èƒ½è‡ªåŠ¨å˜æˆ Anyã€‚ ç›´åˆ°è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå‡º Digits.Element çš„å…·ä½“ç±»å‹æ˜¯ Int æœ‰è§£å†³åŠæ³•å˜›ï¼Ÿæœ‰ã€‚ å°±æ˜¯ç»™ Digits åŠ ä¸Š Element çš„æ³›å‹ã€‚ ä½†æ˜¯åŠ ä¸Šæ³›å‹å†å»é™å®šåªèƒ½æ˜¯ Int å°±æœ‰ç‚¹è„±è£¤å­æ”¾å±çš„æ„Ÿè§‰äº†ğŸ˜‚ æœ€ç»ˆæˆ‘æŠŠå®ƒå˜æˆäº†ä¸€ä¸ª CustomCollection 123456789101112struct CustomCollection&lt;Element&gt; { internal var content: [Element] = [] init(_ content: Element...) { self.content.append(contentsOf: content) }}extension CustomCollection: MyCollection { func allValues() -&gt; [Element] { content }} AnyMyCollectionä¸Šé¢ä¸¤ä¸ªé—®é¢˜ç ”ç©¶é€å½»ä¹‹åï¼Œä» Protocol åˆ° Type Eraser çš„ä»¿åˆ¶ä¹Ÿå°±å®Œæˆäº†ã€‚ æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354protocol MyCollection&lt;Element&gt; { associatedtype Element func allValues() -&gt; [Element]} // MARK: - AnyMyCollectionstruct AnyMyCollection&lt;Element&gt; { internal var _box: _AnyMyCollectionBase&lt;Element&gt; init&lt;C: MyCollection&gt;(_ base: C) where Element == C.Element { _box = _MyCollectionBox(base) }}extension AnyMyCollection: MyCollection { func allValues() -&gt; [Element] { _box.allValues() }}final class _MyCollectionBox&lt;Base: MyCollection&gt;: _AnyMyCollectionBase&lt;Base.Element&gt; { init(_ base: Base) { _base = base } private var _base: Base override func allValues() -&gt; [Base.Element] { return _base.allValues() }}class _AnyMyCollectionBase&lt;Element&gt;: MyCollection { func allValues() -&gt; [Element] { fatalError(&quot;This method should be overwritten. Line 35.&quot;) }}extension Array: MyCollection { func allValues() -&gt; [Element] { self }}// - MARK: Custom Collectionstruct CustomCollection&lt;Element&gt; { internal var content: [Element] = [] init(_ content: Element...) { self.content.append(contentsOf: content) }}extension CustomCollection: MyCollection { func allValues() -&gt; [Element] { content }}var collections = [AnyMyCollection(CustomCollection(1, 2, 3)), AnyMyCollection([&quot;a&quot;, &quot;b&quot;])] æ€»ç»“æ•´ä¸ªè¿‡ç¨‹è€—è´¹äº†å·®ä¸è¿‡ä¸¤å¤©çš„æ—¶é—´ï¼Œæœ€é‡è¦çš„æ˜¯è¦ç†è§£è¿™ä¸€ç§ Type Eraser çš„åŸºæœ¬åŸç†å’Œå®ç°ï¼Œ è¸©è¸©å‘ï¼Œæ›´èƒ½åŠ æ·±å°è±¡ğŸ¥² ä¸è¿‡ Swift 5.7 æœ‰äº† any å…³é”®å­—ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½å–ä»£æ‰ Type Eraserï¼ŒæœŸå¾…ä¸€ä¸‹ Swift 6ã€‚","link":"/type-erasure-in-swift-2/"},{"title":"ç†è§£å‡½æ•°ä¸­çš„æ³›å‹ &amp; æ³›å‹çº¦æŸ â€”â€” ç©¶ç«Ÿè°æ‰æ˜¯å…¥å£ï¼Ÿ","text":"ç»§ç»­æ¥ä¸Šç¯‡ï¼Œåšå®Œ AnyMyCollection ä¹‹åï¼Œ æˆ‘åˆæ·»åŠ äº†ä¸€ä¸ªæ‰©å±•æ¥ä¿®æ”¹ CustomCollection åœ¨ç‰¹å®šç±»å‹ä¸‹çš„è¡Œä¸ºï¼š 12345extension CustomCollection where Element == Int { func allValues() -&gt; [Element] { [4, 5, 6] }} å½“ Element æ˜¯ Int æ—¶ï¼Œä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œç›´æ¥è¿”å› [4, 5, 6] ä½†æ˜¯ï¼Œè¿è¡Œæ˜¯å‘ç°äº†è¿™æ ·çš„ç°è±¡ï¼š 12345let collection = CustomCollection(1, 2, 3)print(collection.allValues()) // [4, 5, 6]let any = AnyMyCollection(collection)print(any.allValues()) // [1, 2, 3] åŒä¸€ä¸ªä¸œè¥¿ï¼Œæ“¦é™¤ç±»å‹ä¹‹åå°±ä¸å— Element == Int çº¦æŸäº†å˜›ï¼Ÿä¸æ˜¯ å†™äº†ä¸€ä¸ªæœ€å°å¯å¤ç°é—®é¢˜çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š 1234567let collection = CustomCollection(1, 2, 3)func genericFuntion&lt;C: MyCollection&gt;(_ base: C) { print(base.allValues()) // [1, 2, 3]}genericFuntion(collection) é‡æ–°æ¥çœ‹è¿™ä¸ªå‡½æ•°ï¼Œ base æ˜¯ä¸€ä¸ªç¬¦åˆ MyCollection åè®®çš„ç±»å‹ï¼Œ ä»ç¨‹åºçš„è§’åº¦çœ‹ï¼Œè°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå®ƒä¼šå»æ‰¾ä¸€ä¸ªå…¥å£ï¼Œ åœ¨è¿™é‡Œï¼Œå…¥å£å°±åº”è¯¥æ˜¯è®© CustomCollection ç¬¦åˆåè®®çš„é‚£ä¸ª allValues()ï¼Œ è€Œ Element == Int çº¦æŸåˆ™å¯ä»¥ç†è§£ä¸ºï¼Œå½“ç¬¦åˆæ¡ä»¶æ—¶ï¼Œå¯¹ allValues() è¿›è¡Œé‡å†™ï¼Œ è¿™é‡ŒçœŸæ­£è®© CustomCollection ç¬¦åˆ MyCollection çš„æ˜¯ä¸å—çº¦æŸçš„é‚£ä¸ªæ‰©å±•ä¸­çš„æ–¹æ³•ã€‚ ä»”ç»†ä¸€æƒ³ï¼Œè²Œä¼¼å®é™…æ“ä½œä¸­è²Œä¼¼ä¸ä¼šè¿™æ ·â€œé‡å†™â€å‡½æ•°ï¼Œ è€Œæ˜¯ä¼šå¯¹ä¸€äº›ç‰¹å®šçš„ç±»å‹å¢åŠ ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œ æ¯”å¦‚ï¼šå¯¹äºç±»å‹æ˜¯ Int çš„ Array å¢åŠ æ±‚å¹³å‡å€¼çš„å‡½æ•°ç­‰ç­‰ã€‚","link":"/generic-type-function-entry-point/"}],"tags":[{"name":"bug","slug":"bug","link":"/tags/bug/"},{"name":"watchOS","slug":"watchOS","link":"/tags/watchOS/"},{"name":"Apple Watch","slug":"Apple-Watch","link":"/tags/Apple-Watch/"},{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","link":"/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","link":"/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"},{"name":"Cè¯­è¨€","slug":"Cè¯­è¨€","link":"/tags/C%E8%AF%AD%E8%A8%80/"},{"name":"å†™ä»£ç ","slug":"å†™ä»£ç ","link":"/tags/%E5%86%99%E4%BB%A3%E7%A0%81/"},{"name":"CDN","slug":"CDN","link":"/tags/CDN/"},{"name":"JS","slug":"JS","link":"/tags/JS/"},{"name":"Web","slug":"Web","link":"/tags/Web/"},{"name":"Swift","slug":"Swift","link":"/tags/Swift/"},{"name":"ä»£ç è°ƒä¼˜","slug":"ä»£ç è°ƒä¼˜","link":"/tags/%E4%BB%A3%E7%A0%81%E8%B0%83%E4%BC%98/"},{"name":"IPå®šä½","slug":"IPå®šä½","link":"/tags/IP%E5%AE%9A%E4%BD%8D/"},{"name":"Leancloud","slug":"Leancloud","link":"/tags/Leancloud/"},{"name":"Sandbox","slug":"Sandbox","link":"/tags/Sandbox/"},{"name":"macOS","slug":"macOS","link":"/tags/macOS/"},{"name":"Concurrency","slug":"Concurrency","link":"/tags/Concurrency/"},{"name":"SwiftUI","slug":"SwiftUI","link":"/tags/SwiftUI/"},{"name":"Apple Store","slug":"Apple-Store","link":"/tags/Apple-Store/"},{"name":"Macbook Pro","slug":"Macbook-Pro","link":"/tags/Macbook-Pro/"},{"name":"æ³›å‹","slug":"æ³›å‹","link":"/tags/%E6%B3%9B%E5%9E%8B/"},{"name":"ç±»å‹æ“¦é™¤","slug":"ç±»å‹æ“¦é™¤","link":"/tags/%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4/"}],"categories":[{"name":"åä¸ªæ§½","slug":"åä¸ªæ§½","link":"/categories/%E5%90%90%E4%B8%AA%E6%A7%BD/"},{"name":"å­¦ä¸ªä¹ ","slug":"å­¦ä¸ªä¹ ","link":"/categories/%E5%AD%A6%E4%B8%AA%E4%B9%A0/"},{"name":"çæŠ˜è…¾","slug":"çæŠ˜è…¾","link":"/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/"},{"name":"æ’¸ä»£ç ","slug":"æ’¸ä»£ç ","link":"/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"}],"pages":[{"title":"","text":"404 - å•Šå“¦ï¼Œå‡ºé”™äº† ä½ æ‰€è®¿é—®çš„èµ„æºä¸å­˜åœ¨ï¼Œè¯¥èµ„æºå¯èƒ½è¢«ä¿®æ”¹äº†è·¯å¾„æˆ–è¢«åˆ é™¤ ç½‘ç«™ä»åœ¨å»ºè®¾ä¸­ï¼ æœ‰ä¸€ç¯‡æ–‡ç« çš„é“¾æ¥æœ‰å˜åŠ¨ï¼š å°±çˆ±åœ¨ç½‘ä¸ŠBBï¼ŸIPç›´æ¥æ‹¿æä½  ä½ å¯ä»¥å°è¯•ä¸‹åˆ—æ–¹æ³•ï¼š æ£€æŸ¥é“¾æ¥ å·²çŸ¥çš„é—®é¢˜ ç»™æˆ‘åé¦ˆ å¯¹äºæ‰‹åŠ¨è¾“å…¥é“¾æ¥çš„è¯»è€…ï¼šè¯·å…ˆè‡ªè¡Œæ£€æŸ¥é“¾æ¥æ˜¯å¦æ­£ç¡®ï¼Œæœ‰æ— æ‹¼å†™é”™è¯¯ç­‰â€¦ å¯¹äºç‚¹å‡»æŒ‰é’®è·³è½¬çš„è¯»è€…ï¼šè¯·è¿›å…¥ä¸‹ä¸€æ¿å—ã€‚ ç›¸å†Œï¼š/photos æœ‰ä¸€ç¯‡æ–‡ç« çš„é“¾æ¥æœ‰å˜åŠ¨ï¼š å°±çˆ±åœ¨ç½‘ä¸ŠBBï¼ŸIPç›´æ¥æ‹¿æä½  å…ˆæ£€æŸ¥å‰å‡ é¡¹æ˜¯å¦èƒ½å¤Ÿè§£å†³é—®é¢˜ï¼Œåˆ«ç›´æ¥å°±åé¦ˆå“¦ï¼ğŸ˜‚ å¦‚æœéƒ½ä¸è¡Œè¯·å¤åˆ¶è¯¥é¡µé¢çš„é“¾æ¥ ç»™æˆ‘åé¦ˆã€‚ è¯·ä¸€å®šè¦æŒ‰ç…§æ¨¡ç‰ˆå†™ï¼Œä¸ç„¶å°±ä½œåºŸã€‚ æ­£åœ¨æŒç»­æ”¹è¿›ä¸­ï¼š2022.10.11 åšå®¢å†…çš„å›¾ç‰‡æ”¹ä¸ºç›´é“¾ï¼Œä¹‹å‰çš„è²Œä¼¼è¿˜æ˜¯ä¸è¡Œï¼Œå“.. 2022.10.5 å¢åŠ æœ¬é¡µé¢çš„ã€Œæœ€è¿‘æ›´æ–°ã€æ¿å— ä¿®æ”¹äº†å­—ä½“ã€æ ·å¼ã€è„šæœ¬çš„ CDNï¼Œå°±æ˜¯è¯´ ç½‘é¡µåŠ è½½å˜å¿«äº† åšå®¢å†…çš„å›¾ç‰‡æ”¹ç”¨ jsDelivr é•œåƒç«™ï¼ï¼ˆGitHub issueé‡Œçš„å¤§ä½¬ç»™çš„ï¼ï¼‰ 2022.10.4 ä¿®å¤ cdn å¯¼è‡´çš„å›½å†…èµ„æºåŠ è½½å¤±è´¥é—®é¢˜ï¼ˆ#ç›¸å…³æ–‡ç« ï¼‰ æ–°å¢æœ¬é¡µé¢","link":"/404.html"},{"title":"å…³äºæˆ‘","text":"æˆ‘æ˜¯iKunå…¨æ°‘åˆ¶ä½œäººä»¬å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç»ƒä¹ æ—¶é•¿ä¸¤å¹´åŠçš„ä¸ªäººç»ƒä¹ ç”Ÿ â€”â€” ikun å–œæ¬¢å”±ã€è·³ã€rapã€ç¯®çƒï¼ˆmusic~) ğŸ”ä½ å¤ªç¾ï½ å“ˆå“ˆï¼Œæˆ‘æ˜¯çœŸ iKunï¼Œåˆ«è¢«æ°”å­•å“¦ï½ è¨€å½’æ­£ä¼ ã€‚ è®¤çœŸçš„æˆ‘æ˜¯ä¸€åå¤§å­¦ç”Ÿï¼Œå°±è¯»äºSUEPã€‚ å¾ˆé«˜å…´ä½ èƒ½æ¥è®¿é—®æˆ‘çš„åšå®¢ï¼ï¼ åœ¨è¿™é‡Œï¼Œæˆ‘ä¼šåˆ†äº«è‡ªå·±çš„æ—¥å¸¸ã€çæŠ˜è…¾çš„ç»å†ç­‰ç­‰â€¦ çˆ±å¥½æ˜¯æ•°ç ã€ç§‘æŠ€ã€å†™äº›ä»£ç å•¥çš„ åšå®¢æ—¶é—´çº¿è¿™æ˜¯æˆ‘ç¬¬äºŒæ¬¡ä½¿ç”¨åšå®¢ï¼Œä¹‹å‰å› ä¸ºå­¦ä¸šå…³ç³»å’ŒåŸŸååˆ°æœŸå°±åˆ åº“è·‘è·¯äº†ï¼Œ æœ€è¿‘åˆæƒ³ç€åšåšåšå®¢è®°å½•ä¸‹å‘ç”Ÿçš„äº‹æƒ…ï¼Œåæ­£è§‰å¾—è‡ªå·±éœ€è¦ä¸€äº›åæ€å’Œæ€»ç»“ï¼Œ æˆ–è®¸ä»¥åèƒ½ç”¨åˆ°å‘¢ï½ è¿˜æ˜¯é€‰äº†è‡ªå·±å–œæ¬¢çš„ hexo/icarus ä¸»é¢˜ï¼Œ åç»­ä¹Ÿä¼šå¯¹è¿™ä¸ªä¸»é¢˜è¿›è¡Œä¸€äº›æ”¹é€ ï¼Œè®©ç½‘é¡µä½“éªŒæ›´å¥½ ä¸æ‰“æ¸¸æˆæˆ‘å¯¹æ¸¸æˆæ²¡æœ‰å…´è¶£ã€‚ çˆ±æ’¸ä»£ç é«˜è€ƒå®Œæ”¾å‡ä»£ç å†™åˆ°çˆ½ï¼ é«˜è€ƒå®ŒåŸºäº apple/swift-markdown åšäº†ä¸ª SwiftUI çš„ç»„ä»¶ å¼€æºåœ°å€åœ¨è¿™ï¼šLiYanan2004/MarkdownView æ¬¢è¿å¤§å®¶æ¥ç‚¹ç‚¹ Star å“¦ï¼ï¼","link":"/about.html"},{"title":"ç•™è¨€æ¿","text":"æ¥éƒ½æ¥äº†ï¼Œè¯´ä¸¤å¥å‘—ğŸ˜","link":"/messages.html"}]}