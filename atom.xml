<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>LiYanan2004 - æˆ‘çš„åšå®¢</title>
  
  <subtitle>@LiYanan2004</subtitle>
  <link href="https://liyanan2004.github.io/atom.xml" rel="self"/>
  
  <link href="https://liyanan2004.github.io/"/>
  <updated>2023-05-01T14:07:51.806Z</updated>
  <id>https://liyanan2004.github.io/</id>
  
  <author>
    <name>LiYanan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç”¨ Apple Script æ‰“å¼€ä»»åŠ¡æ èœå•</title>
    <link href="https://liyanan2004.github.io/open-menu-bar-extra-with-apple-script/"/>
    <id>https://liyanan2004.github.io/open-menu-bar-extra-with-apple-script/</id>
    <published>2023-05-01T13:50:45.901Z</published>
    <updated>2023-05-01T14:07:51.806Z</updated>
    
    <content type="html"><![CDATA[<p>ï¼ˆæœ¬æ–‡å¤§éƒ¨åˆ†ä¸º ChatGPT ç”Ÿæˆï¼‰</p><p>å¦‚æœä½ æ˜¯ä¸€ä¸ªè‹¹æœç”µè„‘çš„ç”¨æˆ·ï¼Œä½ å¯èƒ½å·²ç»ä¹ æƒ¯äº†ä½¿ç”¨ä»»åŠ¡æ èœå•æ¥å¿«é€Ÿåœ°æ‰“å¼€åº”ç”¨ç¨‹åºå’Œæ‰§è¡Œå…¶ä»–çš„ä»»åŠ¡ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å€™ä½ å¯èƒ½ä¼šæ„Ÿåˆ°å¾ˆç¹çï¼Œå› ä¸ºæ¯æ¬¡æ‰“å¼€ä»»åŠ¡æ èœå•éƒ½éœ€è¦é€šè¿‡é¼ æ ‡ç‚¹å‡»æ¥å®Œæˆã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½ä¸çŸ¥é“çš„æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨Apple Scriptæ¥æ‰“å¼€ä»»åŠ¡æ èœå•ï¼Œå¹¶ä»¥æ›´å¿«çš„æ–¹å¼è®¿é—®å®ƒã€‚</p><p>Apple Script æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–å’Œæ§åˆ¶Macç”µè„‘ä¸­çš„å„ç§æ“ä½œã€‚ä½¿ç”¨Apple Scriptï¼Œä½ å¯ä»¥ç¼–å†™è„šæœ¬æ¥æ‰§è¡Œå„ç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ‰“å¼€åº”ç”¨ç¨‹åºã€å‘é€ç”µå­é‚®ä»¶ã€è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹ç­‰ç­‰ã€‚</p><span id="more"></span><h2 id="ç³»ç»Ÿçº§èœå•"><a href="#ç³»ç»Ÿçº§èœå•" class="headerlink" title="ç³»ç»Ÿçº§èœå•"></a>ç³»ç»Ÿçº§èœå•</h2><p>æ‰“å¼€ä»»åŠ¡æ èœå•æ˜¯Apple Scriptçš„ä¸€é¡¹åŸºæœ¬æ“ä½œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹è„šæœ¬ï¼Œç”¨äºæ‰“å¼€ä»»åŠ¡æ èœå•ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">tell</span> <span class="built_in">application</span> <span class="string">&quot;System Events&quot;</span></span><br><span class="line">    <span class="keyword">tell</span> process <span class="string">&quot;SystemUIServer&quot;</span></span><br><span class="line">        click (menu bar <span class="built_in">item</span> <span class="number">1</span> <span class="keyword">of</span> menu bar <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">tell</span></span><br><span class="line"><span class="keyword">end</span> <span class="keyword">tell</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªè„šæœ¬ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Apple Scriptçš„ tell è¯­å¥ï¼Œå®ƒå…è®¸æˆ‘ä»¬æ§åˆ¶ä¸åŒçš„åº”ç”¨ç¨‹åºå’Œè¿›ç¨‹ã€‚æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ tell è¯­å¥å‘Šè¯‰Apple Scriptè¦æ§åˆ¶çš„åº”ç”¨ç¨‹åºæ˜¯â€œSystem Eventsâ€ã€‚ç„¶åï¼Œæˆ‘ä»¬å†æ¬¡ä½¿ç”¨ tell è¯­å¥å‘Šè¯‰Apple Scriptè¦æ§åˆ¶çš„è¿›ç¨‹æ˜¯â€œSystemUIServerâ€ï¼Œè¿™æ˜¯è´Ÿè´£ä»»åŠ¡æ èœå•çš„è¿›ç¨‹ã€‚</p><p>åœ¨æœ€åä¸€è¡Œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† click å‘½ä»¤æ¥æ¨¡æ‹Ÿç‚¹å‡»ä»»åŠ¡æ èœå•ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† menu bar item 1 of menu bar 1 è¿™ä¸ªå‘½ä»¤æ¥å®šä½ä»»åŠ¡æ èœå•çš„ä½ç½®ï¼Œå¹¶å°†å…¶ä½œä¸º click å‘½ä»¤çš„å‚æ•°ã€‚</p><p>è¦è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œä½ å¯ä»¥å°†å…¶ä¿å­˜åˆ°è„šæœ¬ç¼–è¾‘å™¨ä¸­ï¼Œå¹¶ç‚¹å‡»è¿è¡ŒæŒ‰é’®ã€‚å½“è„šæœ¬è¿è¡Œæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰“å¼€ä»»åŠ¡æ èœå•ï¼Œè®©ä½ å¿«é€Ÿè®¿é—®ä½ éœ€è¦çš„åº”ç”¨ç¨‹åºå’ŒåŠŸèƒ½ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œä½¿ç”¨Apple Scriptæ¥æ‰“å¼€ä»»åŠ¡æ èœå•æ˜¯ä¸€ä¸ªç®€å•è€Œæœ‰æ•ˆçš„æ–¹æ³•ï¼Œå¯ä»¥å¤§å¤§æé«˜ä½ çš„å·¥ä½œæ•ˆç‡ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªè‹¹æœç”µè„‘çš„ç”¨æˆ·ï¼Œä¸å¦¨å°è¯•ä½¿ç”¨è¿™ä¸ªè„šæœ¬æ¥è‡ªåŠ¨åŒ–ä½ çš„æ—¥å¸¸æ“ä½œã€‚</p><p>ï¼ˆä»¥ä¸Šæ˜¯ AI ç”Ÿæˆï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘æ¥è¡¥å……ï¼‰</p><h2 id="ç¬¬ä¸‰æ–¹-App"><a href="#ç¬¬ä¸‰æ–¹-App" class="headerlink" title="ç¬¬ä¸‰æ–¹ App"></a>ç¬¬ä¸‰æ–¹ App</h2><p>å¦‚æœä½ çš„ç³»ç»Ÿæ˜¯ macOS Venturaï¼ˆå…¶ä»–ç³»ç»Ÿçš„ä½ å¯ä»¥å°è¯•ä¸€ä¸‹ï¼‰ï¼Œé‚£ä¹ˆ <code>tell process &quot;SystemUIServer&quot;</code> åªèƒ½è·å–åˆ°ç±»ä¼¼ Siri è¿™ç§çš„ç³»ç»Ÿè¿›ç¨‹ï¼Œ</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„ç›®æ ‡è¿œä¸æ­¢å¦‚æ­¤ã€‚</p><p>æƒ³è¦æ§åˆ¶ç¬¬ä¸‰æ–¹appï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹ä»£ç ï¼ˆä»£ç ç”± ChatGPT ç”Ÿæˆï¼Œå¹¶ä¸”å®æµ‹å¯ä»¥å®ç°æˆ‘ä»¬çš„ç›®æ ‡ï¼‰ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">tell</span> <span class="built_in">application</span> <span class="string">&quot;System Events&quot;</span></span><br><span class="line">    <span class="keyword">tell</span> process <span class="string">&quot;APPåç§°&quot;</span></span><br><span class="line">        click menu bar <span class="built_in">item</span> <span class="number">1</span> <span class="keyword">of</span> menu bar <span class="number">2</span></span><br><span class="line">        <span class="comment">-- ç‚¹å‡»ç¬¬ä¸€ä¸ªèœå•é¡¹</span></span><br><span class="line">        click menu <span class="built_in">item</span> <span class="number">1</span> <span class="keyword">of</span> menu <span class="number">1</span> <span class="keyword">of</span> menu bar <span class="built_in">item</span> <span class="number">1</span> <span class="keyword">of</span> menu bar <span class="number">2</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">tell</span></span><br><span class="line"><span class="keyword">end</span> <span class="keyword">tell</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œè®°å¾—å§ â€œAPPåç§°â€ æ”¹ä¸‹å³å¯</p><p>è¿™ä¸€éƒ¨åˆ†æˆ‘ç¡®å®æ˜¯ä¸å¤ªä¼šï¼Œé—®çš„ ChatGPTï¼Œå®ƒçœŸçš„èƒ½ç»™æˆ‘æ­£ç¡®çš„ç­”æ¡ˆğŸ˜±</p></blockquote><p>ç†è®ºä¸Šå¦‚æœ App æ˜¯åŸç”Ÿå®ç°çš„ï¼ˆAppKitï¼ŒSwiftUIï¼ŒCatalyst è¿™ç§ï¼‰ï¼Œéƒ½èƒ½ç”¨ Apple Script æ§åˆ¶ï¼Œ</p><p>å¯ä»¥ç”¨ <code>entire contents</code> æ¥æ‰“å°å‡ºæ‰€æœ‰çš„å†…å®¹ï¼Œç„¶åé€ä¸€æŸ¥æ‰¾ï¼Œ</p><p>ç½‘é¡µå¥—å£³çš„ï¼ˆåŸºäº Electron æ¡†æ¶ï¼Œä¾‹å¦‚ï¼šæ–°ç‰ˆQQï¼ŒæŠ–éŸ³ï¼ŒBç«™è¿™ç§ï¼‰å°±ç®—äº†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ï¼ˆæœ¬æ–‡å¤§éƒ¨åˆ†ä¸º ChatGPT ç”Ÿæˆï¼‰&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æ˜¯ä¸€ä¸ªè‹¹æœç”µè„‘çš„ç”¨æˆ·ï¼Œä½ å¯èƒ½å·²ç»ä¹ æƒ¯äº†ä½¿ç”¨ä»»åŠ¡æ èœå•æ¥å¿«é€Ÿåœ°æ‰“å¼€åº”ç”¨ç¨‹åºå’Œæ‰§è¡Œå…¶ä»–çš„ä»»åŠ¡ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å€™ä½ å¯èƒ½ä¼šæ„Ÿåˆ°å¾ˆç¹çï¼Œå› ä¸ºæ¯æ¬¡æ‰“å¼€ä»»åŠ¡æ èœå•éƒ½éœ€è¦é€šè¿‡é¼ æ ‡ç‚¹å‡»æ¥å®Œæˆã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½ä¸çŸ¥é“çš„æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨Apple Scriptæ¥æ‰“å¼€ä»»åŠ¡æ èœå•ï¼Œå¹¶ä»¥æ›´å¿«çš„æ–¹å¼è®¿é—®å®ƒã€‚&lt;/p&gt;
&lt;p&gt;Apple Script æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–å’Œæ§åˆ¶Macç”µè„‘ä¸­çš„å„ç§æ“ä½œã€‚ä½¿ç”¨Apple Scriptï¼Œä½ å¯ä»¥ç¼–å†™è„šæœ¬æ¥æ‰§è¡Œå„ç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ‰“å¼€åº”ç”¨ç¨‹åºã€å‘é€ç”µå­é‚®ä»¶ã€è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹ç­‰ç­‰ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="çæŠ˜è…¾" scheme="https://liyanan2004.github.io/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="Apple Script" scheme="https://liyanan2004.github.io/tags/Apple-Script/"/>
    
  </entry>
  
  <entry>
    <title>WWDC 23 Swift Student Challenge</title>
    <link href="https://liyanan2004.github.io/wwdc-23-swift-student-challenge/"/>
    <id>https://liyanan2004.github.io/wwdc-23-swift-student-challenge/</id>
    <published>2023-04-15T14:14:29.269Z</published>
    <updated>2023-04-23T04:28:35.299Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰å¹¸åœ¨é«˜ä¸­å°±å‚ä¸è¿‡ WWDC 20 çš„ SSCï¼Œå¯æƒœå½“æ—¶è¯¾ä½™æ—¶é—´å¹¶ä¸å……è£•å¯¼è‡´ä½œå“çš„è´¨é‡å¹¶ä¸ç†æƒ³ï¼Œ</p><p>å¦‚ä»Šï¼Œå†æˆ˜ WWDC 23 SSC ğŸ˜‹</p><span id="more"></span><p>è¯åˆè¯´å›æ¥ï¼Œè¦ä¸æ˜¯å®˜ç½‘å®£å¸ƒ WWDC 23 çš„æ—¶é—´å¹¶å‘å¸ƒäº† SSC æ´»åŠ¨ï¼Œæˆ‘éƒ½å·®ç‚¹å¿˜è®°äº†ğŸ˜‚</p><p>ä½†æ˜¯ï¼Œæˆ‘å·²ä¸æ˜¯ä¸‰å¹´å‰çš„æˆ‘ï¼Œè¿™æ¬¡çš„åˆ¶ä½œå‘¨æœŸéå¸¸ç´§å‡‘ï¼Œä¹Ÿæ¯”è¾ƒé¡ºåˆ©ï¼ŒåŒæ—¶ï¼Œç›¸å¯¹æ¥è¯´ä¹Ÿæ¯”è¾ƒæ»¡æ„ã€‚</p><h2 id="æ—¶å…‰å€’æµï¼ˆ3æœˆ30æ—¥ï¼‰"><a href="#æ—¶å…‰å€’æµï¼ˆ3æœˆ30æ—¥ï¼‰" class="headerlink" title="æ—¶å…‰å€’æµï¼ˆ3æœˆ30æ—¥ï¼‰"></a>æ—¶å…‰å€’æµï¼ˆ3æœˆ30æ—¥ï¼‰</h2><p>æ—©æ™¨èµ·æ¥ï¼Œç„äº†ä¸€çœ¼æ‰‹è¡¨ï¼Œæˆ‘å»â€¦WWDC 23 å®šæ¡£äº†ï¼ï¼</p><p>éå¸¸æ¿€åŠ¨ï¼Œä¹Ÿå¾ˆå¼€å¿ƒï¼ˆå®Œå…¨ä¸è®°å¾—æœ‰ SSCï¼‰ï¼Œç‚¹å¼€å®˜ç½‘ï¼Œä¹ æƒ¯æ€§åœ°ç¿»äº†ç¿»ï¼Œ</p><p>è¯¶ï¼ŒSSCï¼ï¼ï¼è¿˜æ²¡å‡†å¤‡æ€ä¹ˆåŠï¼Ÿï¼ˆæˆ‘é¡¿æ—¶æ„£ä½äº†ï¼Œç«‹é©¬å¼€å§‹æ‰¾çµæ„Ÿï¼‰</p><p>å¾ˆå¿«å•Šï¼Œæœ‰çµæ„Ÿäº†ï¼ï¼ğŸ¤­</p><blockquote><p>ä»¥ä¸Šéƒ½æ˜¯åºŸè¯ï¼Œä½ å¯ä»¥ä¸çœ‹ï¼ˆå¥½åƒè¯´çš„æœ‰ç‚¹æ™šäº†ğŸ˜‚ï¼‰</p></blockquote><h2 id="çµæ„Ÿ"><a href="#çµæ„Ÿ" class="headerlink" title="çµæ„Ÿ"></a>çµæ„Ÿ</h2><p>SSC æ˜¯è®©å­¦ç”Ÿçˆ±å¥½è€…ä»¬ä½¿ç”¨æå…·åˆ›æ–°çš„æ–¹æ³•æ¥å±•ç°è‡ªå·±çš„ ideasï¼Œ</p><p>ä½¿ç”¨ Playgrounds æäº¤ä½œå“ï¼Œæ”¯æŒè¾ƒæ–°çš„ SDKï¼Œå› æ­¤ä½¿ç”¨æ–°çš„æ¡†æ¶ä¹Ÿèƒ½ä½“ç°å‡ºå¯¹å¼€å‘å›¢é˜Ÿçš„æ”¯æŒï¼ˆæ²¹ç®¡ä¸Šå¬æ¥çš„ï¼‰</p><p>é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯ <code>Swift Charts</code>ã€‚</p><p>å›¾è¡¨å¯ä»¥ç”¨åœ¨æ•°æ®å¯è§†åŒ–ï¼Œä½†æ˜¯å“ªæ¥é‚£ä¹ˆå¤šçš„æ•°æ®å‘¢ï¼Ÿå¹¶ä¸”æ‰€æœ‰çš„æ ¸å¿ƒè¦ç‚¹è¦åœ¨ä¸‰åˆ†é’Ÿä¹‹å†…è¢«å±•ç°å‡ºæ¥ã€‚</p><p>æˆ‘çªç„¶æƒ³èµ·äº†é«˜æ•°ä¸­çš„ã€Œæ³°å‹’å±•å¼€å¼ã€ï¼Œæ— é™è¶‹è¿‘çš„æ¦‚å¿µå¯ä»¥éå¸¸è½»æ¾çš„é€šè¿‡å›¾è¡¨çš„å¯è§†åŒ–æ¥å±•ç°ã€‚</p><p>åˆæƒ³èµ·äº†ä¸Šå­¦æœŸ C è¯­è¨€è¯¾ç¨‹ä¸­è®©æˆ‘ä»¬å®ç° Ï€ çš„è®¡ç®—ã€‚</p><p>å› æ­¤ï¼Œæœ¬æ¬¡ SSC çš„ä¸»é¢˜å°±å®šä¸ºäº†ã€Œä½¿ç”¨ Swift Charts æ¥å±•ç° Ï€ çš„è®¡ç®—è¿‡ç¨‹ã€ï¼Œåˆ©ç”¨å›¾è¡¨å¯è§†åŒ–å±•ç°å‡ºæ— é™è¶‹è¿‘çš„æ¦‚å¿µã€‚</p><h2 id="Playground-è®¾è®¡"><a href="#Playground-è®¾è®¡" class="headerlink" title="Playground è®¾è®¡"></a>Playground è®¾è®¡</h2><p>æˆ‘å¸Œæœ›å‘å„ä½è¯„å§”å±•ç°å‡ºæˆ‘â€œé«˜è¶…â€çš„ SwiftUI æœ¬é¢†ï¼Œä»å¸ƒå±€åˆ°ç¥å¥‡ç§»åŠ¨ï¼Œå†åˆ°åˆ›æ–°çš„äº¤äº’ï¼Œæœ€ååˆ°åŠ¨ç”»è®¾è®¡ä¸æ§åˆ¶ã€‚</p><p>æˆ‘ä¸ä»…å¸Œæœ›æˆ‘çš„å†…å®¹èƒ½å¤Ÿå¸å¼•è¯„å§”ï¼Œä¹Ÿå¸Œæœ›æˆ‘åˆ¶ä½œçš„åŠ¨ç”»èƒ½å¤Ÿè®©è¯„å§”ä»¬æ„Ÿå—åˆ°æˆ‘å¯¹ SwiftUI çš„çƒ­çˆ±ã€‚</p><p>å› æ­¤ï¼Œæˆ‘è®¾è®¡äº†6ä¸ªåˆ†é¡µã€‚</p><ol><li>æ¬¢è¿é¡µï¼šå±•ç¤º Playground çš„ä¸»é¢˜ã€åŠ¨æ€å›¾æ ‡</li></ol><p><img src="/img/wwdc-23-swift-student-challenge/welcome-page.jpeg"></p><ol start="2"><li>ç›®å½•é¡µï¼šå±•ç¤ºç¥å¥‡ç§»åŠ¨æ•ˆæœï¼ˆæœ‰ç‚¹ä¸ºäº†ç¥å¥‡ç§»åŠ¨è€Œç¥å¥‡ç§»åŠ¨çš„æ„Ÿè§‰ğŸ¤”ï¼‰</li></ol><p><img src="/img/wwdc-23-swift-student-challenge/toc-page.jpeg"></p><ol start="3"><li>ç®€å•æ€è€ƒé¡µï¼šå±•ç¤ºåˆ›æ–°ç‚¹ï¼šåˆ®åˆ®å¡</li></ol><p><img src="/img/wwdc-23-swift-student-challenge/ques-page.jpeg"></p><ol start="4"><li>åŸç†å±•ç¤ºé¡µï¼šå±•ç¤ºæ ¸å¿ƒè¦ç‚¹ï¼ŒSwift Chartsã€åŠ¨ç”»æ§åˆ¶</li></ol><p><img src="/img/wwdc-23-swift-student-challenge/demestify-page.jpeg"></p><ol start="5"><li>å›é¡¾é¡µï¼šå¯å‘æ¥æºäºä¹‹å‰è·å¥–ä½œå“ï¼Œä¸ºäº†å’Œç»“æŸé¡µåŠ¨ç”»é…åˆã€‚</li></ol><p><img src="/img/wwdc-23-swift-student-challenge/quiz-page.jpeg"></p><ol start="6"><li>ç»“æŸé¡µï¼šå±•ç¤ºåŠ¨æ€å›¾æ ‡å’Œäº”å½©çº¸å±‘æ•ˆæœï¼ˆæ²¡é”™ï¼Œå°±æ˜¯ iMessage ä¸­çš„äº”å½©çº¸å±‘ï¼Œç”¨ Canvas å®Œç¾å¤åˆ»äº†ä¸€ä¸ªï¼‰</li></ol><p><img src="/img/wwdc-23-swift-student-challenge/end-page.jpeg"></p><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>å¦‚æœæœ€ç»ˆè·å¥–äº†ï¼ŒPlayground ä¸­æ‰€æœ‰çš„æºç æˆ‘ä¼šå¼€æºåœ¨ GitHubï¼š<a href="https://github.com/LiYanan2004/wwdc-23-ssc">WWDC 23 SSC</a></p><blockquote><p>5æœˆ10å·ä¹‹åé“¾æ¥è¿˜æ˜¾ç¤º 404ï¼Œå°±æ˜¯å¾ˆé—æ†¾æ²¡è·å¥–ï¼Œå†æ¥å†å‰ ğŸ¥¹</p></blockquote><p>äº”å½©çº¸å±‘æ•ˆæœæˆ‘åœ¨è¿‡å¹´é‚£ä¼šå„¿å°±å·²ç»å†™å¥½å¹¶æ”¾åœ¨ <a href="https://github.com/LiYanan2004/ColorfulPaper/">GitHub</a> å¼€æºäº†ï¼Œå¦‚æœä½ æœ‰å…´è¶£å¯ä»¥å»ç ”ç©¶ä¸‹å®ç°åŸç†ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ‰å¹¸åœ¨é«˜ä¸­å°±å‚ä¸è¿‡ WWDC 20 çš„ SSCï¼Œå¯æƒœå½“æ—¶è¯¾ä½™æ—¶é—´å¹¶ä¸å……è£•å¯¼è‡´ä½œå“çš„è´¨é‡å¹¶ä¸ç†æƒ³ï¼Œ&lt;/p&gt;
&lt;p&gt;å¦‚ä»Šï¼Œå†æˆ˜ WWDC 23 SSC ğŸ˜‹&lt;/p&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="SwiftUI" scheme="https://liyanan2004.github.io/tags/SwiftUI/"/>
    
    <category term="Swift Charts" scheme="https://liyanan2004.github.io/tags/Swift-Charts/"/>
    
    <category term="WWDC 23" scheme="https://liyanan2004.github.io/tags/WWDC-23/"/>
    
    <category term="Swift Student Challenge" scheme="https://liyanan2004.github.io/tags/Swift-Student-Challenge/"/>
    
  </entry>
  
  <entry>
    <title>Swift Charts å…¥é—¨ â€”â€” è®¤è¯†å„ç§æ ‡è®°</title>
    <link href="https://liyanan2004.github.io/swift-charts-intro-marks/"/>
    <id>https://liyanan2004.github.io/swift-charts-intro-marks/</id>
    <published>2023-04-06T08:51:31.495Z</published>
    <updated>2023-04-06T12:19:57.913Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å­¦ä¹ å’Œä½¿ç”¨ WWDC 22 ä¸Šå…¨æ–°çš„ Swift Chartsï¼Œ</p><p>Swift Charts ä½¿ç”¨ SwiftUI çš„å£°æ˜å¼è¯­æ³•ï¼Œç”¨äºåœ¨ SwiftUI ä¸­æ„å»ºå¯è§†åŒ–å›¾è¡¨ï¼Œä¾¿äºæ•°æ®çš„å¯è§†åŒ–åˆ†æã€‚</p><p>æœ¬æœŸåšå®¢å°†ä¸“æ³¨äº Swift Charts çš„æ ‡è®°å’Œç¬¦å·ã€‚</p><p><img src="/img/swift-charts/animated-charts.gif"></p><span id="more"></span><h2 id="å¼€å§‹åˆ›å»ºå›¾è¡¨"><a href="#å¼€å§‹åˆ›å»ºå›¾è¡¨" class="headerlink" title="å¼€å§‹åˆ›å»ºå›¾è¡¨"></a>å¼€å§‹åˆ›å»ºå›¾è¡¨</h2><p>åœ¨æ­£å¼å¼€å§‹åˆ›å»ºå›¾è¡¨ä¹‹å‰ï¼Œéœ€è¦å…ˆå»ºç«‹ä¸€ä¸ªå›¾è¡¨åŒºåŸŸã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Charts</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ChartView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Chart</span> &#123;</span><br><span class="line">            <span class="comment">// ... </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Marks éœ€è¦è¢«æ”¾ç½®åœ¨ Charts å†…ä½œä¸ºå…ƒç´ ã€‚</p><p>å½“æœ‰å¤šä¸ª Marks é‡å æ—¶ï¼Œå…¶è¡¨ç°å½¢å¼ç±»ä¼¼äº <code>ZStack</code>ã€‚</p><p>ä½ å¯ä»¥åœ¨åˆ›å»º Chart æ—¶ç›´æ¥å¯¼å…¥æ•°æ®ï¼Œä¹Ÿå¯ä»¥åœ¨ Chart å†…ä½¿ç”¨ <code>ForEach</code> æ¥å¯¼å…¥æ•°æ®ã€‚</p><h2 id="æ ‡è®°ï¼ˆMarkï¼‰"><a href="#æ ‡è®°ï¼ˆMarkï¼‰" class="headerlink" title="æ ‡è®°ï¼ˆMarkï¼‰"></a>æ ‡è®°ï¼ˆMarkï¼‰</h2><h3 id="LineMark"><a href="#LineMark" class="headerlink" title="LineMark"></a>LineMark</h3><p>å¤šä¸ªç‚¹è¿æˆä¸€æ¡çº¿ï¼Œç®€å•ç›´æ¥ã€‚</p><p><img src="/img/swift-charts/line-mark.png"></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> Charts</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SunshineChart</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Chart</span>(data, id: \.date) &#123;</span><br><span class="line">            <span class="type">LineMark</span>(</span><br><span class="line">                x: .value(<span class="string">&quot;Month&quot;</span>, <span class="variable">$0</span>.date),</span><br><span class="line">                y: .value(<span class="string">&quot;Hours of Sunshine&quot;</span>, <span class="variable">$0</span>.hoursOfSunshine)</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MonthlyHoursOfSunshine</span>: <span class="title class_">Hashable</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> date: <span class="type">Date</span></span><br><span class="line">    <span class="keyword">var</span> hoursOfSunshine: <span class="type">Double</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">month</span>: <span class="type">Int</span>, <span class="params">hoursOfSunshine</span>: <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> calendar <span class="operator">=</span> <span class="type">Calendar</span>.autoupdatingCurrent</span><br><span class="line">        <span class="keyword">self</span>.date <span class="operator">=</span> calendar.date(from: <span class="type">DateComponents</span>(year: <span class="number">2023</span>, month: month))<span class="operator">!</span></span><br><span class="line">        <span class="keyword">self</span>.hoursOfSunshine <span class="operator">=</span> hoursOfSunshine</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> data: [<span class="type">MonthlyHoursOfSunshine</span>] <span class="operator">=</span> [</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">1</span>, hoursOfSunshine: <span class="number">74</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">2</span>, hoursOfSunshine: <span class="number">99</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">3</span>, hoursOfSunshine: <span class="number">100</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">4</span>, hoursOfSunshine: <span class="number">110</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">5</span>, hoursOfSunshine: <span class="number">112</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">6</span>, hoursOfSunshine: <span class="number">125</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">7</span>, hoursOfSunshine: <span class="number">117</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">8</span>, hoursOfSunshine: <span class="number">112</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">9</span>, hoursOfSunshine: <span class="number">106</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">10</span>, hoursOfSunshine: <span class="number">102</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">11</span>, hoursOfSunshine: <span class="number">93</span>),</span><br><span class="line">    <span class="type">MonthlyHoursOfSunshine</span>(month: <span class="number">12</span>, hoursOfSunshine: <span class="number">78</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="BarMark"><a href="#BarMark" class="headerlink" title="BarMark"></a>BarMark</h3><p>æ¡çŠ¶å›¾ï¼Œå¯ä»¥å¾ˆæ¸…æ™°çš„å±•ç°å‡ºå„ä¸ªé¡¹ç›®çš„æ•°é‡å¤šå°‘ã€‚</p><p><img src="/img/swift-charts/bar-mark.png"></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> Charts</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Chart</span>(data, id: \.<span class="keyword">self</span>) &#123;</span><br><span class="line">            <span class="type">BarMark</span>(</span><br><span class="line">                x: .value(<span class="string">&quot;Department&quot;</span>, <span class="variable">$0</span>.department),</span><br><span class="line">                y: .value(<span class="string">&quot;Profit&quot;</span>, <span class="variable">$0</span>.profit)</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Profit</span>: <span class="title class_">Hashable</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> department: <span class="type">String</span></span><br><span class="line">    <span class="keyword">let</span> profit: <span class="type">Double</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> data: [<span class="type">Profit</span>] <span class="operator">=</span> [</span><br><span class="line">    <span class="type">Profit</span>(department: <span class="string">&quot;Production&quot;</span>, profit: <span class="number">15000</span>),</span><br><span class="line">    <span class="type">Profit</span>(department: <span class="string">&quot;Marketing&quot;</span>, profit: <span class="number">8000</span>),</span><br><span class="line">    <span class="type">Profit</span>(department: <span class="string">&quot;Finance&quot;</span>, profit: <span class="number">10000</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="PointMark"><a href="#PointMark" class="headerlink" title="PointMark"></a>PointMark</h3><p>ç‚¹æ ‡è®°ï¼Œç”¨äºæ ‡å®šå›¾æ ‡ä¸Šçš„æŸä¸€ä¸ªæˆ–ä¸€ç³»åˆ—ç‚¹ã€‚</p><p><img src="/img/swift-charts/point-mark.png"></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> Charts</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SunshineChart</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Chart</span>(data, id: \.date) &#123;</span><br><span class="line">            <span class="type">LineMark</span>(</span><br><span class="line">                x: .value(<span class="string">&quot;Month&quot;</span>, <span class="variable">$0</span>.date),</span><br><span class="line">                y: .value(<span class="string">&quot;Hours of Sunshine&quot;</span>, <span class="variable">$0</span>.hoursOfSunshine)</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            <span class="type">PointMark</span>(</span><br><span class="line">                x: .value(<span class="string">&quot;Month&quot;</span>, <span class="variable">$0</span>.date),</span><br><span class="line">                y: .value(<span class="string">&quot;Hours of Sunshine&quot;</span>, <span class="variable">$0</span>.hoursOfSunshine)</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// MonthlyHoursOfSunshine &amp; data å’Œ LineMark ä¸­çš„ä¸€è‡´ï¼Œå°±ä¸å†é‡å¤äº†</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// struct MonthlyHoursOfSunshine &#123; ... &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// let data = [ ... ]</span></span><br></pre></td></tr></table></figure><h3 id="RuleMark"><a href="#RuleMark" class="headerlink" title="RuleMark"></a>RuleMark</h3><p>åŸºå‡†æ ‡è®°ï¼Œå°±æ˜¯ä¸€æ¡çº¿ï¼Œå¯ä»¥ç›´è§‚çš„å±•ç°å‡ºä¾‹å¦‚å¹³å‡å€¼ã€æ³¢åŠ¨æƒ…å†µç­‰æ•°æ®ã€‚</p><p><img src="/img/swift-charts/rule-mark.png"></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> Charts</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Chart</span>(data, id: \.<span class="keyword">self</span>) &#123;</span><br><span class="line">            <span class="type">BarMark</span>(</span><br><span class="line">                x: .value(<span class="string">&quot;Department&quot;</span>, <span class="variable">$0</span>.department),</span><br><span class="line">                y: .value(<span class="string">&quot;Profit&quot;</span>, <span class="variable">$0</span>.profit)</span><br><span class="line">            )</span><br><span class="line">            .opacity(<span class="number">0.3</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="type">RuleMark</span>(y: .value(<span class="string">&quot;Average&quot;</span>, <span class="number">11000</span>))</span><br><span class="line">                .lineStyle(<span class="type">StrokeStyle</span>(lineWidth: <span class="number">3</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Profit &amp; data å’Œ BarMark ä¸­çš„ä¸€è‡´ï¼Œå°±ä¸å†é‡å¤äº†</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// struct Profit &#123; ... &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// let data = [ ... ]</span></span><br></pre></td></tr></table></figure><h3 id="RectangleMark"><a href="#RectangleMark" class="headerlink" title="RectangleMark"></a>RectangleMark</h3><p>ä¸ PointMark ç±»ä¼¼ï¼Œåªæ˜¯å½¢çŠ¶å˜æˆäº†çŸ©å½¢ã€‚</p><p>å½“ç„¶ï¼Œä»–ä¹Ÿå¯ä»¥è¢«ç”¨æ¥å±•ç¤ºä¸€ä¸ªåŒºåŸŸã€‚</p><p><img src="/img/swift-charts/rectangle-mark.png"></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> Charts</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ContentView</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Chart</span>(data, id: \.<span class="keyword">self</span>) &#123;</span><br><span class="line">            <span class="type">RectangleMark</span>(</span><br><span class="line">                xStart: .value(<span class="string">&quot;Rect Start Width&quot;</span>, <span class="variable">$0</span>.x <span class="operator">-</span> <span class="number">0.25</span>),</span><br><span class="line">                xEnd: .value(<span class="string">&quot;Rect End Width&quot;</span>, <span class="variable">$0</span>.x <span class="operator">+</span> <span class="number">0.25</span>),</span><br><span class="line">                yStart: .value(<span class="string">&quot;Rect Start Height&quot;</span>, <span class="variable">$0</span>.y <span class="operator">-</span> <span class="number">0.25</span>),</span><br><span class="line">                yEnd: .value(<span class="string">&quot;Rect End Height&quot;</span>, <span class="variable">$0</span>.y <span class="operator">+</span> <span class="number">0.25</span>)</span><br><span class="line">            )</span><br><span class="line">            .opacity(<span class="number">0.2</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="type">PointMark</span>(</span><br><span class="line">                x: .value(<span class="string">&quot;X&quot;</span>, <span class="variable">$0</span>.x),</span><br><span class="line">                y: .value(<span class="string">&quot;Y&quot;</span>, <span class="variable">$0</span>.y)</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Coord</span>: <span class="title class_">Hashable</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">var</span> y: <span class="type">Double</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data: [<span class="type">Coord</span>] <span class="operator">=</span> [</span><br><span class="line">    <span class="type">Coord</span>(x: <span class="number">5</span>, y: <span class="number">5</span>),</span><br><span class="line">    <span class="type">Coord</span>(x: <span class="number">2.5</span>, y: <span class="number">2.5</span>),</span><br><span class="line">    <span class="type">Coord</span>(x: <span class="number">3</span>, y: <span class="number">3</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="AreaMark"><a href="#AreaMark" class="headerlink" title="AreaMark"></a>AreaMark</h3><p>é€šè¿‡å¤šä¸ªç‚¹ç»„æˆçº¿ï¼Œå¹¶å¯¹å…¶åŒ…è£¹çš„åŒºåŸŸåšå¡«å……ï¼Œç”¨æ¥å±•ç¤ºæŸä¸€ä¸ªåŒºåŸŸã€‚</p><p>å¦‚æœæ˜¯ç®€å•çš„çŸ©å½¢åŒºåŸŸï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ RectangleMarkã€‚</p><blockquote><p>ä¾‹å¦‚ï¼šå¤©æ°”appä¸­ï¼Œæ¯å¤©çš„æœ€é«˜æ¸©ã€æœ€ä½æ¸©åŒºé—´ã€‚</p></blockquote><p><img src="/img/swift-charts/area-mark.png"></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> Charts</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">WeatherChart</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Chart</span>(data) &#123; day <span class="keyword">in</span></span><br><span class="line">            <span class="type">AreaMark</span>(</span><br><span class="line">                x: .value(<span class="string">&quot;Date&quot;</span>, day.date),</span><br><span class="line">                yStart: .value(<span class="string">&quot;Minimum Temperature&quot;</span>, day.minimumTemperature),</span><br><span class="line">                yEnd: .value(<span class="string">&quot;Maximum Temperature&quot;</span>, day.maximumTemperature)</span><br><span class="line">            )</span><br><span class="line">            .interpolationMethod(.catmullRom)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Weather</span>: <span class="title class_">Identifiable</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> date: <span class="type">Date</span></span><br><span class="line">    <span class="keyword">let</span> maximumTemperature: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">let</span> minimumTemperature: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">let</span> id: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> data <span class="operator">=</span> [</span><br><span class="line">    <span class="type">Weather</span>(date: .now, maximumTemperature: <span class="number">20</span>, minimumTemperature: <span class="number">10</span>, id: <span class="number">1</span>),</span><br><span class="line">    <span class="type">Weather</span>(date: .now.addingTimeInterval(<span class="number">24</span> <span class="operator">*</span> <span class="number">60</span> <span class="operator">*</span> <span class="number">60</span>), maximumTemperature: <span class="number">25</span>, minimumTemperature: <span class="number">13</span>, id: <span class="number">2</span>),</span><br><span class="line">    <span class="type">Weather</span>(date: .now.addingTimeInterval(<span class="number">2</span> <span class="operator">*</span> <span class="number">24</span> <span class="operator">*</span> <span class="number">60</span> <span class="operator">*</span> <span class="number">60</span>), maximumTemperature: <span class="number">23</span>, minimumTemperature: <span class="number">12</span>, id: <span class="number">3</span>),</span><br><span class="line">    <span class="type">Weather</span>(date: .now.addingTimeInterval(<span class="number">3</span> <span class="operator">*</span> <span class="number">24</span> <span class="operator">*</span> <span class="number">60</span> <span class="operator">*</span> <span class="number">60</span>), maximumTemperature: <span class="number">24</span>, minimumTemperature: <span class="number">13</span>, id: <span class="number">4</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="ç¬¦å·ï¼ˆSymbolï¼‰"><a href="#ç¬¦å·ï¼ˆSymbolï¼‰" class="headerlink" title="ç¬¦å·ï¼ˆSymbolï¼‰"></a>ç¬¦å·ï¼ˆSymbolï¼‰</h2><p>å¦‚æœæ¶‰åŠåˆ°å¤šæ ·æœ¬å¤„ç†ï¼Œä¾‹å¦‚ï¼šæ¯”è¾ƒå¤šä¸ªåŸå¸‚çš„æ°”æ¸©æ›²çº¿ï¼Œ</p><p>ä¸ºäº†è®©å›¾è¡¨çœ‹èµ·æ¥æ›´åŠ ç›´è§‚ï¼Œé€šå¸¸ä¼šä½¿ç”¨ä¸€äº›ç¬¦å·æˆ–è€…é¢œè‰²æ¥åšåŒºåˆ†ã€‚</p><p>æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p><h3 id="ä»¥é¢œè‰²åŒºåˆ†ï¼šforegroundStyle"><a href="#ä»¥é¢œè‰²åŒºåˆ†ï¼šforegroundStyle" class="headerlink" title="ä»¥é¢œè‰²åŒºåˆ†ï¼šforegroundStyle"></a>ä»¥é¢œè‰²åŒºåˆ†ï¼šforegroundStyle</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Chart</span>(data, id: \.date) &#123;</span><br><span class="line">    <span class="type">LineMark</span>(</span><br><span class="line">        x: .value(<span class="string">&quot;Month&quot;</span>, <span class="variable">$0</span>.date),</span><br><span class="line">        y: .value(<span class="string">&quot;Hours of Sunshine&quot;</span>, <span class="variable">$0</span>.hoursOfSunshine)</span><br><span class="line">    )</span><br><span class="line">    .foregroundStyle(.value(<span class="string">&quot;City&quot;</span>, <span class="variable">$0</span>.city))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»¥å½¢çŠ¶åŒºåˆ†ï¼šsymbol"><a href="#ä»¥å½¢çŠ¶åŒºåˆ†ï¼šsymbol" class="headerlink" title="ä»¥å½¢çŠ¶åŒºåˆ†ï¼šsymbol"></a>ä»¥å½¢çŠ¶åŒºåˆ†ï¼šsymbol</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Chart</span>(data, id: \.date) &#123;</span><br><span class="line">    <span class="type">LineMark</span>(</span><br><span class="line">        x: .value(<span class="string">&quot;Month&quot;</span>, <span class="variable">$0</span>.date),</span><br><span class="line">        y: .value(<span class="string">&quot;Hours of Sunshine&quot;</span>, <span class="variable">$0</span>.hoursOfSunshine)</span><br><span class="line">    )</span><br><span class="line">    .symbol(.value(<span class="string">&quot;City&quot;</span>, <span class="variable">$0</span>.city))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¹‹ååœ¨å›¾è¡¨å·¦ä¸‹è§’ä¼šå‡ºç° Legendï¼Œ</p><p><img src="/img/swift-charts/legend.png"></p><p>é€šè¿‡ä¸Šè¿°çš„ä¸¤ä¸ª modifiers ä¹Ÿå¯ä»¥è‡ªå®šä¹‰é¢œè‰²å’Œå½¢çŠ¶ï¼Œéƒ½ä¼šå±•ç¤ºåœ¨ Legend ä¸­ã€‚</p><p>å¦‚æœæƒ³éšè— Legendï¼Œå¯ä»¥ä½¿ç”¨ <code>.chartLegend(.hidden)</code></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘åœ¨å­¦ä¹ å’Œä½¿ç”¨ WWDC 22 ä¸Šå…¨æ–°çš„ Swift Chartsï¼Œ&lt;/p&gt;
&lt;p&gt;Swift Charts ä½¿ç”¨ SwiftUI çš„å£°æ˜å¼è¯­æ³•ï¼Œç”¨äºåœ¨ SwiftUI ä¸­æ„å»ºå¯è§†åŒ–å›¾è¡¨ï¼Œä¾¿äºæ•°æ®çš„å¯è§†åŒ–åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æœŸåšå®¢å°†ä¸“æ³¨äº Swift Charts çš„æ ‡è®°å’Œç¬¦å·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/swift-charts/animated-charts.gif&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="SwiftUI" scheme="https://liyanan2004.github.io/tags/SwiftUI/"/>
    
    <category term="Swift Charts" scheme="https://liyanan2004.github.io/tags/Swift-Charts/"/>
    
    <category term="WWDC 22" scheme="https://liyanan2004.github.io/tags/WWDC-22/"/>
    
  </entry>
  
  <entry>
    <title>Magic Keyboard ä½¿ç”¨ä½“éªŒ</title>
    <link href="https://liyanan2004.github.io/magic-keyboard-with-touchid-unbox/"/>
    <id>https://liyanan2004.github.io/magic-keyboard-with-touchid-unbox/</id>
    <published>2023-04-04T06:36:31.797Z</published>
    <updated>2023-04-04T11:48:51.599Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹°äº† Apple Magic Keyboard å·²ç»ä¸€å‘¨å¤šäº†ï¼Œä½“éªŒäº†è‹¹æœçš„ã€Œçº¿ä¸Šä¹°ï¼Œçº¿ä¸‹æã€ï¼Œ</p><p>ç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œåˆä½“éªŒäº†ã€Œ14å¤©æ— ç†ç”±é€€è´§ã€ï¼Œ</p><p>æ¥åˆ†äº«ä¸‹æˆ‘çš„ä½¿ç”¨æ„Ÿå—å’ŒæŠ˜è…¾è¿‡ç¨‹ã€‚</p><span id="more"></span><h2 id="é€‰è´­"><a href="#é€‰è´­" class="headerlink" title="é€‰è´­"></a>é€‰è´­</h2><h3 id="ä¸ºä»€ä¹ˆä¼šä¹°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šä¹°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šä¹°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šä¹°ï¼Ÿ</h3><p>ä¸»è¦æ˜¯å› ä¸ºæˆ‘å®¿èˆçš„æ¡Œå­ä¸Šæ”¾äº†ç”µè„‘ä¹‹åï¼Œæ²¡è¶³å¤Ÿç©ºé—´å†™ä½œä¸šäº†ï¼Œä¸€å¼  A4 çº¸éƒ½æ”¾ä¸å¹³ï¼Œ</p><p>äºæ˜¯ï¼Œ</p><p>å°±ä¹°äº†ä¸ªå¢é«˜æ¶ï¼Œç”µè„‘è¢«æŠ¬é«˜äº†ï¼Œé”®ç›˜è§¦æ§æ¿ç”¨èµ·æ¥å°±ä¸é¡ºæ‰‹äº†ï¼Œ</p><p>æ‰€ä»¥ï¼Œå°±è¦é…ä¸€æŠŠé”®ç›˜ã€‚</p><h3 id="ä¸ºä»€ä¹ˆæ˜¯-Magic-Keyboard-å‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæ˜¯-Magic-Keyboard-å‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯ Magic Keyboard å‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆæ˜¯ Magic Keyboard å‘¢ï¼Ÿ</h3><p>å¸‚é¢ä¸Šçš„é”®ç›˜æ™®éè¦ 200+ å·¦å³ï¼Œè´¨é‡å‚å·®ä¸é½ï¼Œ</p><p>åŒæ—¶ï¼Œæˆ‘ä¹Ÿä¸æ˜¯å¾ˆä¹ æƒ¯æœºæ¢°é”®ç›˜çš„æ‰‹æ„Ÿï¼Œ</p><p>è€ƒè™‘åˆ°ä»¥åä¹Ÿå¯èƒ½ä¼šä½¿ç”¨ Mac miniï¼Œ</p><p>äºæ˜¯ï¼Œå°±å†³å®šä¸€æ­¥åˆ°ä½ï¼Œä¹°äº†è¿™æŠŠ Magic Keyboardï¼Œæ„Ÿå—ä¸‹å‰ªåˆ€è„šé”®ç›˜ã€‚</p><p><img src="/img/magic-keyboard-with-touchid-unbox/keyboard.jpeg"></p><h3 id="ä½“éªŒã€Œçº¿ä¸‹æè´§ã€"><a href="#ä½“éªŒã€Œçº¿ä¸‹æè´§ã€" class="headerlink" title="ä½“éªŒã€Œçº¿ä¸‹æè´§ã€"></a>ä½“éªŒã€Œçº¿ä¸‹æè´§ã€</h3><p>è¿™æ˜¯ Apple å»å¹´å¼€å§‹çš„ä¸€ä¸ªæ–°çš„è´­ç‰©é€‰æ‹©ï¼Œè®©ä½ æ›´å¿«åœ°æ‹¿åˆ°äº§å“ã€‚</p><p>Apple Store ä¸‹å•ï¼Œç­‰å¾…é‚®ä»¶æé†’å¯å–è´§ï¼Œå»çº¿ä¸‹å–è´§å°±è¡Œã€‚</p><p>å› ä¸ºå½“ä¸‹ä¸æ˜¯æ–°å“å‘å”®ï¼Œè€Œé”®ç›˜ä¹Ÿæ˜¯å±äºé…ä»¶ä¸€ç±»ï¼Œæ‰€ä»¥ä¸å­˜åœ¨ç¼ºè´§çš„æƒ…å†µã€‚</p><p>ä»æˆ‘åˆ°åº—ï¼Œåˆ°æ‹¿åˆ° Magic Keyboardï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸è¶…è¿‡ 3 åˆ†é’Ÿï¼Œè¿˜æ˜¯éå¸¸è¿…é€Ÿçš„ã€‚</p><p><img src="/img/magic-keyboard-with-touchid-unbox/order-pickup.jpeg"></p><p>è¿…é€Ÿåœ°å®Œæˆäº†é…å¯¹ï¼Œæµ‹è¯•äº†ä¸‹æŒ‰é”®åŠŸèƒ½æ­£å¸¸å°±é«˜é«˜å…´å…´åœ°èµ°äº†ã€‚</p><p><img src="/img/magic-keyboard-with-touchid-unbox/quick-unbox.jpeg"></p><h2 id="æŒ‰é”®æ‰‹æ„Ÿ"><a href="#æŒ‰é”®æ‰‹æ„Ÿ" class="headerlink" title="æŒ‰é”®æ‰‹æ„Ÿ"></a>æŒ‰é”®æ‰‹æ„Ÿ</h2><p>æˆ‘ä¸ªäººæ˜¯æ›´åŠ ä¹ æƒ¯é”®ç¨‹çŸ­çš„è–„è†œé”®ç›˜çš„ï¼Œæ‰“å­—æ—¶æœ‰è‚Œè‚‰è®°å¿†ï¼Œå‡ºé”™æ¦‚ç‡ç›¸å¯¹è¾ƒä½ã€‚</p><p>å‰ªåˆ€è„šé”®ç›˜çš„é”®ç¨‹ç›¸è¾ƒäºè¶å¼é”®ç›˜æ›´é•¿ä¸€äº›äº›ï¼ŒæŒ‰é”®æ‰‹æ„Ÿæ›´è½¯ä¸€äº›ï¼Œæ•´ä½“è¿˜æ˜¯æ¯”è¾ƒèˆ’æœçš„ã€‚</p><p>Touch ID æŒ‰é’®æ˜¯é‚£ç§å¼€å…³çš„æŒ‰é’®çš„æ„Ÿè§‰ï¼ŒæŒ‰ä¸‹éœ€è¦æ¯”å…¶ä»–æŒ‰é”®æ›´å¤§çš„åŠ›æ°”ï¼Œä¸å®¹æ˜“è¯¯è§¦é”å®šã€‚</p><p><img src="/img/magic-keyboard-with-touchid-unbox/touchid-sensor.jpeg" alt="Touch ID Sensor"></p><h2 id="è¿æ¥æ€§èƒ½"><a href="#è¿æ¥æ€§èƒ½" class="headerlink" title="è¿æ¥æ€§èƒ½"></a>è¿æ¥æ€§èƒ½</h2><ul><li>MacBook Pro å¼€ç›–è‡ªåŠ¨ä¼‘çœ åï¼Œä¾ç„¶å¯ä»¥é€šè¿‡é”®ç›˜å”¤é†’ç”µè„‘</li><li>MacBook Pro å¼€æœºæ—¶ç¬¬ä¸€æ¬¡è¾“å…¥å¯†ç æ—¶é”®ç›˜è‡ªåŠ¨è¿æ¥ï¼Œæ— éœ€ç­‰å¾…</li><li>MacBook Pro å¼€ç›–è‡ªåŠ¨å”¤é†’åï¼Œé”®ç›˜ä¿æŒè¿æ¥</li></ul><p>ä½†æ˜¯æœ‰æ—¶ä¼šå‡ºç°æ‰“å­—æ²¡ååº”çš„æƒ…å†µï¼Œç”µè„‘æ˜¾ç¤ºé”®ç›˜å·²è¿æ¥ï¼Œé‡æ–°è¿æ¥åæ¢å¤æ­£å¸¸ã€‚</p><p>å¶å°”çš„ï¼Œä¹Ÿèƒ½ç†è§£ï¼Œæ­£å¸¸ã€‚</p><h2 id="åŠŸèƒ½æŒ‰é”®"><a href="#åŠŸèƒ½æŒ‰é”®" class="headerlink" title="åŠŸèƒ½æŒ‰é”®"></a>åŠŸèƒ½æŒ‰é”®</h2><p>åˆšæ‹¿åˆ° Magic Keyboard çš„æ—¶å€™æ˜¯éœ€è¦ä½¿ç”¨ <code>fn + åŠŸèƒ½æŒ‰é”®</code> æ‰èƒ½è§¦å‘å¯¹åº”åŠŸèƒ½ï¼Œä¸”æœ‰äº›åŠŸèƒ½ï¼ˆå‹¿æ‰°ã€è¯­éŸ³è¾“å…¥ï¼‰æ— æ³•ä½¿ç”¨ã€‚</p><p>åæ¥åœ¨ macOS è®¾ç½®ä¸­æ‰¾åˆ° â€œå°†F1ã€F2ç­‰é”®ç”¨ä½œæ ‡å‡†åŠŸèƒ½é”®â€ï¼Œå…³é—­åæŒ‰é”®å…¨éƒ¨å¯ç”¨ï¼Œå¹¶ä¸”ä¹Ÿä¸éœ€è¦æ­é… fn äº†ã€‚</p><p><img src="/img/magic-keyboard-with-touchid-unbox/func-button-activate.png"></p><h2 id="ç”µæ± ç»­èˆª"><a href="#ç”µæ± ç»­èˆª" class="headerlink" title="ç”µæ± ç»­èˆª"></a>ç”µæ± ç»­èˆª</h2><p>ç¬¬ä¸€æŠŠé”®ç›˜çš„ç»­èˆªå®Œå…¨å°¿å´©ï¼Œæœ€å¤¸å¼ çš„æ˜¯å…³é—­é”®ç›˜ç”µæºåä¸€æ™šä¸Šè€—ç”µ70%ï¼Œä¸å…·å¤‡ä»»ä½•å‚è€ƒä»·å€¼ã€‚</p><p>ç¬¬äºŒæŠŠé”®ç›˜æ­£å¸¸ï¼Œé«˜å¼ºåº¦æ•²äº†ä¸¤å¤©åŠçš„ä»£ç ï¼Œé”®ç›˜ä¿æŒå¼€å¯ï¼Œåªè€—ç”µ3%ã€‚</p><p>èƒ½å¤Ÿè¾¾åˆ°å®£ç§°çš„ã€Œä¸€æ¬¡å……ç”µï¼Œç»­èˆªä¸€ä¸ªæœˆã€</p><blockquote><p>æˆ‘åˆæŠŠæ–°çš„é”®ç›˜å……æ»¡äº†ç”µï¼Œæµ‹æµ‹èƒ½ç”¨å¤šä¹…ã€‚</p></blockquote><h2 id="é€€æ¢è´§ç»å†"><a href="#é€€æ¢è´§ç»å†" class="headerlink" title="é€€æ¢è´§ç»å†"></a>é€€æ¢è´§ç»å†</h2><h3 id="è½»å¾®ç£•ç¢°"><a href="#è½»å¾®ç£•ç¢°" class="headerlink" title="è½»å¾®ç£•ç¢°"></a>è½»å¾®ç£•ç¢°</h3><p>ä»…åœ¨æµ‹è¯•æŒ‰é”®åŠŸèƒ½ï¼Œå’Œç¬¬ä¸€æ¬¡å……ç”µæ—¶æ­å¼€äº†å¤–åŒ…è†œï¼Œä¹ŸåŸºæœ¬æ²¡æœ‰ä½¿ç”¨è¿‡é”®ç›˜ã€‚</p><p>åˆ°å­¦æ ¡åæ— æ„é—´ç”¨æŒ‡ç”²æ„Ÿå—åˆ° Option é”®ä¸‹æ–¹ä¸å¹³ï¼Œæ‰å‘ç°å‡¹è¿›å»ä¸€å—ã€‚</p><p><img src="/img/magic-keyboard-with-touchid-unbox/cosmetic-problem.jpeg"></p><p>å‡ ä¹å¯ä»¥æ’é™¤è®¤ä¸ºé€ æˆï¼Œä½†æ˜¯ï¼Œè¿™ä¸æ˜¯æ¢è´§çš„ä¸»è¦åŸå› ã€‚</p><h3 id="ç»­èˆªé—®é¢˜ã€è´¨é‡é—®é¢˜"><a href="#ç»­èˆªé—®é¢˜ã€è´¨é‡é—®é¢˜" class="headerlink" title="ç»­èˆªé—®é¢˜ã€è´¨é‡é—®é¢˜"></a>ç»­èˆªé—®é¢˜ã€è´¨é‡é—®é¢˜</h3><p>æˆ‘è®¤ä¸ºç¬¬ä¸€æŠŠé”®ç›˜çš„ç”µæ± æ˜¯æœ‰é—®é¢˜çš„ã€‚</p><p>ç¬¬ä¸€æ¬¡è¿æ¥æ—¶ï¼Œç”µæ± æ˜¾ç¤º 0%ï¼Œæˆ‘ä»¥ä¸ºå°±æ˜¯æ­£å¸¸çš„æ²¡ç”µäº†ã€‚</p><p>æ²¡ç”µäº†å……å‘—ã€‚</p><p>å½“æ™šå……æ»¡ç”µï¼Œç¬¬äºŒå¤©æ—©ä¸Šå°±å¸¦å»å­¦æ ¡äº†ï¼Œè¿˜å‰© <strong>27%</strong> ğŸ˜±</p><p>ä¸åˆ° 12 å°æ—¶å•Šï¼Œè€Œä¸”ï¼Œé”®ç›˜çš„å¼€å…³æ˜¯ã€Œå…³é—­ã€çš„çŠ¶æ€ã€‚</p><p>æ¥ä¸‹æ¥çš„å‡ å¤©ï¼Œæˆ‘åˆé’ˆå¯¹æ€§çš„è¿›è¡Œäº†ä¸€äº›è®°å½•ï¼š</p><p><img src="/img/magic-keyboard-with-touchid-unbox/battery-report.jpeg"></p><p>å¯ä»¥çœ‹å‡ºï¼Œæ— è®ºæ˜¯æ‰“å¼€è¿˜æ˜¯å…³é—­é”®ç›˜ç”µæºï¼Œéƒ½æ˜¯æœ‰é—®é¢˜çš„ï¼Œè¿™å°±æ’é™¤äº†æˆ‘ç”µè„‘è¿æ¥ã€å…¼å®¹æ€§çš„é—®é¢˜äº†ã€‚</p><p>è·Ÿ 400 å®¢æœæ²Ÿé€šåï¼Œå»ºè®®æˆ‘æ— ç†ç”±é€€è´§ï¼Œå†ä¹°ä¸€æŠŠæ–°çš„ï¼ˆçº¿ä¸‹ä¸èƒ½ç›´æ¥æ¢è´§ï¼Œå¥½å¥‡æ€ªâ€¦ï¼‰ã€‚</p><p>ä¸è¿‡æ•´ä¸ªæ¢è´§è¿‡ç¨‹è¿˜æ˜¯éå¸¸è½»æ¾æ„‰å¿«çš„ï¼Œåº—å‘˜è¿˜è·Ÿæˆ‘è¯´ï¼Œå¸Œæœ›è¿™æŠŠé”®ç›˜æ²¡é—®é¢˜ğŸ˜‚</p><h2 id="ç»éªŒä¸æ€»ç»“"><a href="#ç»éªŒä¸æ€»ç»“" class="headerlink" title="ç»éªŒä¸æ€»ç»“"></a>ç»éªŒä¸æ€»ç»“</h2><p>æ”¶åˆ°ç¬¬äºŒæŠŠé”®ç›˜åï¼Œæˆ‘ä»”ç»†æ£€æŸ¥äº†å¤–è§‚ï¼Œåˆå§‹ç”µæ± å‰©ä½™å®¹é‡ï¼ˆ95%ï¼‰ã€‚</p><p><img src="/img/magic-keyboard-with-touchid-unbox/new-keyboard.png"></p><p>å›æƒ³èµ·æ¥ï¼Œ2023 å¹´ç”Ÿäº§çš„é”®ç›˜ï¼ˆç›’å­ä¸Šå†™çš„ï¼‰ï¼Œåˆå§‹ç”µé‡ä¸º 0% ç¡®å®ä¸æ­£å¸¸ï¼Œä¸‹æ¬¡ä¹Ÿè¦æ³¨æ„æ£€æŸ¥è¿™ä¸€éƒ¨åˆ†ã€‚</p><p><strong>å¯¹äº é“é‡‘å± ä¸” æœ‰æ£±è§’çš„å¤–å£³ï¼Œç”¨æŒ‡ç”²æ¥æ£€æŸ¥æ˜¯å¦å¹³æ•´ï¼Œé¿å…åˆå§‹ç£•ç¢°ï¼ˆè¿™ç§é—®é¢˜å¾ˆéš¾è¯æ˜ä¸æ˜¯åæœŸäººä¸ºé€ æˆï¼‰</strong></p><p>æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»ç„¶å–œæ¬¢è¿™æŠŠé”®ç›˜ï¼Œå–œæ¬¢åœ¨ Apple è´­ç‰©çš„ä½“éªŒï¼Œ</p><p>æ²¡æœ‰ä»€ä¹ˆåºŸè¯ï¼Œä¸è·Ÿä½ æ‰¯çš®ï¼Œè¯¥æ¢å°±æ¢ï¼Œå¾ˆå–œæ¬¢è¿™æ ·çš„é£æ ¼ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¹°äº† Apple Magic Keyboard å·²ç»ä¸€å‘¨å¤šäº†ï¼Œä½“éªŒäº†è‹¹æœçš„ã€Œçº¿ä¸Šä¹°ï¼Œçº¿ä¸‹æã€ï¼Œ&lt;/p&gt;
&lt;p&gt;ç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œåˆä½“éªŒäº†ã€Œ14å¤©æ— ç†ç”±é€€è´§ã€ï¼Œ&lt;/p&gt;
&lt;p&gt;æ¥åˆ†äº«ä¸‹æˆ‘çš„ä½¿ç”¨æ„Ÿå—å’ŒæŠ˜è…¾è¿‡ç¨‹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æ–°ç©å…·" scheme="https://liyanan2004.github.io/categories/%E6%96%B0%E7%8E%A9%E5%85%B7/"/>
    
    
    <category term="Magic Keyboard" scheme="https://liyanan2004.github.io/tags/Magic-Keyboard/"/>
    
  </entry>
  
  <entry>
    <title>æç¬‘ä½“è‚² ä¹‹ è·‘æ­¥æ˜¯ä¸å¯èƒ½è·‘æ­¥çš„</title>
    <link href="https://liyanan2004.github.io/hack-college-sport/"/>
    <id>https://liyanan2004.github.io/hack-college-sport/</id>
    <published>2023-03-13T12:42:25.861Z</published>
    <updated>2023-03-13T14:20:18.920Z</updated>
    
    <content type="html"><![CDATA[<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œé«˜æ ¡ä½“è‚²å°±æ˜¯ä¸€å¨â€¦</p><p>ä¸”ä¸è¯´åŠŸèƒ½å¦‚ä½•ï¼Œ</p><p>ä½ ä¸€ä¸ªç»™å¤§å­¦ç”Ÿç”¨çš„â€œè¿åŠ¨â€è½¯ä»¶ï¼Œ</p><p>å¼€å±ä¸€å¤§å †å¹¿å‘Šï¼Œæ‰‹æœºåŠ¨ä¸€ä¸‹å°±ä¹±è·³appï¼Œ</p><p>è·‘ä¸ªæ­¥è¿˜ä¸å¿˜ç»™æˆ‘æ‰“å¹¿å‘Šï¼Œä»å¤´æ‰“åˆ°å°¾ï¼ŒçœŸç‰›â€¦</p><p>å‚»*è½¯ä»¶ï¼Œåƒåƒå¤ªéš¾çœ‹ï¼</p><p><img src="/img/hack-college-sport/full-ads.jpeg"></p><p>è·‘ä¸ªæ­¥è¿˜è¦æ‰“å¡ç‚¹ä½ï¼ŒçœŸçš„æ¶å¿ƒï¼Œä½†æ˜¯ï¼Œè·‘æ­¥æ˜¯è‚¯å®šä¸ä¼šè·‘çš„å•¦ï½</p><span id="more"></span><h1 id="æµç¨‹åˆ†æ"><a href="#æµç¨‹åˆ†æ" class="headerlink" title="æµç¨‹åˆ†æ"></a>æµç¨‹åˆ†æ</h1><p>å¯¹ APP çš„ç½‘ç»œè¯·æ±‚è¿›è¡Œä¸€ç•ªæŠ“åŒ…ï¼Œæ•´ä¸ªæµç¨‹æ¯”è¾ƒç®€å•ï¼š</p><ol><li>æ‰‹æœºç‚¹å‡»å¼€å§‹ä½“è‚²é”»ç‚¼è·‘ï¼ŒAPP å‘é€ä¸€ä¸ªè¯·æ±‚</li><li>æœåŠ¡å™¨è¿”å›å½“å‰è·‘æ­¥çš„ RunPageID å’Œéœ€è¦ç»è¿‡çš„ç‚¹ä½ä¿¡æ¯</li><li>å¼€è·‘ï¼Œè®°å¾—è¦æ»¡è¶³è·‘æ­¥è¦æ±‚ï¼ˆ2å…¬é‡Œ + 3ä¸ªç‚¹ï¼‰</li><li>å®Œæˆè·‘æ­¥ä¹‹åï¼Œå°†é€”å¾„çš„ä¸€ä¸ªä¸ªé‡‡æ ·ç‚¹è¿›è¡Œå¤„ç†ï¼Œä¸€å¹¶å‘ç»™æœåŠ¡å™¨ï¼Œå®Œæˆè·‘æ­¥è®°å½•ä¸ŠæŠ¥ä¿å­˜ã€‚</li></ol><h1 id="ä¸€äº›ç»†èŠ‚"><a href="#ä¸€äº›ç»†èŠ‚" class="headerlink" title="ä¸€äº›ç»†èŠ‚"></a>ä¸€äº›ç»†èŠ‚</h1><ul><li>æ‰€æœ‰è¯·æ±‚å‡ä»¥ POST æ–¹å¼å‘é€</li><li>æ‰€æœ‰è¯·æ±‚çš„ body ä¸­çš„å‡å«æœ‰ sign ç”¨äºæ ¡éªŒï¼Œä½¿ç”¨çš„æ˜¯ MD5 ç”Ÿæˆå“ˆå¸Œå€¼</li></ul><h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><p>åœ¨æ¯ä¸€ä¸ªè¯·æ±‚çš„ body ä¸­çš„æ•°æ®ç»“æ„é•¿è¿™æ ·ï¼š<code>data=[JSON Data]&amp;sign=[MD5 Hash]</code></p><h2 id="å¼€å§‹è·‘æ­¥"><a href="#å¼€å§‹è·‘æ­¥" class="headerlink" title="å¼€å§‹è·‘æ­¥"></a>å¼€å§‹è·‘æ­¥</h2><p>URLï¼š <code>https://www.sportcampus.cn/api/run/runPage</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  <span class="string">&quot;initLocation&quot;</span> : <span class="string">&quot;121.00000,30.00000â€,   // èµ·å§‹ä½ç½®çš„ç»çº¬åº¦</span></span><br><span class="line"><span class="string">          &quot;</span>type<span class="string">&quot; : &quot;</span><span class="number">1</span><span class="string">&quot;,                    // ä¸çŸ¥é“ä»€ä¹ˆå«ä¹‰</span></span><br><span class="line"><span class="string">        &quot;</span>userid<span class="string">&quot; : &quot;</span><span class="number">1234567</span><span class="string">&quot;               // å½“å‰ç”¨æˆ·çš„ ID</span></span><br><span class="line"><span class="string">]</span></span><br></pre></td></tr></table></figure><p>æœåŠ¡å™¨è¿”å›çš„ JSON ä¸­ï¼Œ<code>ibeacon</code> å’Œ <code>gpsinfo</code>åˆ†åˆ«å¯¹åº” å¿…ç»ç‚¹ğŸ”´ å’Œ é€”å¾„ç‚¹ğŸŸ¢</p><p>ibeacon ä¸­å…³é”®ä¿¡æ¯æ˜¯ majorã€minorå’Œuuidï¼Œåç»­ä¿å­˜è·‘æ­¥è®°å½•æ˜¯ä¼šç”¨åˆ°ã€‚</p><p>gpsinfo å°±æ˜¯ç®€å•çš„å­—å…¸ï¼ŒåŒ…å« <code>latitude</code> å’Œ <code>longitude</code>ã€‚</p><h2 id="ç»“æŸè·‘æ­¥"><a href="#ç»“æŸè·‘æ­¥" class="headerlink" title="ç»“æŸè·‘æ­¥"></a>ç»“æŸè·‘æ­¥</h2><p>URLï¼š<code>https://www.sportcampus.cn/api/run/saveRunV2</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">      <span class="string">&quot;endTime&quot;</span> : <span class="string">&quot;2023-3-13 14:50:39&quot;</span>,</span><br><span class="line">    <span class="string">&quot;startTime&quot;</span> : <span class="string">&quot;2023-3-13 14:38:15&quot;</span>,</span><br><span class="line">       <span class="string">&quot;userid&quot;</span> : <span class="string">&quot;1234567&quot;</span>, </span><br><span class="line">         <span class="string">&quot;goal&quot;</span> : <span class="string">&quot;2.00&quot;</span>,</span><br><span class="line">         <span class="string">&quot;type&quot;</span> : <span class="number">1</span>,</span><br><span class="line">       <span class="string">&quot;frombp&quot;</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;runPageId&quot;</span> : pageID,</span><br><span class="line">        <span class="string">&quot;buPin&quot;</span> : <span class="string">&quot;100&quot;</span>,</span><br><span class="line">        <span class="string">&quot;speed&quot;</span> : <span class="string">&quot;6&#x27;13<span class="subst">\&quot;</span>&quot;</span>,</span><br><span class="line">         <span class="string">&quot;real&quot;</span> : <span class="string">&quot;300&quot;</span>,                      <span class="comment">// è·ç¦»ï¼Œå•ä½ï¼ˆç±³ï¼‰</span></span><br><span class="line">     <span class="string">&quot;duration&quot;</span> : <span class="string">&quot;658&quot;</span>,                      <span class="comment">// æ—¶å¸¸ï¼Œå•ä½ï¼ˆç§’ï¼‰</span></span><br><span class="line">        <span class="string">&quot;track&quot;</span> : [],                         <span class="comment">// è·‘æ­¥è¿‡ç¨‹ä¸­ GPS é‡‡æ ·ç‚¹</span></span><br><span class="line">        <span class="string">&quot;bNode&quot;</span> : bNode,                      <span class="comment">// å¿…ç»ç‚¹æ•°æ®ğŸ”´</span></span><br><span class="line">        <span class="string">&quot;tNode&quot;</span> : tNode,                      <span class="comment">// é€”å¾„ç‚¹æ•°æ®ğŸŸ¢</span></span><br><span class="line">     <span class="string">&quot;totalNum&quot;</span> : <span class="string">&quot;1024&quot;</span>,                     <span class="comment">// æ­¥æ•°</span></span><br><span class="line">        <span class="string">&quot;trend&quot;</span> : [[<span class="string">&quot;x&quot;</span> : <span class="string">&quot;0&quot;</span>, <span class="string">&quot;y&quot;</span> : <span class="string">&quot;0&quot;</span>]]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåªè¦ç»™é€Ÿåº¦ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œå…¶ä»–åŸºæœ¬éƒ½èƒ½ç®—å‡ºæ¥ã€‚</p><p>é€”å¾„ç‚¹ã€å¿…ç»ç‚¹æ‰“å¡å®é™…ä¸Šå°±æ˜¯ bNode å’Œ tNodeï¼ŒæŠŠâ€œæƒ³ç»è¿‡çš„â€ç‚¹ç»™è¿›å»å°±å¥½å•¦ã€‚</p><p>bNode æ˜¯ä¸€ä¸ªå­—å…¸æ•°ç»„ï¼Œå­—å…¸çš„ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">     <span class="string">&quot;major&quot;</span> : <span class="type">String</span>,</span><br><span class="line">     <span class="string">&quot;minor&quot;</span> : <span class="type">String</span>,</span><br><span class="line">     <span class="string">&quot;uuid&quot;</span>  : <span class="type">UUID</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>tNode ç›¸å¯¹ç®€å•ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå­—å…¸æ•°ç»„ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    <span class="string">&quot;longitude&quot;</span> : <span class="type">String</span>,</span><br><span class="line">     <span class="string">&quot;latitude&quot;</span> : <span class="type">String</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>track æ˜¯é—´éš”ä¸€æ®µæ—¶é—´çš„ GPS é‡‡æ ·ç‚¹ï¼Œä¹Ÿæ˜¯å­—å…¸æ•°ç»„ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">        <span class="string">&quot;speed&quot;</span> : <span class="type">String</span>,   <span class="comment">// åº”è¯¥æ˜¯è®°å½•é‡‡æ ·æ—¶çš„é€Ÿåº¦ï¼Œå…·ä½“å•ä½ä¸æ¸…æ¥šï¼Œä¸€èˆ¬è·‘æ­¥åœ¨ 2.0 - 3.0 å·¦å³</span></span><br><span class="line">    <span class="string">&quot;longitude&quot;</span> : <span class="type">String</span>,</span><br><span class="line">     <span class="string">&quot;latitude&quot;</span> : <span class="type">String</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="Sign-çš„è·å–"><a href="#Sign-çš„è·å–" class="headerlink" title="Sign çš„è·å–"></a>Sign çš„è·å–</h1><p>åœ¨ GitHub ä¸Šæ‰¾åˆ°äº† Python çš„ç‰ˆæœ¬ï¼Œç›´æ¥æ‹¿åˆ°äº† keyï¼Œ</p><p>å€ŸåŠ© <a href="https://github.com/LiYanan2004/ChatBot">ChatBot</a> å¾—åˆ°äº† Swift ç‰ˆæœ¬çš„ MD5 å“ˆå¸Œç”Ÿæˆå‡½æ•°ï¼Œ</p><p>æŠŠ data æ„å»ºå¥½ä¹‹åï¼Œè½¬ä¸º String ä¼ è¿›å»å°±å¥½å•¦ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CryptoKit</span><br><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">getMD5Code</span>(<span class="keyword">_</span> <span class="params">s</span>: <span class="type">String</span>) -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> key <span class="operator">=</span> <span class="string">&quot;lpKK*TJE8WaIg%93O0pfn0#xS0i3xE$z&quot;</span></span><br><span class="line">    <span class="keyword">let</span> message <span class="operator">=</span> key <span class="operator">+</span> <span class="string">&quot;data&quot;</span> <span class="operator">+</span> s</span><br><span class="line">    <span class="keyword">let</span> data <span class="operator">=</span> <span class="type">Data</span>(message.utf8)</span><br><span class="line">    <span class="keyword">var</span> hasher <span class="operator">=</span> <span class="type">Insecure</span>.<span class="type">MD5</span>()</span><br><span class="line">    hasher.update(data: data)</span><br><span class="line">    <span class="keyword">return</span> hasher.finalize().map &#123; <span class="type">String</span>(format: <span class="string">&quot;%02hhx&quot;</span>, <span class="variable">$0</span>) &#125;.joined()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¦‚ä½•è§„åˆ’è·¯å¾„"><a href="#å¦‚ä½•è§„åˆ’è·¯å¾„" class="headerlink" title="å¦‚ä½•è§„åˆ’è·¯å¾„"></a>å¦‚ä½•è§„åˆ’è·¯å¾„</h1><p>ç­”ï¼šå¾—åˆ°å¿…ç»ç‚¹å’Œé€”å¾„ç‚¹åï¼Œæ‰‹åŠ¨è§„åˆ’ã€‚</p><p>ç”¨ SwiftUI + MapKit åšäº†ä¸€ä¸ª UIï¼Œåœ¨åœ°å›¾ä¸Šæ ‡æ³¨å‡ºå…³é”®ç‚¹ï¼Œ</p><p>æ¥ä¸‹æ¥å°±æ˜¯é¼ æ ‡ç‚¹ç‚¹ç‚¹ï¼</p><p>ç›¸é‚»çš„ä¸¤ä¸ªç‚¹ä¸­é—´ä¼šè¡¥é½æ¥å®ç° â€œGPS é—´éš”é‡‡æ ·â€ï¼Œ</p><p>å½“ç„¶ï¼Œè·‘æ­¥ä¸€å®šä¸ä¼šæ˜¯ç¬”ç¬”ç›´çš„ï¼Œä¹Ÿé€‚å½“çš„å¯¹æ¯ä¸€ä¸ªä¸­é—´ç‚¹åšäº†æ¨ªçºµå‘çš„éšæœºåç§»ã€‚</p><p>ä»éœ€æ³¨æ„çš„æ˜¯ï¼šåœ¨è¿‡æ²³ä»¥åŠè½¬å¼¯æ—¶è¦å°å¿ƒä¸€äº›ğŸ˜‚</p><p><img src="/img/hack-college-sport/route.png"></p><h1 id="è·‘æ­¥æµç¨‹"><a href="#è·‘æ­¥æµç¨‹" class="headerlink" title="è·‘æ­¥æµç¨‹"></a>è·‘æ­¥æµç¨‹</h1><ol><li>ç‚¹å‡»è·‘æ­¥æŒ‰é’®</li><li>è§„åˆ’è·¯çº¿</li><li>ç‚¹å‡»ç»“æŸè·‘æ­¥</li><li>ç­‰å¾…æäº¤â€¦</li></ol><p>èˆ’æœï¼è€¶ï¼è·‘æ­¥æ˜¯ä¸å¯èƒ½è·‘æ­¥çš„å•¦ï½</p><p><img src="/img/hack-college-sport/submit.png"></p><p><em>é¡¹ç›®ä¸å¼€æºï¼Œæ¶‰åŠå¤šæ–¹åˆ©ç›Šä¸åˆä½œï¼Œä»…åœ¨æˆ‘è‡ªå·±ç”µè„‘ä¸Šè¿è¡Œä½¿ç”¨ã€‚</em></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œé«˜æ ¡ä½“è‚²å°±æ˜¯ä¸€å¨â€¦&lt;/p&gt;
&lt;p&gt;ä¸”ä¸è¯´åŠŸèƒ½å¦‚ä½•ï¼Œ&lt;/p&gt;
&lt;p&gt;ä½ ä¸€ä¸ªç»™å¤§å­¦ç”Ÿç”¨çš„â€œè¿åŠ¨â€è½¯ä»¶ï¼Œ&lt;/p&gt;
&lt;p&gt;å¼€å±ä¸€å¤§å †å¹¿å‘Šï¼Œæ‰‹æœºåŠ¨ä¸€ä¸‹å°±ä¹±è·³appï¼Œ&lt;/p&gt;
&lt;p&gt;è·‘ä¸ªæ­¥è¿˜ä¸å¿˜ç»™æˆ‘æ‰“å¹¿å‘Šï¼Œä»å¤´æ‰“åˆ°å°¾ï¼ŒçœŸç‰›â€¦&lt;/p&gt;
&lt;p&gt;å‚»*è½¯ä»¶ï¼Œåƒåƒå¤ªéš¾çœ‹ï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/hack-college-sport/full-ads.jpeg&quot;&gt;&lt;/p&gt;
&lt;p&gt;è·‘ä¸ªæ­¥è¿˜è¦æ‰“å¡ç‚¹ä½ï¼ŒçœŸçš„æ¶å¿ƒï¼Œä½†æ˜¯ï¼Œè·‘æ­¥æ˜¯è‚¯å®šä¸ä¼šè·‘çš„å•¦ï½&lt;/p&gt;</summary>
    
    
    
    <category term="çæŠ˜è…¾" scheme="https://liyanan2004.github.io/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="hack" scheme="https://liyanan2004.github.io/tags/hack/"/>
    
  </entry>
  
  <entry>
    <title>Selection Range in SwiftUI</title>
    <link href="https://liyanan2004.github.io/swiftui-selection-range/"/>
    <id>https://liyanan2004.github.io/swiftui-selection-range/</id>
    <published>2023-02-12T11:33:00.000Z</published>
    <updated>2023-03-01T10:40:21.779Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ SwiftUI ä¸­ï¼Œæ²¡æœ‰æä¾›é»˜è®¤çš„ modifier æ¥ç›‘å¬ <code>TextView</code> çš„ <code>selectionRange</code>ï¼Œ</p><p>è¿™å¯¹äºæ–‡æœ¬ç¼–è¾‘ç±» app æ¥è¯´æ˜¯å¾ˆè‡´å‘½çš„ï¼Œå› ä¸ºæ— æ³•æ§åˆ¶å…‰æ ‡çš„ä½ç½®ï¼Œ</p><p>ä½†æ˜¯å¯ä»¥ä»å…¶ä»–çš„æ–‡ç« ä¸­æ‰¾åˆ°ä¸€äº›æ€è·¯ï¼š</p><ul><li><a href="https://swiftui-lab.com/a-powerful-combo/">The Power of the Hosting+Representable Combo</a></li><li><a href="https://github.com/siteline/SwiftUI-Introspect">siteline&#x2F;SwiftUI-Introspect</a></li></ul><p>å¯»æ‰¾ NSView &#x2F; UIView çš„æ–¹æ³•æ¥æºäºï¼š<a href="https://github.com/siteline/SwiftUI-Introspect">siteline&#x2F;SwiftUI-Introspect</a></p><p>æœ¬æ–‡æ¥ä»‹ç»ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥å®ç°å‡ºä»¥ä¸‹çš„ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Example</span>: <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> selectionRange <span class="operator">=</span> <span class="type">NSRange</span>()</span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> text <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">TextEditor</span>(text: <span class="variable">$text</span>)</span><br><span class="line">            .selectionRange(<span class="variable">$selectionRange</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>é¦–å…ˆä» SwiftUI çš„åº•å±‚å…¥æ‰‹ï¼Œ</p><p>SwiftUI åœ¨æ„å»º View æ—¶ä¼šä½¿ç”¨åˆ° NSView(Controller) &#x2F; UIVIew(Controller)ï¼Œ</p><p>åœ¨ä»–ä»¬çš„ä¸Šå±‚è¿˜ä¼šåŒ…ä¸€å±‚ <code>ViewHost</code>ï¼Œ</p><p>ç±»ä¼¼è¿™æ ·ï¼š</p><p><img src="/img/swiftui-selection-range/view-hierachy.jpeg" alt="macOS View Hierachy"></p><p>åªè¦æˆ‘ä»¬é¡ºç€ ViewHost æ‰¾åˆ°äº†å¯¹åº”çš„ NSView(Controller) &#x2F; UIVIew(Controller)ï¼Œ</p><p>å°±èƒ½å®ç°å¯¹æ§ä»¶çš„è‡ªå®šä¹‰æ›´æ”¹ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="STEP-1-å¯»æ‰¾-NSTextView-x2F-UITextView"><a href="#STEP-1-å¯»æ‰¾-NSTextView-x2F-UITextView" class="headerlink" title="STEP 1: å¯»æ‰¾ NSTextView &#x2F; UITextView"></a>STEP 1: å¯»æ‰¾ <code>NSTextView</code> &#x2F; <code>UITextView</code></h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">class</span> <span class="title class_">_TextViewFinder</span>: <span class="title class_">PlatformView</span> &#123;</span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(frame: .zero)</span><br><span class="line">        isHidden <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">hitTest</span>(<span class="keyword">_</span> <span class="params">point</span>: <span class="type">NSPoint</span>) -&gt; <span class="type">PlatformView</span>? &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">@available</span>(<span class="operator">*</span>, unavailable)</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init?</span>(<span class="params">coder</span>: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>(<span class="string">&quot;init(coder:) has not been implemented&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">findTextView</span>(<span class="params">view</span>: <span class="type">PlatformView</span>?) -&gt; <span class="type">TextView</span>? &#123;</span><br><span class="line">        <span class="keyword">var</span> superview <span class="operator">=</span> view</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">let</span> s <span class="operator">=</span> superview &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="type">NSStringFromClass</span>(<span class="built_in">type</span>(of: s)).contains(<span class="string">&quot;ViewHost&quot;</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> viewHost <span class="operator">=</span> s</span><br><span class="line">                <span class="keyword">guard</span> <span class="keyword">let</span> superview <span class="operator">=</span> viewHost.superview,</span><br><span class="line">                    <span class="keyword">let</span> entryIndex <span class="operator">=</span> superview.subviews.firstIndex(of: viewHost),</span><br><span class="line">                    entryIndex <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">for</span> subview <span class="keyword">in</span> superview.subviews[<span class="number">0</span><span class="operator">..&lt;</span>entryIndex].reversed() &#123;</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> typed <span class="operator">=</span> findChild(in: subview) &#123;</span><br><span class="line">                        <span class="keyword">return</span> typed</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">            &#125;</span><br><span class="line">            superview <span class="operator">=</span> s.superview</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">func</span> <span class="title function_">findChild</span>(<span class="params">in</span> <span class="params">root</span>: <span class="type">PlatformView</span>) -&gt; <span class="type">TextView</span>? &#123;</span><br><span class="line">        <span class="keyword">for</span> subview <span class="keyword">in</span> root.subviews &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> typed <span class="operator">=</span> subview <span class="keyword">as?</span> <span class="type">TextView</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> typed</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> typed <span class="operator">=</span> findChild(in: subview) &#123;</span><br><span class="line">                <span class="keyword">return</span> typed</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">#if</span> os(macOS)</span><br><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">typealias</span> <span class="type">TextView</span> <span class="operator">=</span> <span class="type">NSTextView</span></span><br><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">typealias</span> <span class="type">PlatformView</span> <span class="operator">=</span> <span class="type">NSView</span></span><br><span class="line"><span class="keyword">#elseif</span> <span class="operator">!</span>os(watchOS)</span><br><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">typealias</span> <span class="type">TextView</span> <span class="operator">=</span> <span class="type">UITextView</span></span><br><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">typealias</span> <span class="type">PlatformView</span> <span class="operator">=</span> <span class="type">NSView</span></span><br><span class="line"><span class="keyword">#endif</span></span><br></pre></td></tr></table></figure><h3 id="STEP-2-æŠŠ-PlatformView-åŒ…è£…æˆ-SwiftUI-View"><a href="#STEP-2-æŠŠ-PlatformView-åŒ…è£…æˆ-SwiftUI-View" class="headerlink" title="STEP 2: æŠŠ PlatformView åŒ…è£…æˆ SwiftUI View"></a>STEP 2: æŠŠ <code>PlatformView</code> åŒ…è£…æˆ <code>SwiftUI View</code></h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">struct</span> <span class="title class_">_TextViewFinderWrapper</span>: <span class="title class_">ViewRepresentable</span> &#123;</span><br><span class="line">    <span class="meta">@Binding</span> <span class="keyword">var</span> textView: <span class="type">TextView</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">typealias</span> _Finder <span class="operator">=</span> _TextViewFinder</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">makeView</span>(<span class="params">context</span>: <span class="type">Context</span>) -&gt; _Finder &#123;</span><br><span class="line">        _TextViewFinder()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">updateView</span>(<span class="keyword">_</span> <span class="params">finder</span>: _Finder, <span class="params">context</span>: <span class="type">Context</span>) &#123;</span><br><span class="line">        <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> textView <span class="operator">=</span> finder.findTextView(view: finder.superview) &#123;</span><br><span class="line">                <span class="keyword">self</span>.textView <span class="operator">=</span> textView</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">#if</span> os(macOS)</span><br><span class="line"><span class="keyword">protocol</span> <span class="title class_">ViewRepresentable</span>: <span class="title class_">NSViewRepresentable</span> &#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">NSViewType</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">makeView</span>(<span class="params">context</span>: <span class="type">Context</span>) -&gt; <span class="type">NSViewType</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">updateView</span>(<span class="keyword">_</span> <span class="params">nsView</span>: <span class="type">NSViewType</span>, <span class="params">context</span>: <span class="type">Context</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">ViewRepresentable</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">makeNSView</span>(<span class="params">context</span>: <span class="type">Context</span>) -&gt; <span class="type">NSViewType</span> &#123;</span><br><span class="line">        makeView(context: context)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">updateNSView</span>(<span class="keyword">_</span> <span class="params">nsView</span>: <span class="type">NSViewType</span>, <span class="params">context</span>: <span class="type">Context</span>) &#123;</span><br><span class="line">        updateView(nsView, context: context)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">#else</span></span><br><span class="line"><span class="keyword">protocol</span> <span class="title class_">ViewRepresentable</span>: <span class="title class_">UIViewRepresentable</span> &#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">UIViewType</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">makeView</span>(<span class="params">context</span>: <span class="type">Context</span>) -&gt; <span class="type">UIViewType</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">updateView</span>(<span class="keyword">_</span> <span class="params">uiView</span>: <span class="type">UIViewType</span>, <span class="params">context</span>: <span class="type">Context</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">ViewRepresentable</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">makeUIView</span>(<span class="params">context</span>: <span class="type">Context</span>) -&gt; <span class="type">UIViewType</span> &#123;</span><br><span class="line">        makeView(context: context)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">updateUIView</span>(<span class="keyword">_</span> <span class="params">uiView</span>: <span class="type">UIViewType</span>, <span class="params">context</span>: <span class="type">Context</span>) &#123;</span><br><span class="line">        updateView(uiView, context: context)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">#endif</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ <code>finder.findTextView </code> å¯»æ‰¾ <code>TextView</code> å¹¶ä¸”å°†å…¶ä¿å­˜åˆ° <code>textView</code>ï¼Œ</p><p>ä½¿ç”¨ <code>@Binding</code> å¯ä»¥ä½¿å…¶ç”Ÿå‘½å‘¨æœŸä¸è§†å›¾ä¿æŒåŒå¹¶ä¸ä¸Šå±‚è§†å›¾åŒæ­¥ä¿¡æ¯ã€‚</p><h3 id="STEP-3-ç”¨-TextViewFinderWrapper-æ¥å¯»æ‰¾å¯¹åº”çš„-NSView-x2F-UIView"><a href="#STEP-3-ç”¨-TextViewFinderWrapper-æ¥å¯»æ‰¾å¯¹åº”çš„-NSView-x2F-UIView" class="headerlink" title="STEP 3: ç”¨ _TextViewFinderWrapper æ¥å¯»æ‰¾å¯¹åº”çš„ NSView &#x2F; UIView"></a>STEP 3: ç”¨ <code>_TextViewFinderWrapper</code> æ¥å¯»æ‰¾å¯¹åº”çš„ NSView &#x2F; UIView</h3><p><code>overlay</code> ç›¸å½“äº AppKit å’Œ UIKit ä¸­çš„ <code>addSubview</code>ï¼Œ</p><p>ä½¿ç”¨ <code>superview</code> å³å¯æ‰¾åˆ°ä¸Šå±‚çš„ ViewRepresentation ä¹Ÿå°±æ˜¯ SwiftUI Viewï¼Œ</p><p>å¯ä»¥å†™ä¸€ä¸ª <code>ViewModifier</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">struct</span> <span class="title class_">_SelectionRangeModifier</span>: <span class="title class_">ViewModifier</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: <span class="type">Content</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        content</span><br><span class="line">            .overlay(_TextViewFinderWrapper(textView: <span class="variable">$textView</span>).frame(width: <span class="number">0</span>, height: <span class="number">0</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="STEP-4-å®ç°-selectionRange-çš„åŒå‘ç»‘å®š"><a href="#STEP-4-å®ç°-selectionRange-çš„åŒå‘ç»‘å®š" class="headerlink" title="STEP 4: å®ç° selectionRange çš„åŒå‘ç»‘å®š"></a>STEP 4: å®ç° <code>selectionRange</code> çš„åŒå‘ç»‘å®š</h3><p>å‘ä¸Šç»‘å®šï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.onReceive(</span><br><span class="line">    <span class="type">NotificationCenter</span>.default.publisher(for: <span class="type">TextView</span>.didChangeSelectionNotification, object: textView)</span><br><span class="line">) &#123; <span class="keyword">_</span> <span class="keyword">in</span></span><br><span class="line">   <span class="comment">// Selection Range did change.</span></span><br><span class="line">   <span class="comment">// Update selection range using `textView` instance.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘ä¸‹ç»‘å®šï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.task(id: range) &#123;</span><br><span class="line">   <span class="comment">// Selection range changed by SwiftUI State.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°è£…èµ·æ¥å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">struct</span> <span class="title class_">_SelectionRangeModifier</span>: <span class="title class_">ViewModifier</span> &#123;</span><br><span class="line">    <span class="meta">@Binding</span> <span class="keyword">var</span> range: <span class="type">NSRange</span></span><br><span class="line">    <span class="meta">@State</span> <span class="keyword">private</span> <span class="keyword">var</span> textView: <span class="type">TextView</span>?</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">body</span>(<span class="params">content</span>: <span class="type">Content</span>) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        content</span><br><span class="line">            .overlay(_TextViewFinderWrapper(textView: <span class="variable">$textView</span>).frame(width: <span class="number">0</span>, height: <span class="number">0</span>))</span><br><span class="line">            <span class="keyword">#if</span> os(macOS)</span><br><span class="line">            .onReceive(</span><br><span class="line">                <span class="type">NotificationCenter</span>.default.publisher(for: <span class="type">TextView</span>.didChangeSelectionNotification, object: textView)</span><br><span class="line">            ) &#123; <span class="keyword">_</span> <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">guard</span> <span class="keyword">let</span> textView <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">                range <span class="operator">=</span> textView.selectedRange()</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">#endif</span></span><br><span class="line">            .task(id: range) &#123;</span><br><span class="line">                <span class="keyword">let</span> newRange <span class="operator">=</span> range</span><br><span class="line">                <span class="keyword">#if</span> os(macOS)</span><br><span class="line">                textView<span class="operator">?</span>.setSelectedRange(newRange)</span><br><span class="line">                <span class="keyword">#else</span></span><br><span class="line">                textView<span class="operator">?</span>.selectedRange <span class="operator">=</span> newRange</span><br><span class="line">                <span class="keyword">#endif</span></span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="STEP-5-æ‰©å±•ä¸€ä¸‹-View"><a href="#STEP-5-æ‰©å±•ä¸€ä¸‹-View" class="headerlink" title="STEP 5: æ‰©å±•ä¸€ä¸‹ View"></a>STEP 5: æ‰©å±•ä¸€ä¸‹ View</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">View</span> &#123;</span><br><span class="line">    <span class="keyword">@available</span>(<span class="keyword">watchOS</span>, unavailable)</span><br><span class="line">    <span class="keyword">@available</span>(<span class="keyword">iOS</span> <span class="number">13.0</span>, <span class="keyword">macOS</span> <span class="number">10.15</span>, <span class="keyword">tvOS</span> <span class="number">13.0</span>, <span class="operator">*</span>)</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">selectionRange</span>(<span class="keyword">_</span> <span class="params">range</span>: <span class="type">Binding</span>&lt;<span class="type">NSRange</span>&gt;) -&gt; <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        modifier(_SelectionRangeModifier(range: range))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½å•¦ï¼Œæå®šï¼</p><h2 id="å°é—®é¢˜"><a href="#å°é—®é¢˜" class="headerlink" title="å°é—®é¢˜"></a>å°é—®é¢˜</h2><ul><li><p>æœ¬æ–¹æ³•å±äº Hackï¼Œå¾ˆæœ‰å¯èƒ½åœ¨æœªæ¥çš„ SwiftUI å¤§ç‰ˆæœ¬ä¸­å¤±æ•ˆï¼ˆå¦‚æœ SwiftUI ä¿®æ”¹äº† View Hierarchyï¼‰</p></li><li><p>æ–‡æœ¬æ¡†è¿˜æ˜¯å¯èƒ½ä¼šå‡ºç°é—ªçƒçš„é—®é¢˜ï¼Œæˆ‘å·²ç»å°½å¯èƒ½åœ°è§„é¿äº†ï¼Œä½†æ˜¯å¯èƒ½è¿˜æ˜¯ä¼šå‡ºç°â€¦ç›®å‰æ— è§£ã€‚</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ SwiftUI ä¸­ï¼Œæ²¡æœ‰æä¾›é»˜è®¤çš„ modifier æ¥ç›‘å¬ &lt;code&gt;TextView&lt;/code&gt; çš„ &lt;code&gt;selectionRange&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;p&gt;è¿™å¯¹äºæ–‡æœ¬ç¼–è¾‘ç±» app æ¥è¯´æ˜¯å¾ˆè‡´å‘½çš„ï¼Œå› ä¸ºæ— æ³•æ§åˆ¶å…‰æ ‡çš„ä½ç½®ï¼Œ&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¯ä»¥ä»å…¶ä»–çš„æ–‡ç« ä¸­æ‰¾åˆ°ä¸€äº›æ€è·¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://swiftui-lab.com/a-powerful-combo/&quot;&gt;The Power of the Hosting+Representable Combo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/siteline/SwiftUI-Introspect&quot;&gt;siteline&amp;#x2F;SwiftUI-Introspect&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯»æ‰¾ NSView &amp;#x2F; UIView çš„æ–¹æ³•æ¥æºäºï¼š&lt;a href=&quot;https://github.com/siteline/SwiftUI-Introspect&quot;&gt;siteline&amp;#x2F;SwiftUI-Introspect&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ¥ä»‹ç»ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥å®ç°å‡ºä»¥ä¸‹çš„ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; SwiftUI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Example&lt;/span&gt;: &lt;span class=&quot;title class_&quot;&gt;View&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@State&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; selectionRange &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;NSRange&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@State&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; text &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; body: &lt;span class=&quot;keyword&quot;&gt;some&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;View&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;type&quot;&gt;TextEditor&lt;/span&gt;(text: &lt;span class=&quot;variable&quot;&gt;$text&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            .selectionRange(&lt;span class=&quot;variable&quot;&gt;$selectionRange&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="swiftui" scheme="https://liyanan2004.github.io/tags/swiftui/"/>
    
    <category term="swift" scheme="https://liyanan2004.github.io/tags/swift/"/>
    
  </entry>
  
  <entry>
    <title>MarkdownView ä» 0 åˆ° 1 â€”â€” å›é¡¾æ•´æ¡æ—¶é—´çº¿</title>
    <link href="https://liyanan2004.github.io/the-road-of-markdown-view/"/>
    <id>https://liyanan2004.github.io/the-road-of-markdown-view/</id>
    <published>2023-02-02T11:45:04.500Z</published>
    <updated>2023-02-19T05:21:10.188Z</updated>
    
    <content type="html"><![CDATA[<p>ç†Ÿæ‚‰æˆ‘çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œæˆ‘ä¸€ç›´åœ¨å¼€å‘ä¸€ä¸ªæ¡†æ¶ï¼Œ</p><p>ç”¨äºåœ¨ SwiftUI ä¸­ä»¥åŸç”Ÿçš„æ–¹å¼æ¥æ¸²æŸ“ Markdown æ–‡æœ¬ã€‚</p><p>P.S. è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯åœ¨æˆ‘åšçš„ç¼–è¾‘å™¨ä¸­å®Œæˆçš„ã€‚</p><p>æ—©æ™¨å‘å¸ƒäº† <a href="https://github.com/LiYanan2004/MarkdownView/releases">MarkdownView</a> çš„ <code>1.0.0-rc</code>ï¼Œä¹Ÿå°±æ˜¯æ­£å¼ç‰ˆçš„å€™é€‰ç‰ˆæœ¬ï¼Œ</p><p>å†™è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯æƒ³å›é¡¾å’Œæ€»ç»“ä¸€è·¯è¿‡æ¥çš„æŠ€æœ¯ç‚¹å’Œä¸€äº›è§£å†³æ–¹æ¡ˆã€‚</p><span id="more"></span><h2 id="ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªé¡¹ç›®"><a href="#ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªé¡¹ç›®" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªé¡¹ç›®"></a>ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªé¡¹ç›®</h2><h3 id="æ— å¥ˆå’Œæœºé‡"><a href="#æ— å¥ˆå’Œæœºé‡" class="headerlink" title="æ— å¥ˆå’Œæœºé‡"></a>æ— å¥ˆå’Œæœºé‡</h3><p>å…¶å®ï¼Œå¾ˆæ—©ä¹‹å‰ï¼Œæˆ‘å°±æƒ³åšä¸€æ¬¾ç¬”è®°åº”ç”¨ï¼Œ</p><p>å†™å­—åŠŸèƒ½ç”¨ PencilKit èƒ½å®ç°ï¼Œä½†æ˜¯æ€»ä¸èƒ½åªæ”¯æŒæ‰‹å†™å§â€¦</p><p>ä½†æ˜¯æ‰¾äº†ä¸€åœˆå¼€æºç¤¾åŒºéƒ½æ‰¾ä¸åˆ°å¾ˆå¥½çš„ç”¨äºæ¸²æŸ“ Markdown æ–‡æœ¬çš„ç»„ä»¶ï¼Œ</p><p>æ°å¥½åœ¨æˆ‘é«˜è€ƒå®Œä¹‹åï¼Œå‘ç°è‹¹æœå¼€æºäº†è‡ªå·±çš„ <code>swift-markdown</code> ç”¨äºå¤„ç† Markdown æ–‡æœ¬çš„è§£æã€‚</p><h3 id="Typora-ç»“æŸå…¬æµ‹ï¼Œå¼€å§‹æ”¶è´¹"><a href="#Typora-ç»“æŸå…¬æµ‹ï¼Œå¼€å§‹æ”¶è´¹" class="headerlink" title="Typora ç»“æŸå…¬æµ‹ï¼Œå¼€å§‹æ”¶è´¹"></a>Typora ç»“æŸå…¬æµ‹ï¼Œå¼€å§‹æ”¶è´¹</h3><p>å…¶å®æ˜¯æœ‰æ›¿ä»£çš„ <code>Notion</code>ï¼Œä½†æ˜¯ Web å¥—å£³çš„ app å¤šå°‘è¿˜æœ‰ç‚¹ä¸å–œæ¬¢ï¼Œè€Œä¸”è®¿é—®ä¹Ÿä¸æ˜¯å¾ˆç¨³å®šã€‚</p><h2 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h2><p>å…ˆæ¥è¯´è¯´ <code>swift-markdown</code> è§£æå¥½çš„æ•°æ®æ˜¯å¦‚ä½•å˜æˆæœ€ç»ˆçš„ <code>View</code> çš„ï¼š</p><ol><li>åŸå§‹æ–‡æœ¬ç”± <code>swift-markdown</code> è§£æç”Ÿæˆæ–‡æ¡£æ ‘</li><li>å¯¹åº”æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªåŸç”Ÿçš„ <code>SwiftUI View</code></li><li>ç”¨åˆé€‚çš„æ–¹æ³•å°†æ‰€æœ‰èŠ‚ç‚¹çš„ <code>View</code> åˆå¹¶åœ¨ä¸€èµ·æ‰“åŒ…</li><li>ç”± SwiftUI è®¡ç®—å’Œæ˜¾ç¤º</li></ol><p>åœ¨ç¬¬äºŒæ­¥ä¸­è¿”å›çš„æ¯ä¸€ä¸ªå­ <code>View</code> éƒ½éœ€è¦æ˜¯ç›¸åŒç±»å‹çš„ï¼Œä¸è¿‡å¥½åœ¨ SwiftUI ç»™æˆ‘ä»¬æä¾›äº† <code>AnyView</code> æ¥æ“¦é™¤ç±»å‹ã€‚</p><p><img src="/img/the-road-of-markdown-view/markdown-view-workflow.jpeg" alt="åŸç†å›¾ç¤º"></p><h2 id="å¸ƒå±€é—®é¢˜"><a href="#å¸ƒå±€é—®é¢˜" class="headerlink" title="å¸ƒå±€é—®é¢˜"></a>å¸ƒå±€é—®é¢˜</h2><p>ç”±äºæ–‡æ¡£æ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ª <code>AnyView</code>ï¼Œé¢ä¸´ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>å¦‚ä½•æ§åˆ¶æ¯ä¸€ä¸ªè§†å›¾çš„å¤§å°</li><li>å¦‚ä½•åŠ¨æ€çš„ä½¿ç”¨ <code>HStack</code> å’Œ <code>VStack</code> æ¥æ”¾ç½®æ¨ªç«–ä¸¤ä¸ªæ–¹å‘</li></ol><p>å¹¸è¿çš„æ˜¯ï¼Œåœ¨ WWDC 22 ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ª <code>Layout</code>ï¼Œ</p><p>ä½†ä¸å¹¸çš„æ˜¯ï¼Œ<code>Layout Protocol</code> åªæ”¯æŒæœ€æ–°çš„ç³»ç»Ÿï¼Œæ— æ³•å‘åå…¼å®¹ã€‚</p><h3 id="æ‹†åˆ†æ–‡æœ¬ï¼Œå†ç»“åˆ"><a href="#æ‹†åˆ†æ–‡æœ¬ï¼Œå†ç»“åˆ" class="headerlink" title="æ‹†åˆ†æ–‡æœ¬ï¼Œå†ç»“åˆ"></a>æ‹†åˆ†æ–‡æœ¬ï¼Œå†ç»“åˆ</h3><p>é™¤äº†å›¾ç‰‡ä¹‹å¤–çš„å†…å®¹ï¼Œå½’æ ¹ç»“åº•éƒ½æ˜¯æ–‡æœ¬ï¼Œ</p><p>å› æ­¤å°†æ–‡æœ¬æ‹†åˆ†æˆå°½å¯èƒ½å°çš„éƒ¨åˆ†ï¼ˆä¸€ä¸ªå•è¯æˆ–è€…ä¸€ä¸ªè¯ç»„ï¼‰</p><p>é…åˆè‡ªå®šä¹‰çš„çµæ´»å¸ƒå±€ï¼ˆ<code>FlowLayout</code>ï¼‰æ¥å®ç°å¸ƒå±€ã€‚</p><p>ä½†æ˜¯è¿™æ ·çš„æ–¹æ¡ˆå±äºåœ¨è¿è¡Œæ—¶æ‹†åˆ†ï¼ˆæ–‡æœ¬ï¼‰åˆåˆå¹¶ï¼ˆè§†å›¾ï¼‰ï¼Œéå¸¸æ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚</p><p>ä¹‹å‰çš„ <a href="/markdownview-performance-optimization/" title="è®°å½•ä¸‹ MarkdownView çš„æ€§èƒ½ä¼˜åŒ–">è®°å½•ä¸‹ MarkdownView çš„æ€§èƒ½ä¼˜åŒ–</a> ä¸­æåˆ°çš„è§£å†³æ–¹æ¡ˆåªèƒ½è§£å†³å¯åŠ¨æ—¶çš„å¡é¡¿å’Œè¿ç»­è¾“å…¥æ—¶çš„å¡é¡¿ï¼Œ</p><p>è€Œå¯¹äºå†…å®¹çš„åŠ è½½é€Ÿåº¦æ²¡æœ‰å¸®åŠ©ï¼ŒåŒæ—¶å¤šä¸ªå¼‚æ­¥æ“ä½œä¹Ÿéœ€è¦ç­‰å¾… CPU ç©ºé—²æ—¶æ‰èƒ½è¢«æ´¾å‘ä¸Šå»ã€‚</p><p>æœ€å…³é”®çš„æ˜¯ï¼ŒæŒ‰ç…§è¿™æ ·çš„æ¨¡å¼ç»§ç»­ä¸‹å»ï¼Œæ–‡æœ¬å§‹ç»ˆæ— æ³•é€‰æ‹©å’Œå¤åˆ¶ã€‚</p><hr><h3 id="å°†è§†å›¾æš‚å­˜ï¼Œåˆå¹¶ç›¸åŒçš„ç±»å‹"><a href="#å°†è§†å›¾æš‚å­˜ï¼Œåˆå¹¶ç›¸åŒçš„ç±»å‹" class="headerlink" title="å°†è§†å›¾æš‚å­˜ï¼Œåˆå¹¶ç›¸åŒçš„ç±»å‹"></a>å°†è§†å›¾æš‚å­˜ï¼Œåˆå¹¶ç›¸åŒçš„ç±»å‹</h3><p>ä¸»è¦æƒ³è¦è§£å†³çš„é—®é¢˜æ˜¯ <em>åŠ è½½æ—¶é—´é•¿</em> å’Œ <em>æ— æ³•å¤åˆ¶</em> è¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p><p>åŠ è½½æ—¶é—´é•¿ä¸»è¦æ˜¯å› ä¸ºé¢‘ç¹åœ°æ–‡æœ¬æ‹†åˆ†å’Œå¤§é‡çš„å­è§†å›¾çš„ä½ç½®å¤§å°è®¡ç®—å¯¼è‡´çš„ï¼Œ</p><p>è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ SwiftUI ä¸­çš„ <code>Text</code> åšæ‹¼æ¥ï¼ŒåŒæ—¶è§£å†³äº†æ— æ³•å¤åˆ¶çš„é—®é¢˜ï¼Œé¡ºä¾¿å¯ä»¥å‘åå…¼å®¹äº†ä¸€ä¸ªå¤§ç‰ˆæœ¬ã€‚</p><p>è¿™ä¸€å—çš„çµæ„Ÿæ˜¯å—åˆ° <a href="https://www.fatbobman.com/posts/mixing_text_and_graphics_with_Text_in_SwiftUI">åœ¨ SwiftUI ä¸­ç”¨ Text å®ç°å›¾æ–‡æ··æ’</a> çš„å¯å‘ã€‚</p><p>åˆ›å»ºäº†ä¸€ä¸ª <code>ViewContent</code> ç”¨æ¥æš‚å­˜ç”±èŠ‚ç‚¹ç”Ÿæˆçš„è§†å›¾ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ViewContent</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> text: <span class="type">Text</span></span><br><span class="line">    <span class="keyword">var</span> view: <span class="type">AnyView</span></span><br><span class="line">    <span class="keyword">var</span> type: <span class="type">ContentType</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">enum</span> <span class="title class_">ContentType</span>: <span class="title class_">String</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> text, view</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä¼ å…¥å¤šä¸ª <code>ViewContent</code> çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥å¹¶åˆå¹¶ç›¸é‚»çš„ã€åŒç±»å‹çš„ <code>ViewContent</code>ï¼Œ</p><p>åé¢å†ç”¨ <code>VStack</code> æŠŠä¸€ä¸ªä¸ªçš„ paragraph ä¸²èµ·æ¥å³å¯å¾—åˆ°å®Œæ•´çš„è§†å›¾ï¼Œ</p><p>æµ‹è¯•äº†ä¸‹ï¼Œ<em>åŒä¸€æ–‡æ¡£çš„åŠ è½½é€Ÿåº¦æå‡äº†çº¦ 5x</em></p><h2 id="å›¾ç‰‡å’Œè‡ªå®šä¹‰å—çš„æ”¯æŒ"><a href="#å›¾ç‰‡å’Œè‡ªå®šä¹‰å—çš„æ”¯æŒ" class="headerlink" title="å›¾ç‰‡å’Œè‡ªå®šä¹‰å—çš„æ”¯æŒ"></a>å›¾ç‰‡å’Œè‡ªå®šä¹‰å—çš„æ”¯æŒ</h2><p>é€šè¿‡ <code>ImageDisplayable</code> å’Œ <code>BlockDirectiveDisplayable</code>ï¼Œå…è®¸å¼€å‘è€…è‡ªå·±å®šä¹‰å¦‚ä½•æ˜¾ç¤ºç›¸å…³å†…å®¹ï¼Œ</p><p><strong>å­¦ä¹ äº†<a href="../tags/%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4">ç±»å‹æ“¦é™¤</a>çš„å®ç°æ–¹æ¡ˆ</strong>ã€‚</p><h2 id="AdaptiveGrid"><a href="#AdaptiveGrid" class="headerlink" title="AdaptiveGrid"></a>AdaptiveGrid</h2><p>ç”±äºå‘åå…¼å®¹äº†ä¸€ä¸ªå¤§ç‰ˆæœ¬å¯¼è‡´æ— æ³•ç›´æ¥ä½¿ç”¨æ–°çš„ Grid ç»„ä»¶ï¼Œ</p><p>å› æ­¤ï¼Œè¿˜éœ€å¯¹è€ç‰ˆæœ¬ç³»ç»Ÿæä¾›ä¸€ä¸ªç±»ä¼¼çš„è§†å›¾ï¼Œ</p><p>äºæ˜¯å†™äº†ä¸€ä¸ª <code>AdaptiveGrid</code>ï¼Œå…¶è¡¨ç°è¡Œä¸ºä¸ <code>Grid</code> å‡ ä¹ä¸€è‡´ã€‚</p><p>åé¢æˆ‘åº”è¯¥ä¼šå†å†™ä¸€ç¯‡åšå®¢æ¥è¯´è¯´å…¶èƒŒåçš„å®ç°åŸç†ã€‚</p><p><img src="/img/the-road-of-markdown-view/AdaptiveGrid-tweet.jpeg"></p><p><strong>å­¦ä¹ äº† <code>@resultBuilder</code> çš„æ„å»º</strong>ï¼Œåœ¨è¿™é‡Œå†æ¬¡æ„Ÿè°¢è‚˜å­å“¥çš„ä¸¤ç¯‡åšå®¢ï¼š</p><ol><li><a href="https://www.fatbobman.com/posts/viewBuilder1/">ViewBuilder ç ”ç©¶ï¼ˆä¸Šï¼‰â€”â€” æŒæ¡ Result builders</a></li><li><a href="https://www.fatbobman.com/posts/viewBuilder2/">ViewBuilder ç ”ç©¶ï¼ˆä¸‹ï¼‰ â€”â€” ä»æ¨¡ä»¿ä¸­å­¦ä¹ </a></li></ol><h2 id="SVG-å¢å¼º"><a href="#SVG-å¢å¼º" class="headerlink" title="SVG å¢å¼º"></a>SVG å¢å¼º</h2><p>ä¸€ç›´ä»¥æ¥ï¼ŒSVG çš„æ¸²æŸ“éƒ½æ˜¯ç”± <code>SVGKit</code> æ¥å¤„ç†çš„ï¼Œ</p><p>ä½†æ˜¯é—®é¢˜æ˜¯ï¼Œæœ‰ç¼–è¯‘è­¦å‘Šã€ Package è¿‡äºè‡ƒè‚¿ ä¸” éƒ¨åˆ†SVGæ— æ³•æ­£ç¡®æ¸²æŸ“ã€‚</p><p>æœ€è¿‘æ”¹ç”¨äº†åŸç”Ÿçš„ <code>WKWebView</code> æ¥æ¸²æŸ“ SVGï¼ˆç›¸å½“äºä¸€ä¸ªç½‘é¡µï¼‰</p><p><img src="/img/the-road-of-markdown-view/SVG-tweet.jpeg"></p><p><strong>å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ JS æ¥è·å–ç½‘é¡µå…ƒç´ çš„å¤§å°</strong>ï¼Œä»¥æ­¤æ¥ä½œä¸ºæœ€ç»ˆæ•´ä¸ª SVG çš„å¤§å°ï¼Œ</p><p>å¹¶ä¸”èƒ½å¤Ÿæ ¹æ®å¯ç”¨å®½åº¦æ¥è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦å¯ç”¨æ»šåŠ¨æ¡ç­‰ç­‰â€¦</p><p>å…·ä½“çš„å®ç°å¯ä»¥åœ¨ä»£ç ä¸­æ‰¾åˆ°ï¼Œæˆ‘ä¸åœ¨åšè¿‡å¤šçš„èµ˜è¿°ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é“è·¯ä¸æ˜¯ä¸€å¸†é£é¡ºçš„ï¼Œæ€»è¦åœ¨è·Œè·Œæ’æ’ä¸­æˆé•¿ï¼Œ</p><p>ä½†åº†å¹¸çš„æ˜¯ï¼Œè¿™ä¸ªè‡ªä¸»é¡¹ç›®ï¼Œ<em>æˆ‘åšå‡ºäº†è‡ªå·±æ»¡æ„çš„æ ·å­</em>ï¼Œè€¶ï½</p><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/LiYanan2004/MarkdownView">Github</a> OR <a href="https://swiftpackageindex.com/LiYanan2004/MarkdownView">Swift Package Index</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç†Ÿæ‚‰æˆ‘çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œæˆ‘ä¸€ç›´åœ¨å¼€å‘ä¸€ä¸ªæ¡†æ¶ï¼Œ&lt;/p&gt;
&lt;p&gt;ç”¨äºåœ¨ SwiftUI ä¸­ä»¥åŸç”Ÿçš„æ–¹å¼æ¥æ¸²æŸ“ Markdown æ–‡æœ¬ã€‚&lt;/p&gt;
&lt;p&gt;P.S. è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯åœ¨æˆ‘åšçš„ç¼–è¾‘å™¨ä¸­å®Œæˆçš„ã€‚&lt;/p&gt;
&lt;p&gt;æ—©æ™¨å‘å¸ƒäº† &lt;a href=&quot;https://github.com/LiYanan2004/MarkdownView/releases&quot;&gt;MarkdownView&lt;/a&gt; çš„ &lt;code&gt;1.0.0-rc&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯æ­£å¼ç‰ˆçš„å€™é€‰ç‰ˆæœ¬ï¼Œ&lt;/p&gt;
&lt;p&gt;å†™è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯æƒ³å›é¡¾å’Œæ€»ç»“ä¸€è·¯è¿‡æ¥çš„æŠ€æœ¯ç‚¹å’Œä¸€äº›è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="swift" scheme="https://liyanan2004.github.io/tags/swift/"/>
    
    <category term="MarkdownView" scheme="https://liyanan2004.github.io/tags/MarkdownView/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ Mac ä¸Šæ›´å®‰å…¨åœ°ä½¿ç”¨ EasyConnect</title>
    <link href="https://liyanan2004.github.io/use-easy-connect-safely-on-your-mac/"/>
    <id>https://liyanan2004.github.io/use-easy-connect-safely-on-your-mac/</id>
    <published>2023-01-17T10:16:52.408Z</published>
    <updated>2023-01-17T12:48:52.145Z</updated>
    
    <content type="html"><![CDATA[<p>èµ·å› è¿˜æ˜¯å¶ç„¶åœ¨ B ç«™åˆ·åˆ°è¿™ä¹ˆä¸€ä¸ªè§†é¢‘ï¼š</p><iframe src="//player.bilibili.com/player.html?aid=435357348&bvid=BV163411Z7BD&cid=967016106&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><p>å“Ÿï¼ŒåŸæ¥æ˜¯ä¸ªæµæ°“è½¯ä»¶å•Šï¼Œè‰ï¼ï¼ï¼ï¼ï¼ï¼</p><span id="more"></span><p>å®‰è£…å®ƒï¼Œä¸»è¦æ˜¯å› ä¸ºå­¦æ ¡å†…ç½‘è¦ç”¨ VPN æ‰èƒ½ç™»é™†ï¼Œ</p><p>èµ·åˆå®‰è£…å®Œæˆ‘å°±å‘ç°æœ‰åå°æƒé™çš„å¼€å…³ï¼Œ</p><p>æˆ‘ä¹Ÿå°è¯•å…³æ‰äº†ï¼Œä½†æ˜¯æ²¡æ³•è¿æ¥äº†ï¼ˆè¡¨ç°ä¸ºä¸€ç›´åœ¨åˆå§‹åŒ–ï¼‰</p><p><img src="/img/use-easy-connect-safely-on-your-mac/initializing.jpeg"></p><h2 id="ä¸ºä»€ä¹ˆè¯´ä»–æµæ°“"><a href="#ä¸ºä»€ä¹ˆè¯´ä»–æµæ°“" class="headerlink" title="ä¸ºä»€ä¹ˆè¯´ä»–æµæ°“"></a>ä¸ºä»€ä¹ˆè¯´ä»–æµæ°“</h2><h3 id="åå°æŒç»­æ´»åŠ¨"><a href="#åå°æŒç»­æ´»åŠ¨" class="headerlink" title="åå°æŒç»­æ´»åŠ¨"></a>åå°æŒç»­æ´»åŠ¨</h3><p>æ‰“å¼€â€œæ´»åŠ¨ç›‘è§†å™¨â€ï¼ˆWindows ä¸Šæ˜¯ â€œä»»åŠ¡ç®¡ç†å™¨â€ï¼‰ï¼Œ</p><p>å°±èƒ½æ‰¾åˆ°åä¸º <code>EasyMonitor</code> å’Œ <code>ECAgent</code> çš„ä¸¤ä¸ªè¿›ç¨‹ï¼Œå…³é”®æ˜¯ä»¥ <code>root</code> æƒé™è¿è¡Œï¼Œ</p><p><img src="/img/use-easy-connect-safely-on-your-mac/easy-monitor.jpeg"><br><img src="/img/use-easy-connect-safely-on-your-mac/ecagent.jpeg"></p><p>æ„å‘³ç€ï¼Œä»–æƒ³å¹²å˜›å°±å¹²å˜›ï¼Œä¸éœ€è¦æˆ‘ä»»ä½•æˆæƒï¼Œæˆ‘ä¹Ÿæµ‘ç„¶ä¸çŸ¥ã€‚</p><p>è§‚å¯Ÿäº†ä¸€ä¼šå„¿ï¼ŒCPU ä¸€ç›´éƒ½æœ‰ 0.3 - 0.5 çš„å ç”¨ï¼Œ</p><p>æ„å‘³ç€ï¼Œæœ‰å°‘é‡ä»£ç åœ¨æŒç»­è¿è¡Œï¼Œåœ¨å¹²å˜›ï¼Œä¸çŸ¥é“ã€‚</p><p>å°è¯•å…³æ‰å®ƒï¼Ÿå‘µå‘µï¼Œå¤ªå°çœ‹å®ƒäº†ã€‚<strong>å…³äº†åˆè‡ªåŠ¨å¯åŠ¨äº†ã€‚</strong></p><h3 id="å®‰è£…äº†ç³»ç»Ÿæ ¹è¯ä¹¦"><a href="#å®‰è£…äº†ç³»ç»Ÿæ ¹è¯ä¹¦" class="headerlink" title="å®‰è£…äº†ç³»ç»Ÿæ ¹è¯ä¹¦"></a>å®‰è£…äº†ç³»ç»Ÿæ ¹è¯ä¹¦</h3><p>æ‰“å¼€ <code>é’¥åŒ™ä¸²è®¿é—® - ç³»ç»Ÿé’¥åŒ™ä¸² - ç³»ç»Ÿ - è¯ä¹¦</code>ï¼Œæœç´¢ <code>Sangfor</code>ï¼Œ</p><p>å°±èƒ½çœ‹åˆ°ä¸€ä¸ª <code>è‡ªå·±é¢ç»™è‡ªå·±</code> çš„ä¸€ä¸ªè¯ä¹¦ï¼Œåˆ° 2117 å¹´è¿‡æœŸâ€¦</p><p><img src="/img/use-easy-connect-safely-on-your-mac/self-given-cert.png"></p><p>ç†è®ºä¸Šè¿™æ ·å¯ä»¥åŠ«æŒ HTTPS æ´»åŠ¨ã€‚</p><blockquote><p>å¼•ç”¨ <a href="https://soulike.tech/article/64">åœ¨ macOS ä¸Šå®‰å…¨ä½¿ç”¨ EasyConnect</a> çš„è¯´æ³•ï¼š</p><p>ä»¥ root æƒé™å¸¸é©»è¿›ç¨‹ï¼Œæ„å‘³ç€è¿™äº›è¿›ç¨‹å¯ä»¥è¯»å–å’Œå†™å…¥ä»»ä½•ä¸œè¥¿ï¼›</p><p>å®‰è£…æ ¹è¯ä¹¦ï¼Œæ„å‘³ç€å¯ä»¥ç›´æ¥è¿›è¡Œä¸­é—´äººæ”»å‡»ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦è§£å†³è¿™äº›é—®é¢˜ã€‚</p></blockquote><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>å…·ä½“æ–¹æ³•å¯ä»¥å‚è€ƒ <a href="https://soulike.tech/article/64">åœ¨ macOS ä¸Šå®‰å…¨ä½¿ç”¨ EasyConnect</a></p><h3 id="å…³é—­è‡ªå¯åŠ¨-å’Œ-åå°é©»ç•™"><a href="#å…³é—­è‡ªå¯åŠ¨-å’Œ-åå°é©»ç•™" class="headerlink" title="å…³é—­è‡ªå¯åŠ¨ å’Œ åå°é©»ç•™"></a>å…³é—­è‡ªå¯åŠ¨ å’Œ åå°é©»ç•™</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br><span class="line"><span class="built_in">rm</span> -r -f /Library/LaunchDaemons/com.sangfor.EasyMonitor.plist</span><br><span class="line"><span class="built_in">rm</span> -r -f /Library/LaunchAgents/com.sangfor.ECAgentProxy.plist</span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šä»£ç é€‚ç”¨äº Mac</p></blockquote><h3 id="é‡å¯ç”µè„‘"><a href="#é‡å¯ç”µè„‘" class="headerlink" title="é‡å¯ç”µè„‘"></a>é‡å¯ç”µè„‘</h3><p>ä¸€å®šè¦é‡å¯â€¼ï¸å› ä¸ºç°åœ¨å®ƒè¿˜æœ‰åå°é©»ç•™çš„æƒé™â€¼ï¸</p><h3 id="åˆ é™¤æ ¹è¯ä¹¦"><a href="#åˆ é™¤æ ¹è¯ä¹¦" class="headerlink" title="åˆ é™¤æ ¹è¯ä¹¦"></a>åˆ é™¤æ ¹è¯ä¹¦</h3><p>åœ¨ <code>é’¥åŒ™ä¸²è®¿é—® - ç³»ç»Ÿé’¥åŒ™ä¸² - ç³»ç»Ÿ - è¯ä¹¦</code> ä¸‹æœç´¢ <code>Sangfor</code>ï¼Œåˆ é™¤å¯¹åº”çš„æ‰€æœ‰è¯ä¹¦ã€‚</p><hr><p>åˆ°æ­¤ï¼Œ<strong>å¼€æœºè‡ªå¯åŠ¨</strong> å’Œ <strong>åå°é©»ç•™</strong> çš„é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯ EasyConnect ä¹Ÿå½»åº•ç”¨ä¸äº†äº†ï¼Œ</p><p>å¯èƒ½ä¼šå‡ºç° â€œä¸€ç›´åˆå§‹åŒ–ä¸­â€¦â€ çš„é—®é¢˜ã€‚</p><h3 id="è„šæœ¬é…ç½®"><a href="#è„šæœ¬é…ç½®" class="headerlink" title="è„šæœ¬é…ç½®"></a>è„šæœ¬é…ç½®</h3><p>ä¸Šé¢é‚£ä¸ªå‚è€ƒé“¾æ¥é‡Œé¢ç»™å‡ºäº†å…·ä½“è„šæœ¬ï¼Œæœ‰æ‰“å¼€å’Œå…³é—­ä¸¤ä¸ªï¼Œ</p><p>æˆ‘å°†ä»–ä»¬ç»Ÿä¸€äº†ï¼Œ<a href="/assets/easyconnect">ç‚¹è¿™é‡Œä¸‹è½½</a></p><p>è¿™æ˜¯ä¸€ä¸ªæ²¡æœ‰æ‰©å±•åçš„æ–‡ä»¶ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å°±èƒ½çœ‹åˆ° bash å‘½ä»¤ã€‚</p><h4 id="ä¸ºè„šæœ¬æ·»åŠ è¿è¡Œæƒé™"><a href="#ä¸ºè„šæœ¬æ·»åŠ è¿è¡Œæƒé™" class="headerlink" title="ä¸ºè„šæœ¬æ·»åŠ è¿è¡Œæƒé™"></a>ä¸ºè„šæœ¬æ·»åŠ è¿è¡Œæƒé™</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x &lt;easyconnect æ–‡ä»¶è·¯å¾„&gt;</span><br></pre></td></tr></table></figure><blockquote><p>å›¾æ ‡å˜æˆä¸€ä¸ªé»‘è‰²çš„æ¡†æ¡†ï¼Œé‡Œé¢å†™ç€ <code>exec</code> å°±å¯¹äº†ã€‚</p></blockquote><h4 id="å¯¼å…¥æˆ‘çš„è„šæœ¬"><a href="#å¯¼å…¥æˆ‘çš„è„šæœ¬" class="headerlink" title="å¯¼å…¥æˆ‘çš„è„šæœ¬"></a>å¯¼å…¥æˆ‘çš„è„šæœ¬</h4><p>æŠŠ <code>easyconnect</code> æ”¾åˆ° <code>/usr/local/bin</code> æ–‡ä»¶å¤¹ä¸‹ã€‚</p><blockquote><p>è¿™ä¸ªç›®å½•å¯èƒ½éœ€è¦åœ¨è®¿è¾¾ä¸­æŒ‰ <kbd>Command</kdb> + <kbd>Shift</kdb> + <kbd>G</kdb> åè¾“å…¥ã€‚<br><img src="/img/use-easy-connect-safely-on-your-mac/go-to-bash-path.jpeg"></p></blockquote><h3 id="ä¸€åˆ‡å°±ç»ª"><a href="#ä¸€åˆ‡å°±ç»ª" class="headerlink" title="ä¸€åˆ‡å°±ç»ª"></a>ä¸€åˆ‡å°±ç»ª</h3><h4 id="å®‰å…¨åœ°å¯åŠ¨"><a href="#å®‰å…¨åœ°å¯åŠ¨" class="headerlink" title="å®‰å…¨åœ°å¯åŠ¨"></a>å®‰å…¨åœ°å¯åŠ¨</h4><ul><li>ä½¿ç”¨ EasyConnect çš„æ—¶å€™ï¼Œåªéœ€åœ¨ç»ˆç«¯è¾“å…¥è¿™è¡Œå‘½ä»¤ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">easyconnnect open</span><br></pre></td></tr></table></figure><article class="message is-danger">                <div class="message-body">            <p>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸è¦å…³é—­ç»ˆç«¯çª—å£â€¼ï¸</p>        </div>    </article><p>è™½ç„¶ä½†æ˜¯ï¼Œ</p><p>ä½ å¯èƒ½ä¼šå‘ç°ï¼Œ<code>EasyMonitor</code> å’Œ <code>ECAgent</code> ä»ç„¶æ˜¯ä»¥ root æƒé™è¿è¡Œçš„ï¼Œ</p><p>å› æ­¤è¿˜éœ€è¦æ‰‹åŠ¨å…³é—­ä»–ä»¬ã€‚</p><h4 id="å½»åº•åœ°å…³é—­"><a href="#å½»åº•åœ°å…³é—­" class="headerlink" title="å½»åº•åœ°å…³é—­"></a>å½»åº•åœ°å…³é—­</h4><ul><li>æ–­å¼€ VPN åï¼Œé™¤äº†é€€å‡º <code>EasyConnect</code> æœ¬èº«ï¼Œéœ€è¦æ‰§è¡Œè¿™è¡Œå‘½ä»¤ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">easyconnect <span class="built_in">kill</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ï¼Œåˆšæ‰å¯åŠ¨çš„ <code>EasyMonitor</code> å’Œ <code>ECAgent</code> å°±ä¼šè¢«å…³é—­ï¼Œ</p><p>ç”±äºæ²¡æœ‰åå°é©»ç•™çš„æƒé™ï¼Œä¹Ÿå°±ä¸ä¼šé‡æ–°å¯åŠ¨äº†ã€‚</p><p>æ•´ä¸ªæ–¹æ¡ˆæ˜¯<em>æŒ‰éœ€ä½¿ç”¨</em>çš„ç­–ç•¥ï¼Œå› ä¸º <code>EasyMonitor</code> å’Œ <code>ECAgent</code> æ˜¯åˆå§‹åŒ–æ—¶å¿…è¦çš„è¿›ç¨‹ã€‚</p><h4 id="å¿«æ·æŒ‡ä»¤"><a href="#å¿«æ·æŒ‡ä»¤" class="headerlink" title="å¿«æ·æŒ‡ä»¤"></a>å¿«æ·æŒ‡ä»¤</h4><p>å¦‚æœä½ è§‰å¾—æ•´ä¸ªè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œ</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘åˆ¶ä½œçš„å¿«æ·æŒ‡ä»¤ï¼š<a href="https://www.icloud.com/shortcuts/085b7d286bfe4c3b839b1deda8f3756c">Toggle Easy Connect</a> æ¥è®©è¿™ä¸€åˆ‡å˜å¾—è‡ªåŠ¨åŒ–ã€‚</p><p>å¿«æ·æŒ‡ä»¤ä¼šè‡ªåŠ¨æ£€æµ‹ <code>EasyMonitor</code> çš„è¿è¡Œæƒ…å†µæ¥ä½œä¸º <code>EasyConnect</code> æ˜¯å¦æ­£åœ¨è¿è¡Œçš„æ ‡å¿—ï¼Œ</p><p>è¿›è€Œè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å‘½ä»¤ã€‚</p><h3 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="headerlink" title="ç–‘éš¾è§£ç­”"></a>ç–‘éš¾è§£ç­”</h3><ul><li>ç™»é™†ä¹‹åé—ªé€€</li></ul><p>é‡å¯ç”µè„‘å³å¯ã€‚è¿™æ˜¯ç”±äºæŸäº›ç»„å»ºå¯åŠ¨äº†å¤šæ¬¡åäº§ç”Ÿäº†å†²çªã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;èµ·å› è¿˜æ˜¯å¶ç„¶åœ¨ B ç«™åˆ·åˆ°è¿™ä¹ˆä¸€ä¸ªè§†é¢‘ï¼š&lt;/p&gt;
&lt;iframe src=&quot;//player.bilibili.com/player.html?aid=435357348&amp;bvid=BV163411Z7BD&amp;cid=967016106&amp;page=1&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no&quot; framespacing=&quot;0&quot; allowfullscreen=&quot;true&quot;&gt; &lt;/iframe&gt;

&lt;p&gt;å“Ÿï¼ŒåŸæ¥æ˜¯ä¸ªæµæ°“è½¯ä»¶å•Šï¼Œè‰ï¼ï¼ï¼ï¼ï¼ï¼&lt;/p&gt;</summary>
    
    
    
    <category term="çæŠ˜è…¾" scheme="https://liyanan2004.github.io/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://liyanan2004.github.io/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    <category term="macOS" scheme="https://liyanan2004.github.io/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>ç†è§£å‡½æ•°ä¸­çš„æ³›å‹ &amp; æ³›å‹çº¦æŸ â€”â€” ç©¶ç«Ÿè°æ‰æ˜¯å…¥å£ï¼Ÿ</title>
    <link href="https://liyanan2004.github.io/generic-type-function-entry-point/"/>
    <id>https://liyanan2004.github.io/generic-type-function-entry-point/</id>
    <published>2023-01-16T14:04:04.767Z</published>
    <updated>2023-01-16T15:59:27.054Z</updated>
    
    <content type="html"><![CDATA[<p>ç»§ç»­æ¥ä¸Šç¯‡ï¼Œåšå®Œ <code>AnyMyCollection</code> ä¹‹åï¼Œ</p><p>æˆ‘åˆæ·»åŠ äº†ä¸€ä¸ªæ‰©å±•æ¥ä¿®æ”¹ <code>CustomCollection</code> åœ¨ç‰¹å®šç±»å‹ä¸‹çš„è¡Œä¸ºï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">CustomCollection</span> <span class="title class_">where</span> <span class="title class_">Element</span> == <span class="title class_">Int</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">allValues</span>() -&gt; [<span class="type">Element</span>] &#123;</span><br><span class="line">        [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ <code>Element</code> æ˜¯ <code>Int</code> æ—¶ï¼Œä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œç›´æ¥è¿”å› <code>[4, 5, 6]</code></p><p>ä½†æ˜¯ï¼Œè¿è¡Œæ˜¯å‘ç°äº†è¿™æ ·çš„ç°è±¡ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> collection <span class="operator">=</span> <span class="type">CustomCollection</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(collection.allValues()) <span class="comment">// [4, 5, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">any</span> <span class="operator">=</span> <span class="type">AnyMyCollection</span>(collection)</span><br><span class="line"><span class="built_in">print</span>(<span class="keyword">any</span>.allValues()) <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>åŒä¸€ä¸ªä¸œè¥¿ï¼Œæ“¦é™¤ç±»å‹ä¹‹åå°±ä¸å— <code>Element == Int</code> çº¦æŸäº†å˜›ï¼Ÿ<del>ä¸æ˜¯</del></p><p>å†™äº†ä¸€ä¸ªæœ€å°å¯å¤ç°é—®é¢˜çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> collection <span class="operator">=</span> <span class="type">CustomCollection</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">genericFuntion</span>&lt;<span class="type">C</span>: <span class="type">MyCollection</span>&gt;(<span class="keyword">_</span> <span class="params">base</span>: <span class="type">C</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(base.allValues()) <span class="comment">// [1, 2, 3]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">genericFuntion(collection)</span><br></pre></td></tr></table></figure><p>é‡æ–°æ¥çœ‹è¿™ä¸ªå‡½æ•°ï¼Œ</p><p><code>base</code> æ˜¯ä¸€ä¸ªç¬¦åˆ <code>MyCollection</code> åè®®çš„ç±»å‹ï¼Œ</p><p>ä»ç¨‹åºçš„è§’åº¦çœ‹ï¼Œè°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå®ƒä¼šå»æ‰¾ä¸€ä¸ªå…¥å£ï¼Œ</p><p>åœ¨è¿™é‡Œï¼Œå…¥å£å°±åº”è¯¥æ˜¯è®© <code>CustomCollection</code> ç¬¦åˆåè®®çš„é‚£ä¸ª <code>allValues()</code>ï¼Œ</p><p>è€Œ <code>Element == Int</code> çº¦æŸåˆ™å¯ä»¥ç†è§£ä¸ºï¼Œå½“ç¬¦åˆæ¡ä»¶æ—¶ï¼Œå¯¹ <code>allValues()</code> è¿›è¡Œé‡å†™ï¼Œ</p><p>è¿™é‡ŒçœŸæ­£è®© <code>CustomCollection</code> ç¬¦åˆ <code>MyCollection</code> çš„æ˜¯ä¸å—çº¦æŸçš„é‚£ä¸ªæ‰©å±•ä¸­çš„æ–¹æ³•ã€‚</p><blockquote><p>ä»”ç»†ä¸€æƒ³ï¼Œè²Œä¼¼å®é™…æ“ä½œä¸­è²Œä¼¼ä¸ä¼šè¿™æ ·â€œé‡å†™â€å‡½æ•°ï¼Œ</p><p>è€Œæ˜¯ä¼šå¯¹ä¸€äº›ç‰¹å®šçš„ç±»å‹å¢åŠ ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œ</p><p>æ¯”å¦‚ï¼šå¯¹äºç±»å‹æ˜¯ <code>Int</code> çš„ <code>Array</code> å¢åŠ æ±‚å¹³å‡å€¼çš„å‡½æ•°ç­‰ç­‰ã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç»§ç»­æ¥ä¸Šç¯‡ï¼Œåšå®Œ &lt;code&gt;AnyMyCollection&lt;/code&gt; ä¹‹åï¼Œ&lt;/p&gt;
&lt;p&gt;æˆ‘åˆæ·»åŠ äº†ä¸€ä¸ªæ‰©å±•æ¥ä¿®æ”¹ &lt;code&gt;CustomCollection&lt;/code&gt; åœ¨ç‰¹å®šç±»å‹ä¸‹çš„è¡Œä¸ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;CustomCollection&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Element&lt;/span&gt; == &lt;span class=&quot;title class_&quot;&gt;Int&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;allValues&lt;/span&gt;() -&amp;gt; [&lt;span class=&quot;type&quot;&gt;Element&lt;/span&gt;] &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;å½“ &lt;code&gt;Element&lt;/code&gt; æ˜¯ &lt;code&gt;Int&lt;/code&gt; æ—¶ï¼Œä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œç›´æ¥è¿”å› &lt;code&gt;[4, 5, 6]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œè¿è¡Œæ˜¯å‘ç°äº†è¿™æ ·çš„ç°è±¡ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; collection &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;CustomCollection&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(collection.allValues()) &lt;span class=&quot;comment&quot;&gt;// [4, 5, 6]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;any&lt;/span&gt; &lt;span class=&quot;operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;AnyMyCollection&lt;/span&gt;(collection)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;any&lt;/span&gt;.allValues()) &lt;span class=&quot;comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Swift" scheme="https://liyanan2004.github.io/tags/Swift/"/>
    
    <category term="æ³›å‹" scheme="https://liyanan2004.github.io/tags/%E6%B3%9B%E5%9E%8B/"/>
    
  </entry>
  
  <entry>
    <title>Swift ä¸­çš„ç±»å‹æ“¦é™¤ï¼ˆä¸‹ï¼‰â€”â€” ä»æ¨¡ä»¿ä¸­å­¦ä¹ </title>
    <link href="https://liyanan2004.github.io/type-erasure-in-swift-2/"/>
    <id>https://liyanan2004.github.io/type-erasure-in-swift-2/</id>
    <published>2023-01-16T03:57:30.567Z</published>
    <updated>2023-01-16T07:31:58.383Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬åˆæ­¥äº†è§£äº†ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ª Type Eraser ï¼Œ</p><p>ä¹Ÿåˆ†äº«äº†ä¸€ä¸ªç®€å•å®ç° Type Erasure çš„æ–¹æ¡ˆã€‚</p><p>ä¸ºäº†æ›´åŠ æ·±å…¥äº†è§£ç±»å‹æ“¦é™¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—æ¥çœ‹çœ‹ Swift è‡ªå¸¦çš„ä¸€äº› Type Eraser æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><p>ç›®æ ‡æ˜¯ï¼šç†è§£ä¸€ä¸‹å…¶åŸºæœ¬æ€è·¯ï¼Œå¹¶ä¸”ä»¿åˆ¶ä¸€ä¸ªå‡ºæ¥ã€‚</p><span id="more"></span><h2 id="åº•å±‚åŸç†"><a href="#åº•å±‚åŸç†" class="headerlink" title="åº•å±‚åŸç†"></a>åº•å±‚åŸç†</h2><p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬èšç„¦äºä¸€ä¸ª Type Eraserï¼š<code>AnyIterator</code></p><p>ä¸ºä»€ä¹ˆæ˜¯å®ƒå‘¢ï¼Ÿ</p><p>å› ä¸ºå®ƒå‡ºç°åœ¨<a href="https://github.com/apple/swift/blob/main/stdlib/public/core/ExistentialCollection.swift">æºç </a>çš„æœ€ä¸Šé¢ğŸ˜‚ï¼Œè€Œä¸”ä¸‹é¢çš„ <code>AnySequence</code> å’Œ <code>AnyCollection</code> éƒ½å¾—å›åˆ° <code>AnyIterator</code>ã€‚</p><p>å…ˆçœ‹æºç ï¼ˆæˆ‘è¿™é‡Œå»é™¤äº†æ³¨é‡Šå’Œä¸€äº›ä¸å¤ªé‡è¦çš„ä»£ç ï¼Œæ–¹ä¾¿å¤§å®¶é˜…è¯»ï¼‰ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@inline</span>(never)</span><br><span class="line"><span class="keyword">@usableFromInline</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">func</span> <span class="title function_">_abstract</span>(</span><br><span class="line">  <span class="params">file</span>: <span class="type">StaticString</span> <span class="operator">=</span> <span class="keyword">#file</span>,</span><br><span class="line">  <span class="params">line</span>: <span class="type">UInt</span> <span class="operator">=</span> <span class="keyword">#line</span></span><br><span class="line">) -&gt; <span class="type">Never</span> &#123;</span><br><span class="line">  <span class="built_in">fatalError</span>(<span class="string">&quot;Method must be overridden&quot;</span>, file: file, line: line)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">struct</span> <span class="title class_">AnyIterator</span>&lt;<span class="title class_">Element</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">@usableFromInline</span></span><br><span class="line">  <span class="keyword">internal</span> <span class="keyword">let</span> _box: _AnyIteratorBoxBase<span class="operator">&lt;</span><span class="type">Element</span><span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">@inlinable</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">init</span>&lt;<span class="type">I</span>: <span class="type">IteratorProtocol</span>&gt;(<span class="keyword">_</span> <span class="params">base</span>: <span class="type">I</span>) <span class="keyword">where</span> <span class="type">I</span>.<span class="type">Element</span> <span class="operator">==</span> <span class="type">Element</span> &#123;</span><br><span class="line">    <span class="keyword">self</span>._box <span class="operator">=</span> _IteratorBox(base)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">AnyIterator</span>: <span class="title class_">IteratorProtocol</span> &#123;</span><br><span class="line">  <span class="keyword">@inlinable</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">func</span> <span class="title function_">next</span>() -&gt; <span class="type">Element</span>? &#123;</span><br><span class="line">    <span class="keyword">return</span> _box.next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@_fixed_layout</span></span><br><span class="line"><span class="keyword">@usableFromInline</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title class_">_AnyIteratorBoxBase</span>&lt;<span class="title class_">Element</span>&gt;: <span class="title class_">IteratorProtocol</span> &#123;</span><br><span class="line">  <span class="keyword">@inlinable</span> <span class="comment">// FIXME(sil-serialize-all)</span></span><br><span class="line">  <span class="keyword">internal</span> <span class="keyword">init</span>() &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@inlinable</span> <span class="comment">// FIXME(sil-serialize-all)</span></span><br><span class="line">  <span class="keyword">deinit</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@inlinable</span> <span class="comment">// FIXME(sil-serialize-all)</span></span><br><span class="line">  <span class="keyword">internal</span> <span class="keyword">func</span> <span class="title function_">next</span>() -&gt; <span class="type">Element</span>? &#123; _abstract() &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@_fixed_layout</span></span><br><span class="line"><span class="keyword">@usableFromInline</span></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">_IteratorBox</span>&lt;<span class="title class_">Base</span>: <span class="title class_">IteratorProtocol</span>&gt;</span><br><span class="line">  : <span class="title class_">_AnyIteratorBoxBase</span>&lt;<span class="title class_">Base</span>.<span class="title class_">Element</span>&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@inlinable</span></span><br><span class="line">  <span class="keyword">internal</span> <span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">base</span>: <span class="type">Base</span>) &#123; <span class="keyword">self</span>._base <span class="operator">=</span> base &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">@inlinable</span> <span class="comment">// FIXME(sil-serialize-all)</span></span><br><span class="line">  <span class="keyword">deinit</span> &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">@inlinable</span></span><br><span class="line">  <span class="keyword">internal</span> <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">next</span>() -&gt; <span class="type">Base</span>.<span class="type">Element</span>? &#123; <span class="keyword">return</span> _base.next() &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">@usableFromInline</span></span><br><span class="line">  <span class="keyword">internal</span> <span class="keyword">var</span> _base: <span class="type">Base</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•´ç†ä¸€ä¸‹ï¼Œä¸€å…±ç”¨åˆ°ä¸¤ä¸ªç±»ï¼Œ<code>_AnyIteratorBoxBase</code>ï¼ˆåŸºç±»ï¼‰ å’Œ <code>_IteratorBox</code>ï¼ˆä¸­è½¬ç±»ï¼‰</p><p>åŸºç±»ç¬¦åˆåè®®ï¼Œå¹¶ä¸”ç”¨ä¸€äº›å ä½ç¬¦åšå¥½å¡«å……ï¼ˆéœ€è¦åœ¨ä¸­è½¬ç±»ä¸­é‡å†™è¿™äº›æ–¹æ³•ï¼‰</p><p>ä¸­è½¬ç±»ç»§æ‰¿è‡ªåŸºç±»ï¼Œå¹¶ä»å¤–éƒ¨æ¥æ”¶ä¸€ä¸ªç¬¦åˆåè®®çš„å®ä¾‹ï¼Œç”¨æ¥é‡å†™ï¼ˆè¦†ç›–ï¼‰åŸºç±»ä¸­çš„æ–¹æ³•å’Œå±æ€§ã€‚</p><p>æœ€åï¼Œç”¨ä¸€ä¸ªå¯¹å¤–çš„ Type Eraser å†åšä¸€æ¬¡ä¸­è½¬ã€‚</p><h2 id="ä»¿åˆ¶è¿‡ç¨‹ä¸­çš„ä¸€äº›å‘"><a href="#ä»¿åˆ¶è¿‡ç¨‹ä¸­çš„ä¸€äº›å‘" class="headerlink" title="ä»¿åˆ¶è¿‡ç¨‹ä¸­çš„ä¸€äº›å‘"></a>ä»¿åˆ¶è¿‡ç¨‹ä¸­çš„ä¸€äº›å‘</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: - Protocol and Type Eraser</span></span><br><span class="line"><span class="keyword">protocol</span> <span class="title class_">MyCollection</span> &#123; <span class="operator">â€¦</span> &#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">AnyMyCollection</span>&lt;<span class="title class_">Element</span>&gt; &#123; <span class="operator">â€¦</span> &#125;</span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">AnyMyCollection</span>: <span class="title class_">MyCollection</span> &#123; <span class="operator">â€¦</span> &#125;</span><br><span class="line"><span class="operator">â€¦</span></span><br><span class="line"><span class="comment">// MARK: - Custom Types</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Animals</span>: <span class="title class_">MyCollection</span> &#123; <span class="operator">â€¦</span> &#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Digits</span>: <span class="title class_">MyCollection</span> &#123; <span class="operator">â€¦</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: - Type Erasure</span></span><br><span class="line"><span class="comment">// âŒ Heterogeneous collection literal could only be inferred to &#x27;[Any]&#x27;; add explicit type annotation if this is intentional</span></span><br><span class="line"><span class="keyword">var</span> collections <span class="operator">=</span> [<span class="type">AnyMyCollection</span>(<span class="type">Animals</span>()), <span class="type">AnyMyCollection</span>(<span class="type">Digits</span>())] </span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œæˆ‘æ³¨æ„åˆ°çš„æ˜¯ç±»å‹æ¨æ–­çš„é—®é¢˜ï¼Œ</p><p>å¯ä»¥å°è¯•ä¸‹ <code>AnyCollection</code>ï¼Œ<code>AnyIterator</code> è¿™äº›ï¼Œå‘ç° <code>collections</code> ä¸­çš„ Element å˜æˆäº† <code>Any</code>ï¼Œ</p><p>ä¹Ÿå°±å¼•å‡ºäº†ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚</p><h3 id="Swift-çš„ç‰¹æ€§ä¹‹ä¸€ï¼šç±»å‹æ¨æ–­"><a href="#Swift-çš„ç‰¹æ€§ä¹‹ä¸€ï¼šç±»å‹æ¨æ–­" class="headerlink" title="Swift çš„ç‰¹æ€§ä¹‹ä¸€ï¼šç±»å‹æ¨æ–­"></a>Swift çš„ç‰¹æ€§ä¹‹ä¸€ï¼šç±»å‹æ¨æ–­</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Type: AnyIterator&lt;Int&gt;</span></span><br><span class="line"><span class="type">AnyIterator</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].makeIterator())</span><br><span class="line"></span><br><span class="line"><span class="comment">// Type: AnyIterator&lt;String&gt;</span></span><br><span class="line"><span class="type">AnyIterator</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>].makeIterator())</span><br><span class="line"></span><br><span class="line"><span class="comment">// Type: [AnyIterator&lt;Any&gt;]</span></span><br><span class="line">[<span class="type">AnyIterator</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].makeIterator()), <span class="type">AnyIterator</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>].makeIterator())]</span><br></pre></td></tr></table></figure><p>è¿™ä¿©ä¸œè¥¿çš„ Element ç±»å‹ä¸ä¸€è‡´ï¼Œä¸ºä»€ä¹ˆæ”¾åœ¨ä¸€èµ·è¿˜èƒ½ç¼–è¯‘å¹¶ä¸” Element å˜æˆ <code>Any</code> äº†å‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œæ˜¯ Swift çš„ç±»å‹æ¨æ–­åœ¨å¹²æ´»</p><p>è€Œå¦‚æœæ¢ä¸€ç§å†™æ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> intIterator <span class="operator">=</span> <span class="type">AnyIterator</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].makeIterator())</span><br><span class="line"><span class="keyword">let</span> stringIterator <span class="operator">=</span> <span class="type">AnyIterator</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>].makeIterator())</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> together <span class="operator">=</span> [intIterator, stringIterator] <span class="comment">// âŒ Heterogeneous collection literal could only be inferred to &#x27;[Any]&#x27;; add explicit type annotation if this is intentional</span></span><br></pre></td></tr></table></figure><p>å°±ä¼šæŠ¥é”™ï¼ŒåŸå› å°±åœ¨äºè¿™ä¸¤ä¸ªä¸œè¥¿çš„ç±»å‹ä¸ä¸€è‡´ï¼Œä¸èƒ½æ”¾åœ¨ä¸€ä¸ª Array é‡Œï¼Œ</p><blockquote><p>æå‰å£°æ˜çš„è¯ï¼Œç¼–è¯‘å™¨ä¼šå›ºåŒ–ç±»å‹ï¼Œæ˜¯ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆ</p><p><code>AnyIterator&lt;String&gt;</code> å’Œ <code>AnyIterator&lt;Int&gt;</code> æ˜¯ä¸¤ç§ä¸åŒçš„ç±»å‹ï¼Œå®ƒä»¬çš„ Element ä¸åŒ</p></blockquote><p>æ›´åŠ è¯¦ç»†çš„å¯ä»¥çœ‹æˆ‘é—®çš„è¿™ä¸ªå¸–å­ï¼š<a href="https://forums.swift.org/t/anycollection-with-different-generic-types/62558">AnyCollection with different generic types</a> </p><hr><p>å¯¹ <code>Array</code> å†åšä¸€ä¸ªæ‰©å±•ï¼Œè®©ä»»ä½•æ•°ç»„éƒ½ç¬¦åˆåè®®ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> <span class="title class_">Array</span>: <span class="title class_">MyCollection</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">allValues</span>() -&gt; [<span class="type">Element</span>] &#123; <span class="keyword">self</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arrayCollection <span class="operator">=</span> [<span class="type">AnyMyCollection</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]), <span class="type">AnyMyCollection</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>])] <span class="comment">// âœ… AnyMyCollection&lt;Any&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ä¸¤ä¸ªç±»å‹åˆ†åˆ«æ˜¯ï¼š<code>AnyMyCollection&lt;Int&gt;</code> å’Œ <code>AnyMyCollection&lt;String&gt;</code></p><p>ä½†æ˜¯å†åŠ ä¸Š <code>Digits</code> å´æŠ¥é”™äº†ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ Heterogeneous collection literal could only be inferred to &#x27;[Any]&#x27;; add explicit type annotation if this is intentional</span></span><br><span class="line"><span class="keyword">let</span> collection <span class="operator">=</span> [<span class="type">AnyMyCollection</span>(<span class="type">Digits</span>()), <span class="type">AnyMyCollection</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]), <span class="type">AnyMyCollection</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>])]</span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯ç¬¬äºŒä¸ªé—®é¢˜ã€‚</p><h3 id="ç¼–è¯‘æ—¶æ¨æ–­-å’Œ-è¿è¡Œæ—¶æ¨æ–­"><a href="#ç¼–è¯‘æ—¶æ¨æ–­-å’Œ-è¿è¡Œæ—¶æ¨æ–­" class="headerlink" title="ç¼–è¯‘æ—¶æ¨æ–­ å’Œ è¿è¡Œæ—¶æ¨æ–­"></a>ç¼–è¯‘æ—¶æ¨æ–­ å’Œ è¿è¡Œæ—¶æ¨æ–­</h3><p>åˆ†æä¸€ä¸‹æ¯ä¸€ä¸ª <code>AnyMyCollection </code> çš„ç±»å‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AnyMyCollection&lt;Digits.Element&gt;</span></span><br><span class="line"><span class="type">AnyMyCollection</span>(<span class="type">Digits</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">// AnyMyCollection&lt;Int&gt;</span></span><br><span class="line"><span class="type">AnyMyCollection</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// AnyMyCollection&lt;String&gt;</span></span><br><span class="line"><span class="type">AnyMyCollection</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>])</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§ä¹‹å‰è¯´çš„ï¼Œåº”è¯¥ç»Ÿä¸€æˆ <code>AnyMyCollection&lt;Any&gt;</code> æ‰å¯¹ï¼Œ</p><p>ä½†æ˜¯ï¼Œä»”ç»†è§‚å¯Ÿèƒ½å¤Ÿå‘ç°ï¼Œä¼ å…¥ <code>AnyMyCollection</code> çš„ç±»å‹åˆ†åˆ«æ˜¯ <code>Digits</code>, <code>Array&lt;Int&gt;</code> å’Œ <code>Array&lt;String&gt;</code>ï¼Œ</p><p>ç¬¬ä¸€ä¸ªä¸å¸¦æ³›å‹ï¼Œè€Œå…¶ä»–çš„å‡å¸¦æ³›å‹ï¼Œ</p><p>å¯¹äº <code>Array&lt;Element&gt;</code> æ¥è¯´ï¼Œç¼–è¯‘æ—¶æ˜¯å¯ä»¥ç¡®å®š Element çš„å…·ä½“ç±»å‹çš„,</p><p>ä¸” <code>Array</code> ä¸­çš„ <code>Element</code> å’Œ <code>MyCollection</code> ä¸­çš„ <code>Element</code> æ˜¯ä¸€è‡´çš„ï¼Œ</p><p>å› æ­¤ï¼Œç¼–è¯‘æ—¶å¯ä»¥ç¡®å®šå‡º <code>AnyMyCollection</code> ä¸­çš„ <code>Element</code>ï¼ˆå³ <code>Array</code> ä¸­çš„ <code>Element</code>ï¼‰çš„ç±»å‹ã€‚</p><p>ä½†å¯¹äº <code>Digits</code> æ¥è¯´ï¼Œç”±äºå…¶æœ¬èº«æ²¡æœ‰æ³›å‹ï¼Œæ‰€ä»¥ <code>Element</code> äº‹å®ä¸Šæ˜¯è¢«â€œéšè—â€èµ·æ¥çš„ï¼Œ</p><p>ç¼–è¯‘å™¨æ— æ³•æ¨æ–­å…¶ç±»å‹ï¼Œå› æ­¤ä¸èƒ½è‡ªåŠ¨å˜æˆ <code>Any</code>ã€‚</p><p><img src="/img/type-erasure-in-swift/non-generic-compiletime-infer.jpeg"></p><blockquote><p>ç›´åˆ°è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå‡º <code>Digits.Element</code> çš„å…·ä½“ç±»å‹æ˜¯ <code>Int</code></p><p><img src="/img/type-erasure-in-swift/non-generic-runtime-infer.jpeg"></p></blockquote><p>æœ‰è§£å†³åŠæ³•å˜›ï¼Ÿæœ‰ã€‚</p><p>å°±æ˜¯ç»™ <code>Digits</code> åŠ ä¸Š Element çš„æ³›å‹ã€‚</p><blockquote><p>ä½†æ˜¯åŠ ä¸Šæ³›å‹å†å»é™å®šåªèƒ½æ˜¯ <code>Int</code> å°±æœ‰ç‚¹è„±è£¤å­æ”¾å±çš„æ„Ÿè§‰äº†ğŸ˜‚</p></blockquote><p>æœ€ç»ˆæˆ‘æŠŠå®ƒå˜æˆäº†ä¸€ä¸ª <code>CustomCollection</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">CustomCollection</span>&lt;<span class="title class_">Element</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">var</span> content: [<span class="type">Element</span>] <span class="operator">=</span> []</span><br><span class="line">    <span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">content</span>: <span class="type">Element</span>...) &#123;</span><br><span class="line">        <span class="keyword">self</span>.content.append(contentsOf: content)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">CustomCollection</span>: <span class="title class_">MyCollection</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">allValues</span>() -&gt; [<span class="type">Element</span>] &#123;</span><br><span class="line">        content</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="AnyMyCollection"><a href="#AnyMyCollection" class="headerlink" title="AnyMyCollection"></a>AnyMyCollection</h2><p>ä¸Šé¢ä¸¤ä¸ªé—®é¢˜ç ”ç©¶é€å½»ä¹‹åï¼Œä» Protocol åˆ° Type Eraser çš„ä»¿åˆ¶ä¹Ÿå°±å®Œæˆäº†ã€‚</p><p>æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">MyCollection</span>&lt;<span class="title class_">Element</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Element</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">allValues</span>() -&gt; [<span class="type">Element</span>]</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// MARK: - AnyMyCollection</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">AnyMyCollection</span>&lt;<span class="title class_">Element</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">var</span> _box: _AnyMyCollectionBase<span class="operator">&lt;</span><span class="type">Element</span><span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>&lt;<span class="type">C</span>: <span class="type">MyCollection</span>&gt;(<span class="keyword">_</span> <span class="params">base</span>: <span class="type">C</span>) <span class="keyword">where</span> <span class="type">Element</span> <span class="operator">==</span> <span class="type">C</span>.<span class="type">Element</span> &#123;</span><br><span class="line">        _box <span class="operator">=</span> _MyCollectionBox(base)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">AnyMyCollection</span>: <span class="title class_">MyCollection</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">allValues</span>() -&gt; [<span class="type">Element</span>] &#123;</span><br><span class="line">        _box.allValues()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">_MyCollectionBox</span>&lt;<span class="title class_">Base</span>: <span class="title class_">MyCollection</span>&gt;: <span class="title class_">_AnyMyCollectionBase</span>&lt;<span class="title class_">Base</span>.<span class="title class_">Element</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">base</span>: <span class="type">Base</span>) &#123;</span><br><span class="line">        _base <span class="operator">=</span> base</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> _base: <span class="type">Base</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">allValues</span>() -&gt; [<span class="type">Base</span>.<span class="type">Element</span>] &#123;</span><br><span class="line">        <span class="keyword">return</span> _base.allValues()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">_AnyMyCollectionBase</span>&lt;<span class="title class_">Element</span>&gt;: <span class="title class_">MyCollection</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">allValues</span>() -&gt; [<span class="type">Element</span>] &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>(<span class="string">&quot;This method should be overwritten. Line 35.&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">Array</span>: <span class="title class_">MyCollection</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">allValues</span>() -&gt; [<span class="type">Element</span>] &#123; <span class="keyword">self</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// - MARK: Custom Collection</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">CustomCollection</span>&lt;<span class="title class_">Element</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">var</span> content: [<span class="type">Element</span>] <span class="operator">=</span> []</span><br><span class="line">    <span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">content</span>: <span class="type">Element</span>...) &#123; <span class="keyword">self</span>.content.append(contentsOf: content) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">CustomCollection</span>: <span class="title class_">MyCollection</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">allValues</span>() -&gt; [<span class="type">Element</span>] &#123; content &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> collections <span class="operator">=</span> [<span class="type">AnyMyCollection</span>(<span class="type">CustomCollection</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)), <span class="type">AnyMyCollection</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>])]</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ•´ä¸ªè¿‡ç¨‹è€—è´¹äº†å·®ä¸è¿‡ä¸¤å¤©çš„æ—¶é—´ï¼Œæœ€é‡è¦çš„æ˜¯è¦ç†è§£è¿™ä¸€ç§ Type Eraser çš„åŸºæœ¬åŸç†å’Œå®ç°ï¼Œ</p><p>è¸©è¸©å‘ï¼Œæ›´èƒ½åŠ æ·±å°è±¡ğŸ¥²</p><p>ä¸è¿‡ Swift 5.7 æœ‰äº† <code>any</code> å…³é”®å­—ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½å–ä»£æ‰ Type Eraserï¼ŒæœŸå¾…ä¸€ä¸‹ Swift 6ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸Šç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬åˆæ­¥äº†è§£äº†ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ª Type Eraser ï¼Œ&lt;/p&gt;
&lt;p&gt;ä¹Ÿåˆ†äº«äº†ä¸€ä¸ªç®€å•å®ç° Type Erasure çš„æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´åŠ æ·±å…¥äº†è§£ç±»å‹æ“¦é™¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—æ¥çœ‹çœ‹ Swift è‡ªå¸¦çš„ä¸€äº› Type Eraser æ˜¯å¦‚ä½•å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç›®æ ‡æ˜¯ï¼šç†è§£ä¸€ä¸‹å…¶åŸºæœ¬æ€è·¯ï¼Œå¹¶ä¸”ä»¿åˆ¶ä¸€ä¸ªå‡ºæ¥ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Swift" scheme="https://liyanan2004.github.io/tags/Swift/"/>
    
    <category term="ç±»å‹æ“¦é™¤" scheme="https://liyanan2004.github.io/tags/%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4/"/>
    
    <category term="æ³›å‹" scheme="https://liyanan2004.github.io/tags/%E6%B3%9B%E5%9E%8B/"/>
    
  </entry>
  
  <entry>
    <title>Swift ä¸­çš„ç±»å‹æ“¦é™¤ï¼ˆä¸Šï¼‰â€”â€” ä¸ºä»€ä¹ˆ &amp; æ€ä¹ˆåš</title>
    <link href="https://liyanan2004.github.io/type-erasure-in-swift/"/>
    <id>https://liyanan2004.github.io/type-erasure-in-swift/</id>
    <published>2023-01-13T14:04:01.879Z</published>
    <updated>2023-01-16T07:30:14.376Z</updated>
    
    <content type="html"><![CDATA[<p>æ¢ç´¢ç±»å‹æ“¦é™¤çš„åŸç†å’Œå®ç°ï¼Œå¸¸è§çš„ç±»å‹æ©¡çš®æ“¦æœ‰ï¼šAnyViewã€AnyShapeã€AnyCollectionâ€¦</p><span id="more"></span><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protocol</span> <span class="title class_">Tool</span> &#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">S</span>: <span class="type">StringProtocol</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">name</span>() -&gt; <span class="type">S</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ä¸ªåè®®ï¼ˆæˆ–è€…å«æ¥å£ï¼‰å¯ä»¥åˆ›å»ºä¸€ä¸ª Tool </p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Pen</span>: <span class="title class_">Tool</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">name</span>() -&gt; <span class="keyword">some</span> <span class="type">StringProtocol</span> &#123;</span><br><span class="line">        <span class="string">&quot;Pen&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Pencil</span>: <span class="title class_">Tool</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">name</span>() -&gt; <span class="keyword">some</span> <span class="type">StringProtocol</span> &#123;</span><br><span class="line">        <span class="string">&quot;Pencil&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Ruler</span>: <span class="title class_">Tool</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">name</span>() -&gt; <span class="keyword">some</span> <span class="type">StringProtocol</span> &#123;</span><br><span class="line">        <span class="string">&quot;Ruler&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘è¦åˆ›å»ºä¸€ä¸ª <code>ToolController</code> æ¥ç®¡ç†æˆ‘çš„â€œå·¥å…·ä»¬â€ï¼Œ</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ToolController</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆæ¥è·å–æ‰€æœ‰å·¥å…·ï¼Œä½†æ˜¯é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œ</p><p>è¿™é‡Œè™½ç„¶åªæœ‰ä¸‰ä¸ªå·¥å…·ï¼Œå¯ä»¥ä¸€ä¸ªä¸ªå†™ï¼Œ</p><p>ä½†æ˜¯è¿™åªæ˜¯ä¸ªä¾‹å­ï¼Œåœ¨å®é™…åº”ç”¨ä¸­è¿™é‡Œçš„æ•°é‡æ˜¯æœªçŸ¥çš„ï¼Œ</p><p>åº”è¯¥å¦‚ä½•è·å–æ‰€æœ‰çš„å·¥å…·å‘¢ï¼Ÿå¤§è‡´æ€è·¯æ˜¯è¿™æ ·çš„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tools: [<span class="type">Tool</span>] <span class="operator">=</span> [<span class="type">Pen</span>(), <span class="type">Pencil</span>(), <span class="type">Ruler</span>()]</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œ<code>Tool</code> ä¸­æœ‰ <code>associatedtype</code>ï¼Œå› æ­¤ <strong><code>Tool</code> ä¸èƒ½å½“ä½œç±»å‹æ¥ä½¿ç”¨</strong>ï¼Œ</p><p>å¥½æ¶ˆæ¯æ˜¯ï¼Œåœ¨ Swift 5.7 æˆ–æ›´æ–°ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>any Tool</code> æ¥ä½œä¸ºç±»å‹ï¼Œ</p><p>ä½†æ˜¯ä¹‹åçš„æ‰€æœ‰ç»“æœéƒ½å¸¦æœ‰ <code>any</code>ï¼Œå¯èƒ½ä¸ä¼šæ˜¯ä½ é¢„æœŸçš„ç»“æœã€‚</p><blockquote><p>æ¯”å¦‚ <code>any View</code> ä¸ç¬¦åˆ <code>View</code> åè®®â€¦</p></blockquote><p>é™¤äº†è¿™æ ·çš„æ•°ç»„åˆ›å»ºå’Œä½¿ç”¨ä¸Šå¯èƒ½ä¼šå—é˜»ï¼Œåœ¨å¤šåˆ†æ”¯è¿”å›æ˜¯ä¹Ÿä¼šå‡ºé—®é¢˜ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ToolController</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> currentTool <span class="operator">=</span> <span class="string">&quot;pen&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// âŒ Function declares an opaque return type &#x27;some Tool&#x27;, but the return statements in its body do not have matching underlying types.</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">getCurrentTool</span>() -&gt; <span class="keyword">some</span> <span class="type">Tool</span> &#123; </span><br><span class="line">        <span class="keyword">switch</span> currentTool &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;pen&quot;</span>: <span class="keyword">return</span> <span class="type">Pen</span>()</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;ruler&quot;</span>: <span class="keyword">return</span> <span class="type">Ruler</span>()</span><br><span class="line">        <span class="keyword">default</span>: <span class="keyword">return</span> <span class="type">Pencil</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>some</code> å…³é”®å­—è¡¨ç¤ºä¸é€æ˜çš„ç±»å‹ï¼ˆopaque typeï¼‰ï¼Œ</p><p>æˆ‘ä»¬åªéœ€è¦çŸ¥é“ä»–æ˜¯ä¸€ä¸ªç¬¦åˆ <code>Tool</code> åè®®çš„ä¸œè¥¿ï¼Œ</p><p>ä½†æ˜¯å…·ä½“æ˜¯ä»€ä¹ˆä¸çŸ¥é“ï¼Œä¹Ÿä¸å…³å¿ƒæ˜¯ä»€ä¹ˆï¼Œäº¤ç»™ç¼–è¯‘å™¨å»æ¨æ–­ã€‚</p></blockquote><p>å› ä¸ºåœ¨ä¸‰ä¸ª case ä¸­è¿”å›çš„ç»“æœç±»å‹ä¸ä¸€è‡´ï¼Œç¼–è¯‘æ—¶æ— æ³•æ¨æ–­ <code>Tool</code> çš„ç±»å‹ï¼Œ</p><p>è€Œä¸‰ä¸ªåˆ†æ”¯ä¸­ä½¿ç”¨çš„ Tool æ˜¯å®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼Œä¸èƒ½ç›´æ¥æ›¿æ¢ã€‚</p><p>å¦‚æœè¿˜æœ‰æ›´å¤šåˆ†æ”¯çš„è¯æƒ…å†µä¼šæ›´åŠ å¤æ‚ï¼Œ</p><p>å› æ­¤ï¼Œè‹¥æƒ³ç»Ÿä¸€ç±»å‹ï¼Œä¸å¦¨åˆ›å»ºä¸€ä¸ªç±»å‹æ©¡çš®æ“¦æ¥æ“¦é™¤åŸæœ¬çš„ç±»å‹ï¼Œ</p><p>è¿™æ—¶å€™æ¯ä¸€ä¸ªåˆ†æ”¯è¿”å›çš„ç±»å‹éƒ½æ˜¯â€œæ©¡çš®æ“¦â€çš„ç±»å‹ï¼Œä¹Ÿå°±æ²¡é—®é¢˜äº†ã€‚</p><h2 id="ç±»å‹æ“¦é™¤çš„åŸç†ä»¥åŠå®ç°"><a href="#ç±»å‹æ“¦é™¤çš„åŸç†ä»¥åŠå®ç°" class="headerlink" title="ç±»å‹æ“¦é™¤çš„åŸç†ä»¥åŠå®ç°"></a>ç±»å‹æ“¦é™¤çš„åŸç†ä»¥åŠå®ç°</h2><ul><li>åˆ›å»ºæ©¡çš®æ“¦ï¼ˆä»¥ä¸‹ç§°ä¹‹ä¸º Eraserï¼‰ï¼ŒEraser è¦ç¬¦åˆä½ çš„ <code>Protocol</code></li></ul><blockquote><p>æ©¡çš®æ“¦çš„åç§°ä¸€èˆ¬æ˜¯ <code>Any</code> + åè®®å</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">AnyTool</span>: <span class="title class_">Tool</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">name</span>() -&gt; <span class="keyword">some</span> <span class="type">StringProtocol</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆå§‹åŒ–ä¸­ä¼ å…¥ä¸€ä¸ª<strong>è¦è¢«æ“¦é™¤ç±»å‹çš„ Tool</strong> ï¼ˆä¸‹é¢ç§°ä¹‹ä¸ºTypeï¼‰</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">init</span>&lt;<span class="type">T</span>: <span class="type">Tool</span>&gt;(<span class="params">erasing</span> <span class="params">tool</span>: <span class="type">T</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºä¸­é—´å˜é‡æ¥ä¼ é€’ Type ä¸­çš„å¿…è¦çš„æ–¹æ³•å’Œå±æ€§</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">let</span> _name: <span class="type">S</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">init</span>&lt;<span class="type">T</span>: <span class="type">Tool</span>&gt;(<span class="params">erasing</span> <span class="params">tool</span>: <span class="type">T</span>) &#123;</span><br><span class="line">    _name <span class="operator">=</span> (tool.name() <span class="keyword">as?</span> <span class="type">S</span>) <span class="operator">??</span> <span class="string">&quot;IDK.&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æœ€åï¼Œç”¨ <code>name</code> æ¥å¡«è¡¥ Eraser ä¸­éœ€è¦çš„æ–¹æ³•</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">AnyTool</span>: <span class="title class_">Tool</span> &#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">S</span> <span class="operator">=</span> <span class="type">String</span> <span class="comment">// This must be a type that conforms to StringProtocol.</span></span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">let</span> _name: <span class="type">S</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>&lt;<span class="type">T</span>: <span class="type">Tool</span>&gt;(<span class="params">erasing</span> <span class="params">tool</span>: <span class="type">T</span>) &#123;</span><br><span class="line">        _name <span class="operator">=</span> (tool.name() <span class="keyword">as?</span> <span class="type">S</span>) <span class="operator">??</span> <span class="string">&quot;IDK.&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">name</span>() -&gt; <span class="type">S</span> &#123;</span><br><span class="line">        _name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ç±»å‹ä» <code>some StringProtocol</code> å˜æˆäº† <code>String</code></p><blockquote><p>å¦‚æœæ˜¯ <code>View</code>ï¼Œä¸€èˆ¬ä¼šæŠŠä»–æ›¿æ¢æˆ <code>AnyView</code> </p><p>è¿™é‡Œå¦‚æœä¸èƒ½å°† <code>tool.name()</code> è½¬æ¢æˆ <code>String</code> çš„è¯å°±è¿”å› <code>IDK.</code></p></blockquote><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°† <code>Pen</code>ã€<code>Pencil</code>ã€<code>Ruler</code> éƒ½å˜æˆ <code>AnyTool</code>ï¼Œè§£å†³äº†ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ToolController</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> allTools: [<span class="type">AnyTool</span>] <span class="operator">=</span> []</span><br><span class="line">    <span class="keyword">var</span> currentTool <span class="operator">=</span> <span class="string">&quot;pen&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">getAllTools</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> tools <span class="operator">=</span> [<span class="type">AnyTool</span>(erasing: <span class="type">Pen</span>()), <span class="type">AnyTool</span>(erasing: <span class="type">Pencil</span>()), <span class="type">AnyTool</span>(erasing: <span class="type">Ruler</span>())]</span><br><span class="line">        allTools <span class="operator">=</span> tools</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">getCurrentTool</span>() -&gt; <span class="keyword">some</span> <span class="type">Tool</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> currentTool &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;pen&quot;</span>: <span class="keyword">return</span> <span class="type">AnyTool</span>(erasing: <span class="type">Pen</span>())</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;ruler&quot;</span>: <span class="keyword">return</span> <span class="type">AnyTool</span>(erasing: <span class="type">Ruler</span>())</span><br><span class="line">        <span class="keyword">default</span>: <span class="keyword">return</span> <span class="type">AnyTool</span>(erasing: <span class="type">Pencil</span>())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°åŸç†å‚è€ƒ <a href="https://fabernovel.github.io/2020-06-03/approaches-to-type-erasure-in-swift">Approaches to Type Erasure in Swift</a> </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ¢ç´¢ç±»å‹æ“¦é™¤çš„åŸç†å’Œå®ç°ï¼Œå¸¸è§çš„ç±»å‹æ©¡çš®æ“¦æœ‰ï¼šAnyViewã€AnyShapeã€AnyCollectionâ€¦&lt;/p&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Swift" scheme="https://liyanan2004.github.io/tags/Swift/"/>
    
    <category term="ç±»å‹æ“¦é™¤" scheme="https://liyanan2004.github.io/tags/%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4/"/>
    
  </entry>
  
  <entry>
    <title>è®°å½•ä¸€æ¬¡ ï£¿ å®˜æ–¹å¬å›è®¡åˆ’çš„ç»´ä¿®</title>
    <link href="https://liyanan2004.github.io/macbook-pro-keyboard-repair/"/>
    <id>https://liyanan2004.github.io/macbook-pro-keyboard-repair/</id>
    <published>2023-01-12T14:45:59.741Z</published>
    <updated>2023-01-12T15:00:40.419Z</updated>
    
    <content type="html"><![CDATA[<p>è¿˜è®°å¾—å‡ å¹´å‰è‹¹æœæ¨å‡ºä¸€é¡¹<a href="https://support.apple.com/zh-cn/keyboard-service-program-for-mac-notebooks">å¬å›è®¡åˆ’</a>ï¼Œ</p><p>æ‰€æœ‰ä½¿ç”¨äº†è¶å¼é”®ç›˜çš„ MacBook å‡ºç°é”®ç›˜é—®é¢˜éƒ½å¯ä»¥å…è´¹æ¢é”®ç›˜ï¼Œ</p><p>å½“æ—¶ä¹°ç”µè„‘çš„æ—¶å€™ä¹°äº† Apple Care+ </p><p>æœ¬æƒ³æ¢å—æ–°ç”µæ± ï¼Œç»“æœæ­»æ´»å¡åœ¨ 80% - 82%ï¼Œ</p><p>å½“æ—¶åº—å‘˜å°±è·Ÿæˆ‘è¯´è®©æˆ‘ç•™æ„é”®ç›˜é—®é¢˜ï¼Œä¿ä¿®æ—¶é—´æ˜¯<strong>4å¹´</strong></p><span id="more"></span><h2 id="å…·ä½“è¡¨ç°"><a href="#å…·ä½“è¡¨ç°" class="headerlink" title="å…·ä½“è¡¨ç°"></a>å…·ä½“è¡¨ç°</h2><p>é”®ç›˜çš„ N æŒ‰ä¸‹å»æ²¡ååº”ï¼Œéœ€è¦å¤§åŠ›å‡ºå¥‡è¿¹æ‰èƒ½æ‰“å‡ºå­—æ¯ï¼Œ</p><blockquote><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œç¬¬ä¸€æ—¶é—´å½•ä¸‹è§†é¢‘ä½œä¸ºè¯æ®</p><p>è¿™ç§é—®é¢˜å¾ˆæœ‰å¯èƒ½ä¼šåœ¨ç¬¬äºŒå¤©è‡ªåŠ¨æ¢å¤ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯ï¼Œæ‰€ä»¥è¦ç•™ä¸‹è¯æ®ï¼Œéå¸¸é‡è¦â€¼ï¸</p></blockquote><h2 id="é¢„çº¦ç»´ä¿®"><a href="#é¢„çº¦ç»´ä¿®" class="headerlink" title="é¢„çº¦ç»´ä¿®"></a>é¢„çº¦ç»´ä¿®</h2><p>ç¬¬ä¸€æ¬¡å‡ºç°é—®é¢˜æ—¶æ²¡å¤ªåœ¨æ„ï¼Œå°±å½•äº†ä¸ªè§†é¢‘ä¹Ÿå°±æ²¡ç®¡ï¼Œ</p><p>å¥½å·§ä¸å·§ï¼Œå‰å‡ å¤©æ™šä¸Šåˆé‡åˆ°äº†ï¼Œèµ¶ç´§é¢„çº¦äº†ç¬¬äºŒå¤©çš„å¤©æ‰å§ã€‚</p><h2 id="è·Ÿå¤©æ‰å§çš„å¤©æ‰äº¤æµ"><a href="#è·Ÿå¤©æ‰å§çš„å¤©æ‰äº¤æµ" class="headerlink" title="è·Ÿå¤©æ‰å§çš„å¤©æ‰äº¤æµ"></a>è·Ÿå¤©æ‰å§çš„å¤©æ‰äº¤æµ</h2><p>å½“å¤©æ—©ä¸Šï¼Œé—®é¢˜åˆâ€œè‡ªåŠ¨ä¿®å¤â€äº†ğŸ˜‚ï¼Œæ‰€ä»¥è¯´å½•è§†é¢‘å¾ˆé‡è¦â€¼ï¸ï¼Œ</p><p>å¤©æ‰å§é‡Œçš„å¤©æ‰æŒ‰äº†å¾ˆä¹…ä¹Ÿæ²¡èƒ½æˆåŠŸå¤ç°ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰å› æ­¤è¯´ç”µè„‘æ²¡é—®é¢˜ï¼ˆä¸åƒæŸå“ç‰Œé‚£ä¹ˆå‚²æ…¢ï¼‰ï¼Œ</p><p>æœ€åæ˜¯æŠŠ N é”®æ‹†å¼€ä¹‹åç›´æ¥è§¦ç¢°è§¦ç‚¹å¤ç°äº†ä¸€ä¸ªæˆ‘ä»æ¥æ²¡æœ‰é‡åˆ°çš„é—®é¢˜ğŸ˜‚</p><p><strong>æˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯ï¼šæŒ‰ä¸‹å»æ²¡ååº”</strong></p><p><strong>ä»–æµ‹è¯•å‡ºæ¥çš„æ˜¯ï¼šæŒ‰ä¸‹å»ä¹‹åååº”ä¸¤ä¸‹ğŸ˜‚</strong></p><p><img src="/img/macbook-pro-keyboard-repair/diagnose.png" alt="ä¸æ„§æ˜¯å¤©æ‰"></p><p>æ—¢ç„¶è¿™æ ·ï¼Œé‚£å°±ç»´ä¿®å‘—ï¼Œ<strong>æ›´æ¢äº†æ•´ä¸ªé”®ç›˜æ€»æˆå’Œä¸Šå£³å¥—ä»¶</strong>ã€‚</p><blockquote><p>åŒ…æ‹¬ é”®ç›˜ã€Touch Barã€Touch IDã€è§¦æ§æ¿ã€æŒæ‰˜ä¸€ç›´åˆ°USB-Cçš„å¤–å£³ ä»¥åŠ ç”µæ± ã€‚</p></blockquote><p>çº¦ç­‰äº <strong>æ¢äº†åŠå°æ–°ç”µè„‘</strong>ï¼Œ</p><p>åé¢å°±æ˜¯ç­¾ä¸ªå­—ï¼Œè·‘ä¸ªè¯Šæ–­ï¼Œå°±æ¬§äº†ï½</p><p><img src="/img/macbook-pro-keyboard-repair/price.png"></p><blockquote><p>æˆ‘çš„æ•´ä¸ªæ›´æ¢çš„å‘¨æœŸæ˜¯1å¤©åŠã€‚</p><p>æ–°æ¢çš„å¥—ä»¶éƒ½å¸¦ 90 å¤©ä¿ä¿®ã€‚</p><p>ä¹Ÿæ€»ç®—æ˜¯ç»™æˆ‘æ¢åˆ°ç”µæ± äº†ï¼æ»¡è¡€å¤æ´»ï¼ï¼</p></blockquote><h2 id="è°ˆè°ˆå”®å"><a href="#è°ˆè°ˆå”®å" class="headerlink" title="è°ˆè°ˆå”®å"></a>è°ˆè°ˆå”®å</h2><p>å”®åçš„ç›®çš„å°±æ˜¯è®©æ¶ˆè´¹è€…æ”¾å¿ƒçš„å»ä½¿ç”¨è‡ªå·±è´­ä¹°çš„äº§å“ï¼Œ</p><p>å¦‚æœä½ æœ‰æ½œåœ¨çš„è´¨é‡é—®é¢˜ï¼Œç»™äºˆå®¢æˆ·è¿™æ ·çš„å¬å›ä¿ä¿®æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œ</p><p>ä¹‹å‰æˆ‘çš„ Apple Pencil å‡ºç°äº†æ’åœ¨ iPad ä¸Šåå‘å……ç”µï¼ˆè¶Šå……è¶Šå°‘ï¼‰çš„é—®é¢˜ï¼Œ</p><p>åœ¨ç°åœºä¸èƒ½å¤ç°ï¼Œä½†æ˜¯æˆ‘å½•äº†è§†é¢‘ï¼Œç¡®å®æœ‰è¿™æ ·çš„é—®é¢˜ï¼Œä»–ä»¬ä¹Ÿä¾ç„¶ç»™æˆ‘åšäº†æ›´æ¢ï¼Œ</p><p>å°±è§‰å¾—è‹¹æœåœ¨è¿™æ–¹é¢åšçš„ç‰¹åˆ«å¥½ï¼ŒçœŸçœŸåˆ‡åˆ‡çš„å¸®åŠ©å®¢æˆ·å°è¯•è§£å†³é—®é¢˜ï¼ˆæ›´æ¢ä¹‹åä¹Ÿç¡®å®æ˜¯æ²¡å†å‡ºç°è¿‡è¿™ä¸ªæƒ…å†µäº†ï¼‰ï¼Œ</p><p>ä½†æ˜¯è¿™ç»å¯¹ä¸æ˜¯æ„å‘³ç€å¯ä»¥è¿™æ ·å­å»éª—ä¿ï¼Œè¿™æ˜¯æˆ‘çš„åº•çº¿ã€‚</p><p>æœ€è¿‘ä¹Ÿåœ¨å„å¤§å¹³å°ä¸Šä¹Ÿçœ‹åˆ°äº†åä¸ºæ‹’ä¿ Pocket S å±å¹•è´¨é‡é—®é¢˜çš„æ¡ˆä¾‹ï¼Œ</p><p>å¾ˆå¤šäººæ˜æ˜æ²¡æœ‰è®¤ä¸ºæŸåï¼Œå°±æ˜¯ä¸€ç‚¹ç‚¹æ‰æ¼†éƒ½è¢«è®¤å®šä¸ºäººä¸ºæŸåæ‹’ä¿äº†ï¼Œ</p><p><del>åªèƒ½è¯´ï¼Œå‰²éŸ­èœå‰²çš„çœŸçˆ½â€¦</del></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿˜è®°å¾—å‡ å¹´å‰è‹¹æœæ¨å‡ºä¸€é¡¹&lt;a href=&quot;https://support.apple.com/zh-cn/keyboard-service-program-for-mac-notebooks&quot;&gt;å¬å›è®¡åˆ’&lt;/a&gt;ï¼Œ&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰ä½¿ç”¨äº†è¶å¼é”®ç›˜çš„ MacBook å‡ºç°é”®ç›˜é—®é¢˜éƒ½å¯ä»¥å…è´¹æ¢é”®ç›˜ï¼Œ&lt;/p&gt;
&lt;p&gt;å½“æ—¶ä¹°ç”µè„‘çš„æ—¶å€™ä¹°äº† Apple Care+ &lt;/p&gt;
&lt;p&gt;æœ¬æƒ³æ¢å—æ–°ç”µæ± ï¼Œç»“æœæ­»æ´»å¡åœ¨ 80% - 82%ï¼Œ&lt;/p&gt;
&lt;p&gt;å½“æ—¶åº—å‘˜å°±è·Ÿæˆ‘è¯´è®©æˆ‘ç•™æ„é”®ç›˜é—®é¢˜ï¼Œä¿ä¿®æ—¶é—´æ˜¯&lt;strong&gt;4å¹´&lt;/strong&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="çæŠ˜è…¾" scheme="https://liyanan2004.github.io/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="Apple Store" scheme="https://liyanan2004.github.io/tags/Apple-Store/"/>
    
    <category term="Macbook Pro" scheme="https://liyanan2004.github.io/tags/Macbook-Pro/"/>
    
  </entry>
  
  <entry>
    <title>SwiftUI ä¸­çš„ Conditional Scene</title>
    <link href="https://liyanan2004.github.io/swiftui-conditional-scene/"/>
    <id>https://liyanan2004.github.io/swiftui-conditional-scene/</id>
    <published>2023-01-01T07:03:17.787Z</published>
    <updated>2023-02-18T07:35:49.261Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ SwiftUI ä¸­ï¼Œæœ‰æ—¶éœ€è¦å¯¹æ–°çš„ API åšéš”ç¦»æ¥ä¿è¯å…¼å®¹è€çš„ç³»ç»Ÿã€‚</p><p>åœ¨ View ä¸­å¾ˆå¥½è§£å†³ï¼Œä½†æ˜¯åœ¨ Scene ä¸­ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°è¿™æ ·çš„é”™è¯¯æç¤ºã€‚</p><article class="message is-danger">                <div class="message-body">            <p>Closure containing control flow statement cannot be used with result builder â€˜SceneBuilderâ€™</p>        </div>    </article><article class="message is-success">                <div class="message-body">            <h3 id="2023-2-17æ›´æ–°"><a href="#2023-2-17æ›´æ–°" class="headerlink" title="2023.2.17æ›´æ–°"></a>2023.2.17æ›´æ–°</h3><p>åœ¨ Xcode 13.4 beta ä¸­ï¼Œ<code>SceneBuilder</code> æ”¯æŒäº† <code>buildExpression</code>ï¼Œ<code>buildLimitedAvailability</code> å’Œ <code>buildOptional</code>ã€‚</p>        </div>    </article><span id="more"></span><h2 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h2><p>è§£å†³æ–¹æ³•å°±æ˜¯æŠŠéœ€è¦ç”¨æ¡ä»¶åˆ¤æ–­ç»™å‡ºä¸åŒçš„ Scene çš„éƒ¨åˆ†å•ç‹¬å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œ</p><p>è¿”å› <code>some Scene</code>ï¼ŒåŒæ—¶ä¸è¦ä½¿ç”¨ <code>@SceneBuilder</code></p><blockquote><p><code>body</code> ä¸­é»˜è®¤ä½¿ç”¨ <code>@SceneBuilder</code> æ¥æ”¯æŒå¤šä¸ª Scene</p><p>åœ¨ if-condition ä¸­è¿”å›çš„å¯èƒ½æ˜¯ä¸¤ä¸ªä¸åŒç±»å‹çš„ Sceneï¼Œä½†æ˜¯å‡½æ•°çš„è¿”å›å€¼æ˜¯<br>ä¸é€æ˜çš„ <code>some Scene</code>ï¼Œå› æ­¤åªè¦è¿”å›çš„å†…å®¹æ˜¯ç¬¦åˆ Scene åè®®çš„å°±å¯ä»¥ã€‚</p><p>å¯ä»¥å‚è€ƒæˆ‘åœ¨ <a href="https://stackoverflow.com/a/74973406/20326422">stackoverflow</a> ä¸Šçš„å›ç­”</p></blockquote><p>æœ€åï¼Œä¸Šä»£ç ï¼</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@main</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">YourApp</span>: <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">Scene</span> &#123;</span><br><span class="line"><span class="keyword">#if</span> os(macOS)</span><br><span class="line">        <span class="comment">// macOS</span></span><br><span class="line">        conditionalWindowScene().windowStyle(.hiddenTitleBar)</span><br><span class="line"><span class="keyword">#else</span></span><br><span class="line">        <span class="comment">// Other Platform</span></span><br><span class="line">        <span class="type">WindowGroup</span> &#123;</span><br><span class="line">            <span class="type">ContentView</span>()</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">#endif</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">#if</span> os(macOS)</span><br><span class="line">    <span class="comment">/// Extract your conditional scene to avoid using `@SceneBuilder`</span></span><br><span class="line">    <span class="comment">/// In `body`, SwiftUI will always use `@SceneBuilder` to build multiple Scene.</span></span><br><span class="line">    <span class="comment">/// Because the result type is `some Scene`,</span></span><br><span class="line">    <span class="comment">/// you just need to return a type that conforms to `Scene` Protocol.</span></span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">conditionalWindowScene</span>() -&gt; <span class="keyword">some</span> <span class="type">Scene</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">#available</span>(<span class="keyword">macOS</span> <span class="number">13.0</span>, <span class="operator">*</span>) &#123;</span><br><span class="line">            <span class="comment">/// `Window` Scene is only available on macOS 13.0+</span></span><br><span class="line">            <span class="keyword">return</span> <span class="type">Window</span>(<span class="string">&quot;App&quot;</span>, id: <span class="string">&quot;MAIN&quot;</span>) &#123;</span><br><span class="line">                <span class="type">ContentView</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">/// Otherwise, using `WindowGroup`</span></span><br><span class="line">            <span class="keyword">return</span> <span class="type">WindowGroup</span> &#123;</span><br><span class="line">                <span class="type">ContentView</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">#endif</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ SwiftUI ä¸­ï¼Œæœ‰æ—¶éœ€è¦å¯¹æ–°çš„ API åšéš”ç¦»æ¥ä¿è¯å…¼å®¹è€çš„ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ View ä¸­å¾ˆå¥½è§£å†³ï¼Œä½†æ˜¯åœ¨ Scene ä¸­ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°è¿™æ ·çš„é”™è¯¯æç¤ºã€‚&lt;/p&gt;
&lt;article class=&quot;message is-danger&quot;&gt;
        
        &lt;div class=&quot;message-body&quot;&gt;
            &lt;p&gt;Closure containing control flow statement cannot be used with result builder â€˜SceneBuilderâ€™&lt;/p&gt;

        &lt;/div&gt;
    &lt;/article&gt;

&lt;article class=&quot;message is-success&quot;&gt;
        
        &lt;div class=&quot;message-body&quot;&gt;
            &lt;h3 id=&quot;2023-2-17æ›´æ–°&quot;&gt;&lt;a href=&quot;#2023-2-17æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;2023.2.17æ›´æ–°&quot;&gt;&lt;/a&gt;2023.2.17æ›´æ–°&lt;/h3&gt;&lt;p&gt;åœ¨ Xcode 13.4 beta ä¸­ï¼Œ&lt;code&gt;SceneBuilder&lt;/code&gt; æ”¯æŒäº† &lt;code&gt;buildExpression&lt;/code&gt;ï¼Œ&lt;code&gt;buildLimitedAvailability&lt;/code&gt; å’Œ &lt;code&gt;buildOptional&lt;/code&gt;ã€‚&lt;/p&gt;

        &lt;/div&gt;
    &lt;/article&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="SwiftUI" scheme="https://liyanan2004.github.io/tags/SwiftUI/"/>
    
  </entry>
  
  <entry>
    <title>æ¢ç´¢ Swift Concurrency (1)</title>
    <link href="https://liyanan2004.github.io/swift-concurrency/"/>
    <id>https://liyanan2004.github.io/swift-concurrency/</id>
    <published>2022-12-13T09:53:49.148Z</published>
    <updated>2022-12-13T14:05:58.258Z</updated>
    
    <content type="html"><![CDATA[<p>Swift å¹¶å‘æ˜¯ WWDC 21 ä¸Šçš„ä¸€ä¸ªé‡ç£…æ”¹è¿›ï¼Œæä¾›äº† <code>async/await</code> çš„è¯­æ³•ï¼Œ</p><p>è®©ä»£ç ç»“æ„æ›´åŠ æµç¨‹åŒ–ï¼Œæ›´åŠ ä¾¿äºç†è§£å’Œè°ƒè¯•ã€‚</p><p>å®˜æ–¹æŒ‡å—ï¼š<a href="https://developer.apple.com/news/?id=o140tv24">å¼€å§‹ä½¿ç”¨ Swift å¹¶å‘</a></p><p><img src="https://developer.apple.com/assets/elements/icons/swift/swift-64x64_2x.png"></p><span id="more"></span><h2 id="actor"><a href="#actor" class="headerlink" title="actor"></a>actor</h2><blockquote><p>WWDC Sessionsï¼š</p><p><a href="https://developer.apple.com/wwdc22/110351">åˆ©ç”¨  Swift å¹¶å‘æ¶ˆé™¤æ•°æ®äº‰ç”¨</a></p><p><a href="https://developer.apple.com/wwdc21/10133">åˆ©ç”¨ Swift Actor ä¿æŠ¤å¯å˜çŠ¶æ€</a></p></blockquote><p>actor å’Œ class å¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯ Ref Typeã€‚</p><p>ä½†æ˜¯ Actor ä¿è¯äº†å†…éƒ¨æ•°æ®çš„å”¯ä¸€æ€§ï¼Œå³ä¸€æ¬¡åªæœ‰ä¸€ä¸ªå‡½æ•°èƒ½è°ƒç”¨ï¼Œ</p><p><strong>å¦‚æœæœ‰å¤šä¸ªå‡½æ•°åŒæ—¶è°ƒç”¨è¯¥å±æ€§ï¼Œåˆ™éœ€è¦æ’é˜Ÿ</strong>ã€‚</p><p>ä¿è¯äº†åœ¨å¹¶å‘ç¯å¢ƒä¸‹çš„æ•°æ®ç«äº‰ (Data Races)ã€‚</p><p>å…¶ç”¨æ³•ä¸ struct&#x2F;class ä¸€è‡´ã€‚</p><h2 id="Main-Actor"><a href="#Main-Actor" class="headerlink" title="Main Actor"></a>Main Actor</h2><blockquote><p>WWDC Sessionï¼š<a href="https://developer.apple.com/wwdc21/10133">åˆ©ç”¨ Swift Actor ä¿æŠ¤å¯å˜çŠ¶æ€</a></p></blockquote><p>ç®€å•ç†è§£å°±æ˜¯ï¼šä¸»çº¿ç¨‹ã€‚</p><p>æ‰€æœ‰çš„ UI Updates éƒ½éœ€è¦åœ¨ Main Actor ç¯å¢ƒä¸‹å®Œæˆã€‚</p><p>æœ‰ä»¥ä¸‹å‡ ç§å†™æ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Task</span> &#123; <span class="meta">@MainActor</span> <span class="keyword">in</span></span><br><span class="line">    <span class="comment">// UI Updates</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MainActor</span> <span class="keyword">func</span> <span class="title function_">updateUI</span>() &#123;</span><br><span class="line">    <span class="comment">// UI Updates</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Task</span> &#123; </span><br><span class="line">    <span class="keyword">await</span> <span class="type">MainActor</span>.run &#123;</span><br><span class="line">        <span class="comment">// UI Updates</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MainActor</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewModel</span>: <span class="title class_">ObservableObject</span> &#123;</span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> show <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">fetch</span>() <span class="keyword">async</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> data <span class="operator">=</span> <span class="operator">...</span></span><br><span class="line">        updateUI() <span class="comment">// Run on the MainActor because the whole class is in MainActor.</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">updateUI</span>() &#123;</span><br><span class="line">        <span class="comment">// UI Updates</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="async-let"><a href="#async-let" class="headerlink" title="async let"></a>async let</h2><blockquote><p>WWDC Sessionï¼š<a href="https://developer.apple.com/wwdc21/10134">æ¢ç´¢ Swift ä¸­çš„ç»“æ„åŒ–å¹¶å‘</a></p></blockquote><p><code>async let</code> å¯ä»¥è®©å¤šä¸ªæ“ä½œä¸€èµ·æ‰§è¡Œï¼Œåˆ°çœŸæ­£éœ€è¦ä½¿ç”¨çš„æ—¶å€™å† <code>await</code>ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">fetchImage</span>() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// Fetching Image</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">fetchMetaData</span>() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// Fetching Meta Data</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">let</span> image <span class="operator">=</span> fetchImage() <span class="comment">// Start fetching while the CPU is free.</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">let</span> metaData <span class="operator">=</span> fetchMetaData() <span class="comment">// The same as image.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Do other work...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Display the image and backup.</span></span><br><span class="line">display(<span class="keyword">await</span> image)</span><br><span class="line">backup(<span class="keyword">await</span> metaData) <span class="comment">// This is just an example...haha</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœåªç”¨ <code>await</code>ï¼Œimage å’Œ metaData ä¼šä¾æ¬¡è·å–ï¼Œåœ¨è·å–æœŸé—´ç¨‹åºæŒ‚èµ· (Suspended)ï¼Œä¸ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚</p><p><strong>å¦‚æœ image çš„è·å–æ¯”è¾ƒæ…¢ï¼Œé‚£ä¹ˆå°±ä¼šå¡åœ¨è¿™é‡Œã€‚</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">fetchImage</span>() <span class="keyword">async</span> &#123; &#125;</span><br><span class="line"><span class="keyword">func</span> <span class="title function_">fetchMetaData</span>() <span class="keyword">async</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> image <span class="operator">=</span> <span class="keyword">await</span> fetchImage() <span class="comment">// It&#x27;s stuck here.ğŸ˜…</span></span><br><span class="line"><span class="keyword">let</span> metaData <span class="operator">=</span> <span class="keyword">await</span> fetchMetaData() <span class="comment">// As well as here.ğŸ˜…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Do other work...</span></span><br><span class="line"><span class="comment">// Because we were stuck before, so we waste a large amount of time.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Display the image and backup.</span></span><br><span class="line">display(image)</span><br><span class="line">backup(metaData) <span class="comment">// This is just an example...haha</span></span><br></pre></td></tr></table></figure><h2 id="Task-Group"><a href="#Task-Group" class="headerlink" title="Task Group"></a>Task Group</h2><blockquote><p>WWDC Sessionï¼š<a href="https://developer.apple.com/wwdc21/10134">æ¢ç´¢ Swift ä¸­çš„ç»“æ„åŒ–å¹¶å‘</a></p></blockquote><p>å¤šä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œçš„æ—¶å€™å¯ä»¥ä½¿ç”¨ Task Group</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Throwing Task Group</span></span><br><span class="line"><span class="type">Task</span>.detached &#123;</span><br><span class="line">    <span class="keyword">await</span> withThrowingTaskGroup(of: <span class="type">Void</span>.<span class="keyword">self</span>) &#123; group <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">for</span> task <span class="keyword">in</span> <span class="keyword">self</span>.tasks &#123;</span><br><span class="line">            group.addTask &#123;</span><br><span class="line">                <span class="keyword">try</span> <span class="keyword">await</span> <span class="operator">...</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Non-Throwing Task Group</span></span><br><span class="line"><span class="type">Task</span>.detached &#123;</span><br><span class="line">    <span class="keyword">await</span> withTaskGroup(of: <span class="type">Void</span>.<span class="keyword">self</span>) &#123; group <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">for</span> task <span class="keyword">in</span> <span class="keyword">self</span>.tasks &#123;</span><br><span class="line">            group.addTask &#123;</span><br><span class="line">                <span class="keyword">await</span> <span class="operator">...</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>TaskGroup</code> å¸¸ç”¨åœ¨ä¸€ç»„æ•°æ®çš„å¤„ç†ï¼Œä¾‹å¦‚ï¼šè·å–æ‰€æœ‰å•†å“çš„ç¼©ç•¥å›¾â€¦</p><p>ç”±äºæœ‰å¾ˆå¤š tasks åŒæ—¶æ‰§è¡Œï¼Œå› æ­¤å°±ä¼šæœ‰æ½œåœ¨çš„ Data Races</p><p>æˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹å¤–éƒ¨çš„å˜é‡èµ‹å€¼ï¼ˆè¿™æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶æ£€æŸ¥é”™è¯¯ï¼‰</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> integers <span class="operator">=</span> [<span class="type">Int</span>]()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Throwing Task Group</span></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">foo</span>() &#123;</span><br><span class="line">    <span class="type">Task</span>.detached &#123;</span><br><span class="line">        <span class="keyword">try</span> <span class="keyword">await</span> withThrowingTaskGroup(of: <span class="type">Int</span>.<span class="keyword">self</span>) &#123; group <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">for</span> <span class="keyword">_</span> <span class="keyword">in</span> <span class="number">0</span><span class="operator">...</span><span class="number">10</span> &#123;</span><br><span class="line">                group.addTask &#123;</span><br><span class="line">                   <span class="comment">// Return some values here.</span></span><br><span class="line">                    <span class="keyword">return</span> (<span class="number">0</span><span class="operator">...</span><span class="number">100</span>).randomElement()<span class="operator">!</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// Read values from the group.</span></span><br><span class="line">            <span class="keyword">for</span> <span class="keyword">try</span> <span class="keyword">await</span> value <span class="keyword">in</span> group &#123;</span><br><span class="line">                <span class="keyword">self</span>.integers.append(value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Non-Throwing Task Group</strong> æ–¹æ³•ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸å†æ¼”ç¤ºäº†ã€‚</p><blockquote><p>è¿™é‡Œä½¿ç”¨ <code>Task.detached</code> æ˜¯ä¸ºäº†é˜²æ­¢å—åˆ° Context çš„å½±å“ï¼Œ</p><p>ä¾‹å¦‚ï¼šä¸‹è½½æ‰€æœ‰å•†å“çš„ç¼©ç•¥å›¾åº”åœ¨å…¶ä»–çº¿ç¨‹ä¸Šå®Œæˆï¼Œè€Œéä¸»çº¿ç¨‹ã€‚</p><p>å¾€ä¸‹çœ‹å°±çŸ¥é“æˆ‘åœ¨è¯´ä»€ä¹ˆäº†ã€‚</p></blockquote><h2 id="Task-vs-Task-detached"><a href="#Task-vs-Task-detached" class="headerlink" title="Task vs. Task.detached"></a>Task vs. Task.detached</h2><blockquote><p>WWDC Sessionï¼š<a href="https://developer.apple.com/wwdc21/10134">æ¢ç´¢ Swift ä¸­çš„ç»“æ„åŒ–å¹¶å‘</a></p><p>ç›¸å…³æ–‡ç« ï¼š<a href="https://www.hackingwithswift.com/quick-start/concurrency/whats-the-difference-between-a-task-and-a-detached-task">Whatâ€™s the difference between a task and a detached task?</a></p></blockquote><p>Task æä¾›äº†ä¸€ç§ async çš„ç¯å¢ƒæ¥æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚</p><blockquote><p><strong>Task</strong>: Runs the given nonthrowing operation asynchronously as part of a new top-level task <strong>on behalf of the current actor</strong>.</p><p><strong>Task.detached</strong>: Runs the given throwing operation asynchronously as part of a <strong>new top-level</strong> task.</p></blockquote><p>Task ä¼šç»§æ‰¿å½“å‰çš„ Context å’Œ Priorityï¼Œ</p><p>Honestlyï¼Œè¿™å¥è¯æˆ‘ç†è§£äº†å¾ˆä¹…ï¼ŒPriorityå¥½ç†è§£ï¼Œä½†æ˜¯ Context æ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MainActor</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TaskManager1</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">doWorks</span>() &#123;</span><br><span class="line">        <span class="type">Task</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Execute on main thread: <span class="subst">\(Thread.isMainThread)</span>&quot;</span>) <span class="comment">// true</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Task</span>.detached &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;Execute on main thread: <span class="subst">\(Thread.isMainThread)</span>&quot;</span>) <span class="comment">// false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TaskManager2</span> &#123;</span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">doWorks</span>() &#123;</span><br><span class="line">        <span class="type">Task</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Execute on main thread: <span class="subst">\(Thread.isMainThread)</span>&quot;</span>) <span class="comment">// false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¸å¦‚çº¿ç¨‹ä¹‹ç±»çš„å±æ€§å°±æ˜¯æ‰€è°“çš„ Contextã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ä¸Šå±‚çš„è¿è¡Œç¯å¢ƒä¼šè¢«ç»§æ‰¿åˆ° Task ä¸­æ¥ï¼Œå¦‚æœä¸æƒ³è¦è¿™ç§ç»§æ‰¿ï¼Œä½¿ç”¨ <code>Task.detached</code></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ <code>Task.detached</code> éœ€è¦æ˜¾å¼æ•è· <code>self</code>ï¼Œå³ <code>self.variable</code></p><h2 id="Task-ObservableObject"><a href="#Task-ObservableObject" class="headerlink" title="Task + ObservableObject"></a>Task + ObservableObject</h2><blockquote><p>WWDC Sessionï¼š<a href="https://developer.apple.com/wwdc21/10134">æ¢ç´¢ Swift ä¸­çš„ç»“æ„åŒ–å¹¶å‘</a></p><p>ç›¸å…³æ–‡ç« ï¼š<a href="https://www.hackingwithswift.com/quick-start/concurrency/whats-the-difference-between-a-task-and-a-detached-task">Whatâ€™s the difference between a task and a detached task?</a></p></blockquote><p>åœ¨ SwiftUI ä¸­ï¼Œå¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬ä¼šä½¿ç”¨ <code>@ObservedObject</code> æˆ–è€… <code>@StateObject</code> æ¥ç®¡ç† ViewModel</p><p>è¿™æ—¶å€™ï¼Œè¯¥è§†å›¾å°±ä¼šåœ¨ <code>MainActor</code> ä¸‹æ‰§è¡Œã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Task</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">...</span><span class="number">1000</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Task 1: <span class="subst">\(i)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Task</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">...</span><span class="number">1000</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Task 2: <span class="subst">\(i)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä½ ä¼šå‘ç°æ§åˆ¶å°ä¸­ Task 1 å’Œ Task 2 ä»ç„¶ä¼šæŒ‰æ¬¡åºæ‰§è¡Œã€‚</p><p>è¿™æ˜¯å› ä¸º <code>@ObservedObject</code> æˆ–è€… <code>@StateObject</code> é™åˆ¶äº†è§†å›¾è¿è¡Œåœ¨ MainActor ä¸Šï¼Œ</p><p>æ‰€æœ‰çš„æ›´æ–°éƒ½å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ï¼Œè€Œ Task ä¼šç»§æ‰¿ Contextï¼Œå› æ­¤è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨ <code>Task.detached</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Task</span>.detached &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">...</span><span class="number">1000</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Task 1: <span class="subst">\(i)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Task</span>.detached &#123;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">...</span><span class="number">1000</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Task 2: <span class="subst">\(i)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éƒ½æ¢æˆ <code>Task.detached</code> ä¹‹åï¼ŒTask 1&#x2F;2 å°±æ˜¯ä¸€èµ·æ‰§è¡Œäº†ï¼Œä¹Ÿä¸ä¼šéƒ½æŒ¤åœ¨ä¸»çº¿ç¨‹ä¸Šè·‘äº†ã€‚</p><h2 id="nonisolated"><a href="#nonisolated" class="headerlink" title="nonisolated"></a>nonisolated</h2><blockquote><p>ç›¸å…³æ–‡ç« ï¼š<a href="https://www.hackingwithswift.com/quick-start/concurrency/how-to-make-parts-of-an-actor-nonisolated">How to make parts of an actor nonisolated</a></p></blockquote><p>è¿˜è®°å¾—æœ€å¼€å§‹çš„ <strong><a href="#actor">actor</a></strong> å§ï¼Œ</p><p>å¤šä¸ªå‡½æ•°è°ƒç”¨å®ƒçš„æ—¶å€™åªæœ‰å…¶ä¸­ä¸€ä¸ªèƒ½æ‰§è¡Œï¼Œå…¶ä½™çš„ç­‰å¾…ä¸Šä¸€ä¸ªæ‰§è¡Œå®Œæˆå†è¿›å…¥ï¼Œ</p><p>è¿™è¢«ç§°ä¸ºéš”ç¦»ï¼Œå¾ˆæœ‰æ•ˆåœ°é¿å…äº† Data Races</p><p>ä½†æ˜¯å¹¶é actor ä¸­æ‰€æœ‰çš„å‡½æ•°ã€å±æ€§éƒ½éœ€è¦è¢«éš”ç¦»å¼€ã€‚</p><ul><li>å¯¹ actor æ‰©å±• Hashable åè®®æ—¶ï¼Œ<code>hash(into hasher: inout Hasher)</code> ä¸æ”¯æŒ <code>async/await</code></li></ul><blockquote><p>WWDC Sessionï¼š<a href="https://developer.apple.com/wwdc21/10133?time=855">åˆ©ç”¨ Swift Actor ä¿æŠ¤å¯å˜çŠ¶æ€</a></p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">actor</span> <span class="title class_">MyHashableActor</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> staticValue <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> variable <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">extension</span> <span class="title class_">MyHashableActor</span>: <span class="title class_">Hashable</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">func</span> <span class="title function_">==</span> (<span class="params">lhs</span>: <span class="type">MyHashableActor</span>, <span class="params">rhs</span>: <span class="type">MyHashableActor</span>) -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// Comforms to Equatable</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">nonisolated</span> <span class="keyword">func</span> <span class="title function_">hash</span>(<span class="params">into</span> <span class="params">hasher</span>: <span class="keyword">inout</span> <span class="type">Hasher</span>) &#123;</span><br><span class="line">        hasher.combine(staticValue)</span><br><span class="line">        hasher.combine(variable) <span class="comment">// ğŸ™…</span></span><br><span class="line">     <span class="comment">// This is an error because variable is mutable</span></span><br><span class="line">      <span class="comment">// and the `hash(into hasher: inout Hasher)` is nonisolated.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>actor å†…éƒ¨çš„å‡½æ•°çš„å…¶ä¸­ä¸€éƒ¨åˆ†å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸æ€§èƒ½ã€‚</li></ul><blockquote><p>WWDC Sessionï¼š <a href="https://developer.apple.com/wwdc22/110350?time=1053">Swift å¹¶å‘çš„å¯è§†åŒ–ä¸ä¼˜åŒ–</a> </p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">actor</span> <span class="title class_">Compressor</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> state <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Since the function is nonisolated </span></span><br><span class="line">    <span class="comment">// and we still need to update the state,</span></span><br><span class="line">    <span class="comment">// so, the `compressFile()` funtion is marked `async`.</span></span><br><span class="line">    <span class="comment">// Now, the programme will only be blocked when updating the state.</span></span><br><span class="line">    <span class="keyword">nonisolated</span> <span class="keyword">func</span> <span class="title function_">compressFile</span>(<span class="keyword">_</span> <span class="params">file</span>: <span class="type">File</span>) <span class="keyword">async</span> -&gt; <span class="type">Data</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> updateState() <span class="comment">// Blocked here to avoid Data races.</span></span><br><span class="line">        <span class="keyword">let</span> data <span class="operator">=</span> compress(file) <span class="comment">// This operation can be ran simultaneously.</span></span><br><span class="line">        <span class="keyword">await</span> updateState() <span class="comment">// Also blocked here to avoid Data races.</span></span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">updateState</span>() &#123; state.toggle() &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> compressor <span class="operator">=</span> <span class="type">Compressor</span>()</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files &#123;</span><br><span class="line">    <span class="type">Task</span>.detached &#123;</span><br><span class="line">        <span class="keyword">let</span> data <span class="operator">=</span> <span class="keyword">await</span> <span class="keyword">self</span>.compressor.compressFile(file)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">compress</span>(<span class="keyword">_</span> <span class="params">file</span>: <span class="type">File</span>) -&gt; <span class="type">Data</span> &#123;</span><br><span class="line">    <span class="comment">// Compress file.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰§è¡Œé€»è¾‘ï¼ˆä¸ªäººç†è§£ï¼‰"><a href="#æ‰§è¡Œé€»è¾‘ï¼ˆä¸ªäººç†è§£ï¼‰" class="headerlink" title="æ‰§è¡Œé€»è¾‘ï¼ˆä¸ªäººç†è§£ï¼‰"></a>æ‰§è¡Œé€»è¾‘ï¼ˆä¸ªäººç†è§£ï¼‰</h2><blockquote><p>WWDC Sessionï¼š<a href="https://developer.apple.com/wwdc21/10254">Swift å¹¶å‘åŠŸèƒ½ï¼šå¹•åæ•…äº‹</a></p></blockquote><ol><li><code>@MainActor</code> ä¸­çš„ Task<ul><li>Task ä¸­çš„æ“ä½œå‡ç”± <strong>ä¸»çº¿ç¨‹</strong> å®Œæˆï¼Œç»§æ‰¿ <code>MainActor</code></li><li>é‡åˆ° <code>await</code> æ—¶ï¼Œ ç¨‹åºè¢«æŒ‚èµ·ï¼Œå¾…æ‰§è¡Œçš„ä»£ç è¢«è¿ç§»åˆ°å…¶ä»–çº¿ç¨‹ï¼ˆæ ¹æ® priority ä¾æ¬¡æ‰§è¡Œï¼‰ï¼Œä¸»çº¿ç¨‹é‡Šæ”¾ï¼Œä¾›å…¶ä»–éœ€è¦åœ¨ä¸»çº¿ç¨‹è¿è¡Œçš„ä»£ç ç»§ç»­ã€‚</li><li><code>await</code> ç»“æœå¯ç”¨ä¹‹åï¼Œä»å‘†åœ¨åŸåœ°ï¼Œç­‰å¾…ä¸»çº¿ç¨‹ç©ºé—²ï¼Œä¹‹åå›åˆ°ä¸»çº¿ç¨‹ï¼Œæ¢å¤ä¹‹å‰çš„çŠ¶æ€ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚</li></ul></li><li>é <code>@MainActor</code> ä¸­çš„ Task<ul><li>Task ä¸­çš„æ“ä½œå‡ä¼šåœ¨ <strong>å…¶ä»–çº¿ç¨‹</strong> ä¸­å®Œæˆï¼Œç»§æ‰¿ä¸Šå±‚çš„ Context</li><li>åä¸¤ç‚¹ä¸ä¸Šä¸€æ¡åŸºæœ¬ä¸€è‡´</li></ul></li><li><code>Task.detached</code> <ul><li>ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å®Œæˆæ“ä½œã€‚</li></ul></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;Swift å¹¶å‘æ˜¯ WWDC 21 ä¸Šçš„ä¸€ä¸ªé‡ç£…æ”¹è¿›ï¼Œæä¾›äº† &lt;code&gt;async/await&lt;/code&gt; çš„è¯­æ³•ï¼Œ&lt;/p&gt;
&lt;p&gt;è®©ä»£ç ç»“æ„æ›´åŠ æµç¨‹åŒ–ï¼Œæ›´åŠ ä¾¿äºç†è§£å’Œè°ƒè¯•ã€‚&lt;/p&gt;
&lt;p&gt;å®˜æ–¹æŒ‡å—ï¼š&lt;a href=&quot;https://developer.apple.com/news/?id=o140tv24&quot;&gt;å¼€å§‹ä½¿ç”¨ Swift å¹¶å‘&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://developer.apple.com/assets/elements/icons/swift/swift-64x64_2x.png&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Swift" scheme="https://liyanan2004.github.io/tags/Swift/"/>
    
    <category term="Concurrency" scheme="https://liyanan2004.github.io/tags/Concurrency/"/>
    
  </entry>
  
  <entry>
    <title>Google Chromium Encryption Structure</title>
    <link href="https://liyanan2004.github.io/chromium-encryption-structure/"/>
    <id>https://liyanan2004.github.io/chromium-encryption-structure/</id>
    <published>2022-12-06T05:13:26.262Z</published>
    <updated>2022-12-06T05:22:13.291Z</updated>
    
    <content type="html"><![CDATA[<article class="message is-warning">                <div class="message-body">            <p>æ¥æºï¼š<a href="https://gist.github.com/creachadair/937179894a24571ce9860e2475a2d2ec">GitHub</a>ï¼Œä»…ä¾›å­¦ä¹ ä½¿ç”¨ã€‚</p>        </div>    </article><p>Google Chrome stores browser cookies in an SQLite database.  The database has two tables, <code>meta</code> containing format and version metadata, and <code>cookies</code> with the contents of the cookies. The <code>cookies</code> table uses this schema:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- To reproduce: sqlite path/to/Cookies .schema</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> cookies (</span><br><span class="line">   creation_utc     <span class="type">INTEGER</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  <span class="comment">-- microseconds since epoch</span></span><br><span class="line">   host_key         TEXT     <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  <span class="comment">-- domain</span></span><br><span class="line">   name             TEXT     <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   <span class="keyword">value</span>            TEXT     <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   path             TEXT     <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   expires_utc      <span class="type">INTEGER</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  <span class="comment">-- microseconds since epoch</span></span><br><span class="line">   is_secure        <span class="type">INTEGER</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   is_httponly      <span class="type">INTEGER</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   last_access_utc  <span class="type">INTEGER</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   has_expires      <span class="type">INTEGER</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span>  <span class="number">1</span>,</span><br><span class="line">   is_persistent    <span class="type">INTEGER</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span>  <span class="number">1</span>,</span><br><span class="line">   priority         <span class="type">INTEGER</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span>  <span class="number">1</span>,</span><br><span class="line">   encrypted_value  <span class="type">BLOB</span>              <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">   samesite         <span class="type">INTEGER</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span>  <span class="number">-1</span>,</span><br><span class="line">   source_scheme    <span class="type">INTEGER</span>  <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span>  <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">   <span class="keyword">UNIQUE</span> (host_key, name, path)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="Timestamps"><a href="#Timestamps" class="headerlink" title="Timestamps"></a>Timestamps</h2><p>The <code>expires_utc</code> and <code>creation_utc</code> fields contain timestamps given as integer numbers of microseconds elapsed since midnight 01-Jan-1601 UTC in the proleptic calendar. The Unix epoch is 11644473600 seconds after this moment.</p><h2 id="Values"><a href="#Values" class="headerlink" title="Values"></a>Values</h2><p>The <code>value</code> and <code>encrypted_value</code> fields are used to store cookie values. In practice, one or the other is populated, but not both.</p><table><thead><tr><th><code>value</code></th><th><code>encrypted_value</code></th><th>Description</th></tr></thead><tbody><tr><td>empty</td><td>non-empty</td><td>Value is encrypted</td></tr><tr><td>non-empty</td><td>empty</td><td>Value is unencrypted</td></tr><tr><td>empty</td><td>empty</td><td>Value is unencrypted</td></tr><tr><td>non-empty</td><td>non-empty</td><td>(not observed)</td></tr></tbody></table><h2 id="Storage-Format"><a href="#Storage-Format" class="headerlink" title="Storage Format"></a>Storage Format</h2><p>An encrypted value consists of a data packet that is encrypted with AES-128 in CBC mode. The encrypted data packet has the following format:</p><table><thead><tr><th>Bytes</th><th>Content</th><th>Description</th></tr></thead><tbody><tr><td>3</td><td>â€œv10â€ (0x76 0x31 0x30)</td><td>Version tag (unencrypted)</td></tr><tr><td>n</td><td>value</td><td>Payload (encrypted)</td></tr><tr><td>p</td><td>padding</td><td>Padding (encrypted), 1â€“16 bytes</td></tr></tbody></table><p>The encrypted portion of the packet (n+ p) contains a multiple of 16 bytes. If n is a multiple of 16, p &#x3D; 16; otherwise 1 â‰¤Â p â‰¤Â 15.</p><h3 id="Padding"><a href="#Padding" class="headerlink" title="Padding"></a>Padding</h3><p>Before encryption, p bytes of padding are added to the plaintext value to ensure a multiple of 16 bytes. At least one byte of padding is always added, so if the value is already a multiple of 16 bytes, p&#x3D;16 additional are added. Each padding byte has the value p, so if p&#x3D;5, the padding is the 5-byte sequence [5, 5, 5, 5, 5].</p><p>After decryption, the padding must be removed, and it can be used to verify that the decryption key was correct. The final byte of the decrypted packet must be a padding byte with value 1 â‰¤ p â‰¤ 16, and the last p bytes of the packet must contain the value p. Otherwise, the decryption key can be assumed to be incorrect.</p><h3 id="Encryption"><a href="#Encryption" class="headerlink" title="Encryption"></a>Encryption</h3><p>Encryption and decryption are performed using AES-128 in cipher-block chaining (CBC) mode with an initialization vector consisting of 16 space bytes (Unicode 32). The encryption key is described below. </p><h2 id="Key-Generation"><a href="#Key-Generation" class="headerlink" title="Key Generation"></a>Key Generation</h2><p>The 16-byte AES-128 encryption key is generated using the <a href="https://tools.ietf.org/html/rfc2898">PBKDF2 (RFC 2898)</a> algorithm from a user-provided passphrase. The key generation salt is the fixed string <code>saltysalt</code>. On macOS, Chrome uses 1003 iterations of the key generation algorithm; on Linux it uses 1 iteration. I donâ€™t know what it does on Windows.</p>]]></content>
    
    
    <summary type="html">&lt;article class=&quot;message is-warning&quot;&gt;
        
        &lt;div class=&quot;message-body&quot;&gt;
            &lt;p&gt;æ¥æºï¼š&lt;a href=&quot;https://gist.github.com/creachadair/937179894a24571ce9860e2475a2d2ec&quot;&gt;GitHub&lt;/a&gt;ï¼Œä»…ä¾›å­¦ä¹ ä½¿ç”¨ã€‚&lt;/p&gt;

        &lt;/div&gt;
    &lt;/article&gt;

&lt;p&gt;Google Chrome stores browser cookies in an SQLite database.  The database has two tables, &lt;code&gt;meta&lt;/code&gt; containing format and version metadata, and &lt;code&gt;cookies&lt;/code&gt; with the contents of the cookies. The &lt;code&gt;cookies&lt;/code&gt; table uses this schema:&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- To reproduce: sqlite path/to/Cookies .schema&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;TABLE&lt;/span&gt; cookies (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   creation_utc     &lt;span class=&quot;type&quot;&gt;INTEGER&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;-- microseconds since epoch&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   host_key         TEXT     &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;-- domain&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   name             TEXT     &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt;            TEXT     &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   path             TEXT     &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   expires_utc      &lt;span class=&quot;type&quot;&gt;INTEGER&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt;,  &lt;span class=&quot;comment&quot;&gt;-- microseconds since epoch&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   is_secure        &lt;span class=&quot;type&quot;&gt;INTEGER&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   is_httponly      &lt;span class=&quot;type&quot;&gt;INTEGER&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   last_access_utc  &lt;span class=&quot;type&quot;&gt;INTEGER&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   has_expires      &lt;span class=&quot;type&quot;&gt;INTEGER&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   is_persistent    &lt;span class=&quot;type&quot;&gt;INTEGER&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   priority         &lt;span class=&quot;type&quot;&gt;INTEGER&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   encrypted_value  &lt;span class=&quot;type&quot;&gt;BLOB&lt;/span&gt;              &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;#x27;&amp;#x27;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   samesite         &lt;span class=&quot;type&quot;&gt;INTEGER&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   source_scheme    &lt;span class=&quot;type&quot;&gt;INTEGER&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DEFAULT&lt;/span&gt;  &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;UNIQUE&lt;/span&gt; (host_key, name, path)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="çæŠ˜è…¾" scheme="https://liyanan2004.github.io/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/"/>
    
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://liyanan2004.github.io/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
    <category term="æµè§ˆå™¨" scheme="https://liyanan2004.github.io/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>macOS å¼€å‘ -- URL è®¿é—®æƒé™æŒä¹…åŒ–ï¼ˆåŸºäº Sandboxï¼‰</title>
    <link href="https://liyanan2004.github.io/sandbox-url-persistence/"/>
    <id>https://liyanan2004.github.io/sandbox-url-persistence/</id>
    <published>2022-11-08T14:09:58.698Z</published>
    <updated>2022-11-08T15:25:47.598Z</updated>
    
    <content type="html"><![CDATA[<p>å¥½ä¹…ä¸è§ï¼Œæœ€è¿‘æœ‰åœ¨å¥½å¥½å­¦ä¹ å“ˆå“ˆï¼Œ</p><p>ä»Šå¤©æ¥åˆ†äº«ä¸‹åŸºäº Sandbox çš„ URL è®¿é—®æƒé™æŒä¹…åŒ–çš„æ–¹æ¡ˆã€‚</p><p>å†™è¿™ç¯‡æ–‡ç« çš„èµ·å› æ˜¯ï¼š</p><p>ç®€å•æµè§ˆäº†ä¸‹ <strong><a href="https://github.com/Tencent/lemon-cleaner">Tencent&#x2F;lemon-cleaner</a></strong> çš„éƒ¨åˆ†æºç ï¼Œ</p><p>å‘ç°ä»–ä»¬ç”¨ Apple Script è°ƒç”¨ Finder æ“ä½œæ–‡ä»¶ï¼Œ</p><p>è¿™æ ·å¾ˆå¥½åœ°é¿å…äº†æƒé™é—®é¢˜ï¼Œä½†æ˜¯ç ”ç©¶ä¸€ç•ªå‘ç°ï¼Œ<strong>æ²¡é‚£ä¹ˆç®€å•</strong>â€¦.</p><span id="more"></span><h2 id="Bookmark-å¤§æ³•"><a href="#Bookmark-å¤§æ³•" class="headerlink" title="Bookmark å¤§æ³•"></a>Bookmark å¤§æ³•</h2><p>è¿™æ˜¯æˆ‘è‡ªå·±é¡¹ç›®é‡Œä½¿ç”¨çš„æ–¹æ³•ï¼Œ</p><p>å¥½å¤„åœ¨äºæ–‡ä»¶æ“ä½œå¾ˆè‡ªç„¶ï¼Œ ä¸ä¼šè®©ç”¨æˆ·è§‰å¾—è‡ªå·±çš„æ•°æ®å¯ä»¥è¢«éšä¾¿ä¹±ç¿»ï¼ˆäº‹å®ä¹Ÿç¡®å®æ˜¯è¿™æ ·çš„ï¼‰</p><ol><li><p>å°† App Sandbox â€“&gt; File Access å†…çš„ <code>User Selected File</code> æ”¹ä¸º <code>Read/Write</code></p></li><li><p>åœ¨é¡¹ç›®çš„ entitlements æ–‡ä»¶ä¸­æ·»åŠ è¿™æ ·ä¸€é¡¹ <code>com.apple.security.files.bookmarks.app-scope</code>ï¼Œè®¾ä¸º <code>YES</code></p></li><li><p>ä½¿ç”¨ NSOpenPannel &#x2F; NSSavePannel é€‰æ‹©éœ€è¦è®¿é—®çš„æ–‡ä»¶ï¼ˆå¤¹ï¼‰</p></li></ol><blockquote><p>åœ¨ SwiftUI ä¸­ç›´æ¥ç”¨ .fileImporter ä¹‹ç±»çš„ modifer å°±è¡Œ</p><p>è¿™æ ·å°±æ‹¿åˆ°äº†ç”¨æˆ·é€‰æ‹©çš„ URL å•¦ï¼Œå› ä¸ºæ˜¯ç”¨æˆ·é€‰æ‹©çš„ï¼Œ<strong>ç›®å‰è¿™ä¸ª URL æ˜¯æœ‰æƒè®¿é—®çš„</strong></p><p><strong>æ³¨æ„ï¼Œæ˜¯ç›®å‰ï¼Œé‡å¯ app å°±ä¸è¡Œäº†</strong></p><p>å› æ­¤æˆ‘ä»¬éœ€è¦æŠŠæƒé™æŒä¹…åŒ–ã€‚</p></blockquote><ol start="4"><li>ä¿å­˜ URL çš„ bookmark</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AppStorage</span>(<span class="string">&quot;bookmark&quot;</span>) <span class="keyword">private</span> <span class="keyword">var</span> bookmark: <span class="type">Data</span>?</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  bookmark <span class="operator">=</span> <span class="keyword">try</span> url.bookmarkData(options: .withSecurityScope)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123; </span><br><span class="line">  <span class="built_in">print</span>(error.localizedDescription) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>ï¼ˆapp é‡å¯åï¼‰å†æ¬¡è®¿é—®æ­¤ URL</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">guard</span> <span class="keyword">let</span> bookmark <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line"><span class="keyword">var</span> isStale <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">let</span> url <span class="operator">=</span> <span class="keyword">try</span> <span class="type">URL</span>(resolvingBookmarkData: bookmark, options: .withSecurityScope, relativeTo: <span class="literal">nil</span>, bookmarkDataIsStale: <span class="operator">&amp;</span>isStale)</span><br><span class="line">url.startAccessingSecurityScopedResource()</span><br><span class="line"><span class="comment">// Do some file-related works like move, duplicate, etc.</span></span><br><span class="line"><span class="comment">// try? FileManager.default.moveItem(at: a, to: b)</span></span><br><span class="line">url.stopAccessingSecurityScopedResource()</span><br></pre></td></tr></table></figure><blockquote><p><strong>start å’Œ stop ä¸€å®šè¦æˆå¯¹ï¼ï¼</strong></p><p>è¿™é‡Œå±äºæ˜¯è®¿é—®ç³»ç»Ÿæ•æ„Ÿæ•°æ®ï¼Œå¦‚æœä¸åŠæ—¶ stop çš„è¯ç³»ç»Ÿå¯èƒ½ä¼šå¯¹ app çš„æƒé™åšé™åˆ¶ï¼Œ</p><p>å› æ­¤ä¸èƒ½æ»¥ç”¨ï¼Œè¿™å°±æ˜¯ Sandbox ä¸ºä»€ä¹ˆå®‰å…¨ã€è®©äººæ”¾å¿ƒçš„åŸå› äº†ã€‚</p><p><code>url.startAccessingSecurityScopedResource()</code> ä¹Ÿä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå‘Šè¯‰ä½ ä½ æ˜¯å¦çœŸçš„å¯ä»¥è¿™é‡Œçš„æ•°æ®äº†ï¼Œå¦‚æœä¸º <code>true</code> æ‰èƒ½ç®—æˆåŠŸã€‚</p></blockquote><h2 id="Apple-Script-å¤§æ³•"><a href="#Apple-Script-å¤§æ³•" class="headerlink" title="Apple Script å¤§æ³•"></a>Apple Script å¤§æ³•</h2><p>Apple Script å®é™…ä¸Šæ˜¯ä»£æ›¿ç”¨æˆ·æ“ä½œçš„ä¸€ç§è„šæœ¬ï¼Œæœ¬è´¨ä¸Šæ˜¯ä»£æ›¿äº†æ‰‹åŠ¨çš„æ“ä½œè€Œå·²ï¼Œå› æ­¤è¿™é‡Œå¯ä»¥æ“ä½œæ‰€æœ‰æ–‡ä»¶äº†ï¼Œåœ¨æ²™ç›’ç¯å¢ƒä¸‹å½“ç„¶æ˜¯ä¸ä¼šé»˜è®¤å…è®¸çš„ã€‚</p><blockquote><p>å¦‚æœå¯ç”¨äº† Hardened Runtimeï¼Œè¦å…ˆåœ¨é‡Œé¢å¯ç”¨ Apple Eventsï¼Œå¦åˆ™æ— æ³•å¼¹å‡ºè¯·æ±‚æ¡†ã€‚</p></blockquote><h3 id="é-Sandbox"><a href="#é-Sandbox" class="headerlink" title="é Sandbox"></a>é Sandbox</h3><p>å¦‚æœåœ¨ é Sandbox ç¯å¢ƒä¸‹ï¼Œåªéœ€è¦é…ç½® <code>Privacy - AppleEvents Sending Usage Description</code> å‘Šè¯‰ç”¨æˆ·ä½ æ‰§è¡Œçš„è„šæœ¬çš„åŠŸèƒ½æ˜¯å¹²å•¥çš„å°±è¡Œã€‚</p><p>ç„¶åå°±å¯ä»¥ä»»æ„è°ƒç”¨ applicationsäº†ï¼Œä¾‹å¦‚ï¼Œè°ƒç”¨ Finder æ¥ move æ–‡ä»¶ä¹‹ç±»çš„ã€‚</p><p>åˆ«æ…Œï¼å³ä½¿æ˜¯é Sandbox ä¹Ÿä¼šæœ‰ä¸€æ­¥â€œè‡ªåŠ¨åŒ–â€æˆæƒçš„ï¼</p><p><img src="/img/sandbox-url-persistence/automation-permission.png"></p><h3 id="Sandbox"><a href="#Sandbox" class="headerlink" title="Sandbox"></a>Sandbox</h3><p>åœ¨ Sandbox ç¯å¢ƒä¸‹å°±ä¼šæœ‰é™åˆ¶äº†ï¼Œä¸ä¼šè®©ä½ èƒ½ç›´æ¥è®¿é—®æ‰€æœ‰çš„ applications ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šæœ‰æ½œåœ¨çš„æ¶æ„è¡Œä¸ºã€‚</p><ol><li><p>ä½ è¿˜æ˜¯å¾—é…ç½® <code>Privacy - AppleEvents Sending Usage Description</code> å‘Šè¯‰ç”¨æˆ·ä½ æ‰§è¡Œçš„è„šæœ¬çš„åŠŸèƒ½æ˜¯å¹²å•¥çš„ï¼Œ</p></li><li><p>ä½ åœ¨éœ€è¦ä½¿ç”¨å¯¹åº”çš„ applications ä¹‹å‰éœ€è¦å» entitlements é‡Œæå‰å£°æ˜ã€‚ï¼ˆç”¨åˆ°å‡ ä¸ªå†™å‡ ä¸ªï¼‰</p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>com.apple.security.temporary-exception.apple-events<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">string</span>&gt;</span>com.apple.Finder<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·ä½ å°±å¯ä»¥åœ¨ app ä¸­ä½¿ç”¨ NSAppleScript æ‰§è¡Œè„šæœ¬äº†ã€‚</p><p><strong>å¦åˆ™ï¼Œä¼šæŠ¥é”™ -600</strong></p><p><strong>å› ä¸ºæ˜¯æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œçš„è„šæœ¬ï¼Œå› æ­¤åœ¨ç§»åŠ¨æ–‡ä»¶ã€åˆ é™¤æ–‡ä»¶çš„æ—¶å€™éƒ½ä¼šæœ‰ç³»ç»Ÿæç¤ºéŸ³å“¦ï½</strong></p><h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>ç›®å‰æˆ‘çš„é¡¹ç›®ä¸­è¿˜æ˜¯ä½¿ç”¨äº† Bookmark å¤§æ³•ï¼Œæ›´åŠ ç®€å•ï¼Œä¸ä¼šè®©ç”¨æˆ·è§‰å¾—å±é™©ã€‚</p><p>ä¸»è¦æ˜¯ Apple Script é‚£äº›å¼¹çª—å°±è›®å“äººäº†â€¦</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¥½ä¹…ä¸è§ï¼Œæœ€è¿‘æœ‰åœ¨å¥½å¥½å­¦ä¹ å“ˆå“ˆï¼Œ&lt;/p&gt;
&lt;p&gt;ä»Šå¤©æ¥åˆ†äº«ä¸‹åŸºäº Sandbox çš„ URL è®¿é—®æƒé™æŒä¹…åŒ–çš„æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å†™è¿™ç¯‡æ–‡ç« çš„èµ·å› æ˜¯ï¼š&lt;/p&gt;
&lt;p&gt;ç®€å•æµè§ˆäº†ä¸‹ &lt;strong&gt;&lt;a href=&quot;https://github.com/Tencent/lemon-cleaner&quot;&gt;Tencent&amp;#x2F;lemon-cleaner&lt;/a&gt;&lt;/strong&gt; çš„éƒ¨åˆ†æºç ï¼Œ&lt;/p&gt;
&lt;p&gt;å‘ç°ä»–ä»¬ç”¨ Apple Script è°ƒç”¨ Finder æ“ä½œæ–‡ä»¶ï¼Œ&lt;/p&gt;
&lt;p&gt;è¿™æ ·å¾ˆå¥½åœ°é¿å…äº†æƒé™é—®é¢˜ï¼Œä½†æ˜¯ç ”ç©¶ä¸€ç•ªå‘ç°ï¼Œ&lt;strong&gt;æ²¡é‚£ä¹ˆç®€å•&lt;/strong&gt;â€¦.&lt;/p&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Swift" scheme="https://liyanan2004.github.io/tags/Swift/"/>
    
    <category term="Sandbox" scheme="https://liyanan2004.github.io/tags/Sandbox/"/>
    
    <category term="macOS" scheme="https://liyanan2004.github.io/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>è®°å½•ä¸‹ MarkdownView çš„æ€§èƒ½ä¼˜åŒ–</title>
    <link href="https://liyanan2004.github.io/markdownview-performance-optimization/"/>
    <id>https://liyanan2004.github.io/markdownview-performance-optimization/</id>
    <published>2022-10-16T14:03:33.656Z</published>
    <updated>2023-01-01T07:08:06.232Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘çš„å¼€æºé¡¹ç›® MarkdownView çš„ <strong><a href="https://github.com/LiYanan2004/MarkdownView/releases/tag/0.2.0">0.2.0 ç‰ˆæœ¬</a></strong> ç»ˆäºå‘å¸ƒäº†ï¼</p><p>æ”¹ç‰ˆæœ¬å¸¦æ¥äº†æ€§èƒ½ä¸Šçš„å·¨å¤§è¿›æ­¥ï¼š</p><blockquote><h2 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h2><ul><li>Rendering is now <strong>at least 3x faster on ALL DEVICES</strong>.</li><li>Real-time previewing is now much much smoother.</li><li>Scrolling is much quicker and smoother <strong>with no frame drop</strong>.</li><li>Memory usage has been reduced by 30%</li></ul></blockquote><p>å€Ÿæ­¤æœºä¼šï¼Œè®°å½•ä¸‹æˆ‘çš„ä¼˜åŒ–æ€è·¯ã€‚</p><span id="more"></span><h2 id="å‰æœŸè¡¨ç°"><a href="#å‰æœŸè¡¨ç°" class="headerlink" title="å‰æœŸè¡¨ç°"></a>å‰æœŸè¡¨ç°</h2><ul><li>å¯åŠ¨ã€åˆæ¬¡æ¸²æŸ“è€—æ—¶é•¿</li><li>æ¸²æŸ“å®Œæˆåä¸Šä¸‹æ»šåŠ¨çš„æ—¶å€™æ‰å¸§ä¸¥é‡ï¼ˆä½¿ç”¨æ‡’åŠ è½½æ¨¡å¼ï¼‰</li><li>æ¸²æŸ“å®Œæˆåä¸Šä¸‹æ»šåŠ¨çš„æ—¶å€™å†…å­˜å ç”¨é‡å¤ªå¤§äº†ï¼ˆå…³é—­äº†æ‡’åŠ è½½æ¨¡å¼ï¼‰</li><li>ç”¨ä½œâ€œå®æ—¶é¢„è§ˆâ€çš„æ—¶å€™ä¼šå¡ï¼Œå¯¼è‡´è¾“å…¥ä½“éªŒå¾ˆç³Ÿç³•</li></ul><p>ç»¼åˆä»¥ä¸Šè¡¨ç°ï¼Œæ–°åŠŸèƒ½éƒ¨åˆ†ä¹Ÿå·²ç»å®šå‹äº†ï¼Œæ‰€ä»¥å†³å®šå¥½å¥½ä¼˜åŒ–ä¸‹æ€§èƒ½ï¼Œ</p><p>è‡³å°‘åœ¨æˆ‘è¿™å° 2019 æ¬¾çš„ MacBook Pro ä¸Šä¸è¦æœ‰æ˜æ˜¾çš„å¡é¡¿å§â€¦</p><h2 id="æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–"><a href="#æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–"></a>æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–</h2><h3 id="å®šä½é—®é¢˜"><a href="#å®šä½é—®é¢˜" class="headerlink" title="å®šä½é—®é¢˜"></a>å®šä½é—®é¢˜</h3><p>æˆ‘æƒ³å…ˆæ¥ä»‹ç»ä¸‹ MarkdownView çš„æ•´å¥—æ¸²æŸ“æµç¨‹ï¼Œ</p><p>å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/img/markdownview-performance-optimization/how-to-render.jpeg"></p><p>æœ¬æ¥ä»¥ä¸ºæ˜¯<del>åœ¨æœ€åæ•´åˆçš„æ—¶å€™ Layout åå¤è¿ç®—å¯¼è‡´é€Ÿåº¦æ…¢</del>ï¼Œ</p><p>æœ€åæˆ‘ç”¨æˆ‘ç¬¬ä¸€ç¯‡åšå®¢æµ‹è¯•äº†ä¸‹ï¼Œå¯åŠ¨æ¸²æŸ“å±…ç„¶éœ€è¦ 20sï¼Œ</p><p>å±äºæ˜¯å®Œå…¨å¡ä½çš„æ„Ÿè§‰ï¼Œåœ¨ Xcode ä¸­èƒ½çœ‹åˆ° CPU å ç”¨æŒç»­åœ¨ 100% å·¦å³ï¼Œ</p><p>æœ€åå®šä½åˆ° <strong>åˆ†è¯æ¨¡å—</strong> è€—è´¹äº†å¤§é‡ CPU æ—¶é—´ï¼Œ</p><p>è¿™å°±æ˜¯ä¼˜åŒ–çš„é‡ç‚¹äº†ï¼ï¼</p><h3 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h3><p>åˆ†è¯æ¨¡å—çš„ä½œç”¨æ˜¯ä¿è¯æ–‡æœ¬éƒ½èƒ½ä»¥å¾ˆçŸ­çš„å½¢å¼å‘ˆç°ï¼Œ</p><p>ç”¨äºå®ç°<strong>åˆç†çš„</strong>è‡ªåŠ¨æ¢è¡Œï¼Œ</p><p>ä½†æ˜¯åˆ†è¯æ¨¡å—ä¾èµ– Natural Language æ¡†æ¶è¿›è¡Œåˆ†è¯ï¼Œ</p><p>æœ¬è´¨ä¸Šå°±æ˜¯æœºå™¨å­¦ä¹ çš„åˆ†è¯ï¼Œéœ€è¦æ—¶é—´æ¥å®Œæˆï¼Œ</p><p>åŒæ—¶æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯ <strong>åŒæ­¥æ‰§è¡Œï¼ˆsyncï¼‰</strong> çš„ï¼Œ</p><p>ä¸Šä¸€ä¸ªç»“æŸäº†æ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªï¼Œ</p><p>æ®µè½ä¸€å¤šï¼Œå¤§é‡çš„æ—¶é—´éƒ½è¢«æµªè´¹åœ¨ä¸€æ®µæ®µåˆ†è¯äº†ã€‚</p><h3 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h3><ul><li><strong>å¼‚æ­¥æ‰§è¡Œï¼ˆasyncï¼‰</strong>æ‰€æœ‰çš„åˆ†è¯æ“ä½œï¼Œè¿™æ ·å¯ä»¥<strong>è®©æ‰€æœ‰æ®µè½çš„åˆ†è¯åŒæ—¶å¼€å§‹</strong></li></ul><p><img src="/img/markdownview-performance-optimization/sync-and-async-clocks.jpeg"></p><ul><li>æ–‡æœ¬æ¸²æŸ“ä½¿ç”¨å•ç‹¬çš„ <code>TextView</code> æ¥æ¸²æŸ“ï¼Œ<strong>é»˜è®¤æ˜¾ç¤ºç©ºç™½ç­‰å¾…åˆ†è¯ç»“æŸåè‡ªåŠ¨æ’ç‰ˆ</strong></li></ul><p>è¿˜æ˜¯ç”¨æˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢ä½œä¸ºæµ‹è¯•ï¼ŒåŠ è½½é€Ÿåº¦ä» 20s ç¼©çŸ­åˆ°äº† 1sï¼Œå†…å­˜å ç”¨ä¹Ÿä¸‹é™äº† 20%ã€‚</p><p><strong>è¿™ä¹Ÿæ˜¯æˆ‘ä¸ºä»€ä¹ˆä¼šåœ¨æ–°ç‰ˆä¸­å¼ƒç”¨ æ‡’åŠ è½½ (Lazy Loading) çš„ä¸»è¦åŸå› ã€‚</strong></p><h2 id="å®æ—¶é¢„è§ˆæ€§èƒ½ä¼˜åŒ–"><a href="#å®æ—¶é¢„è§ˆæ€§èƒ½ä¼˜åŒ–" class="headerlink" title="å®æ—¶é¢„è§ˆæ€§èƒ½ä¼˜åŒ–"></a>å®æ—¶é¢„è§ˆæ€§èƒ½ä¼˜åŒ–</h2><h3 id="å®šä½é—®é¢˜-1"><a href="#å®šä½é—®é¢˜-1" class="headerlink" title="å®šä½é—®é¢˜"></a>å®šä½é—®é¢˜</h3><p>è¿™é‡Œçš„é—®é¢˜å…·ä½“è¡¨ç°åœ¨å½“æˆ‘è¿ç»­è¾“å…¥æ–‡æœ¬çš„æ—¶å€™ï¼Œ</p><p>CPUå ç”¨é«˜ï¼Œå¹¶ä¸”ä¼´éš <strong>è¾“å…¥æ¡†</strong> ä¹Ÿå¾ˆå¡é¡¿ã€‚</p><h3 id="é—®é¢˜åˆ†æ-1"><a href="#é—®é¢˜åˆ†æ-1" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h3><p>æ¥ç€ä¸Šé¢çš„æ€è·¯ï¼Œ</p><p>æ¯æ¬¡æœ‰å¾®å°å˜åŠ¨çš„æ—¶å€™ï¼ŒMarkdownView éƒ½ä¼šé‡æ–°èµ°æ•´å¥—æµç¨‹ï¼Œ</p><p>æœ¬ä»¥ä¸ºæ˜¯å¼‚æ­¥å¤„ç†å¾—è¿‡äºé¢‘ç¹å¯¼è‡´å¡é¡¿ï¼Œ</p><p><del>äºæ˜¯å°±ç”¨Combineåšäº†debounceå¤„ç†ï¼Œ<strong>åœ¨è¾“å…¥é—´éš™æ‰§è¡Œé‡æ–°æ¸²æŸ“</strong>ï¼Œ</del></p><p>é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œ</p><p>è€Œä¸”ï¼Œä¸­æ–‡è¾“å…¥å°±æ²¡æœ‰é—®é¢˜ï¼Œ</p><p>é‡æ–°è€ƒè™‘äº†ä¸‹ æ¸²æŸ“æµç¨‹ å’Œ SwiftUI åˆ·æ–°æœºåˆ¶ï¼Œ</p><p>æ¯æ¬¡æœ‰å˜åŠ¨çš„æ—¶å€™ï¼Œéƒ½è¦é‡æ–°è¿›å…¥è§£ææµç¨‹ï¼Œ</p><h4 id="è‹±æ–‡"><a href="#è‹±æ–‡" class="headerlink" title="è‹±æ–‡"></a>è‹±æ–‡</h4><p>ä¸è®ºæ˜¯å¤šæ‰“ä¸€ä¸ªå­—æ¯æˆ–æ˜¯åˆ é™¤ä¸€ä¸ªå­—æ¯ï¼Œéƒ½ä¼šé‡è§£æï¼Œ</p><h4 id="ä¸­æ–‡"><a href="#ä¸­æ–‡" class="headerlink" title="ä¸­æ–‡"></a>ä¸­æ–‡</h4><p>è¾“å…¥æ‹¼éŸ³æ—¶æœ¬è´¨ä¸Šè¿˜æ²¡æœ‰è®©æ–‡æœ¬æ”¹å˜ï¼Œä¸ä¼šé‡è§£æï¼Œ</p><p>åªæœ‰æ‹¼éŸ³è½¬æˆæ–‡æœ¬ä¹‹åï¼Œç»Ÿä¸€è¿›è¡Œä¸€æ¬¡é‡è§£æï¼Œ</p><p>Soï¼Œ</p><p>åœ¨è‹±æ–‡çŠ¶æ€ä¸‹ï¼Œè¿‡äºé¢‘ç¹çš„é‡è§£ææ˜¯å¯¼è‡´å¡é¡¿çš„â€œç½ªé­ç¥¸é¦–â€ã€‚</p><h3 id="è§£å†³æ€è·¯-1"><a href="#è§£å†³æ€è·¯-1" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h3><ul><li>å¯¹äºä¸€å¼€å§‹çš„æ–‡æœ¬è¾“å…¥åš debounce å¤„ç†ï¼Œ<strong>åœ¨è¾“å…¥é—´éš™æ‰§è¡Œé‡è§£æã€é‡æ¸²æŸ“</strong>ã€‚</li></ul><p>è¿™æ ·ä¸€æ¥ï¼Œåœ¨è¿ç»­è¾“å…¥å­—ç¬¦çš„æ—¶å€™ä¸ä¼šæ¯ä¸€æ¬¡éƒ½æ‰§è¡Œé‡æ–°è§£æå’Œæ¸²æŸ“ï¼Œ</p><p>åªæœ‰åœ¨æˆ‘è¾“å…¥æ—¶çš„åœé¡¿å¤„ï¼Œæ‰ä¼šåˆ·æ–°æ•´ä¸ªæ–‡æ¡£ï¼Œæ‰§è¡Œä¸€æ¬¡é‡æ¸²æŸ“ï¼Œ</p><p>è¿™æ ·æ—¢ä¿è¯äº†é¢„è§ˆçš„å®æ—¶æ€§ï¼Œä¹Ÿæå‡äº†æ•´ä½“æ€§èƒ½ã€‚</p><blockquote><h4 id="åšäº†debounceå»¶è¿Ÿï¼Œæ€ä¹ˆä¿è¯é¢„è§ˆçš„å®æ—¶æ€§ï¼Ÿ"><a href="#åšäº†debounceå»¶è¿Ÿï¼Œæ€ä¹ˆä¿è¯é¢„è§ˆçš„å®æ—¶æ€§ï¼Ÿ" class="headerlink" title="åšäº†debounceå»¶è¿Ÿï¼Œæ€ä¹ˆä¿è¯é¢„è§ˆçš„å®æ—¶æ€§ï¼Ÿ"></a><strong>åšäº†debounceå»¶è¿Ÿï¼Œæ€ä¹ˆä¿è¯é¢„è§ˆçš„å®æ—¶æ€§ï¼Ÿ</strong></h4><p>åœ¨çœŸæ­£åœ°è¿ç»­å¿«é€Ÿè¾“å…¥çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ä¼šå»çœ‹é¢„è§ˆçš„</p><p>ä½†å‡¡å°‘è®¸åœé¡¿äº†ä¸‹ï¼ˆ0.3sï¼‰ï¼ŒMarkdownViewå°±å·²ç»è‡ªåŠ¨åˆ·æ–°å®Œæˆäº†</p><p>é¿å…äº†åœ¨å¿«é€Ÿè¾“å…¥æ—¶ï¼Œé¢‘ç¹åœ°åšæ— ç”¨çš„åˆ·æ–°</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ³¨æ„ï¼š</p><p>å¯¹äºä¸€äº›æ¯”è¾ƒè€—æ—¶çš„éƒ¨åˆ†ï¼ˆæ¯”å¦‚ï¼šä¸‹è½½ã€å¤§é‡æœºå™¨å­¦ä¹ é¢„æµ‹â€¦ï¼‰ä½¿ç”¨å¼‚æ­¥ï¼ˆasyncï¼‰æ¥å®Œæˆï¼Œ</p><p>åœ¨ UI å‡ºç°é—®é¢˜æ—¶ï¼Œå…³æ³¨ä¸‹ UI æ˜¯å¦‚ä½•åˆ·æ–°çš„ï¼Œ</p><p>çœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰è¿‡å¤šç¹æ‚çš„ä»»åŠ¡ï¼Œ</p><p>é‡æ–°æ€è€ƒä¸‹ç°å®ä¸­çš„é€»è¾‘ï¼Œå¯ä»¥è¯•ç€é™ä½ä»–ä»¬çš„ä¼˜å…ˆçº§ï¼Œ</p><p>æµ“ç¼©ä¸€ä¸‹å°±æ˜¯ï¼š<strong>ä¸»çº¿ç¨‹ï¼ˆmain threadï¼‰ä¸è¦æœ‰è¿‡å¤šè¿ç»­ç¹æ‚ä¸”æ— ç”¨çš„è¿ç®—ï¼ï¼</strong></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æˆ‘çš„å¼€æºé¡¹ç›® MarkdownView çš„ &lt;strong&gt;&lt;a href=&quot;https://github.com/LiYanan2004/MarkdownView/releases/tag/0.2.0&quot;&gt;0.2.0 ç‰ˆæœ¬&lt;/a&gt;&lt;/strong&gt; ç»ˆäºå‘å¸ƒäº†ï¼&lt;/p&gt;
&lt;p&gt;æ”¹ç‰ˆæœ¬å¸¦æ¥äº†æ€§èƒ½ä¸Šçš„å·¨å¤§è¿›æ­¥ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;h2 id=&quot;Performance&quot;&gt;&lt;a href=&quot;#Performance&quot; class=&quot;headerlink&quot; title=&quot;Performance&quot;&gt;&lt;/a&gt;Performance&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Rendering is now &lt;strong&gt;at least 3x faster on ALL DEVICES&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Real-time previewing is now much much smoother.&lt;/li&gt;
&lt;li&gt;Scrolling is much quicker and smoother &lt;strong&gt;with no frame drop&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Memory usage has been reduced by 30%&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;å€Ÿæ­¤æœºä¼šï¼Œè®°å½•ä¸‹æˆ‘çš„ä¼˜åŒ–æ€è·¯ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æ’¸ä»£ç " scheme="https://liyanan2004.github.io/categories/%E6%92%B8%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Swift" scheme="https://liyanan2004.github.io/tags/Swift/"/>
    
    <category term="ä»£ç è°ƒä¼˜" scheme="https://liyanan2004.github.io/tags/%E4%BB%A3%E7%A0%81%E8%B0%83%E4%BC%98/"/>
    
    <category term="SwiftUI" scheme="https://liyanan2004.github.io/tags/SwiftUI/"/>
    
  </entry>
  
  <entry>
    <title>ASCIIç å¯¹åº”å…³ç³»</title>
    <link href="https://liyanan2004.github.io/ascii/"/>
    <id>https://liyanan2004.github.io/ascii/</id>
    <published>2022-10-14T02:48:55.883Z</published>
    <updated>2022-10-14T03:02:58.280Z</updated>
    
    <content type="html"><![CDATA[<article class="message is-warning">        <div class="message-header"><p>ç‰ˆæƒå£°æ˜</p></div>        <div class="message-body">            <p>å›¾ç‰‡æ¥æºäº<a href="https://baike.baidu.com/item/ASCII/309296">ç™¾åº¦ç™¾ç§‘</a></p>        </div>    </article><p><img src="/img/ascii/table.jpeg"></p><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ol><li>å¤§å°å†™è½¬æ¢ <strong>Â±32</strong></li><li>A-Z &lt; a-z</li><li>å­—æ¯èŒƒå›´ï¼š65-90ï¼Œ97-122</li><li>æ•°å­—èŒƒå›´ï¼š48-57</li><li>â€œAâ€ä¸º65ï¼›â€œaâ€ä¸º97ï¼›â€œ0â€ä¸º 48</li><li><strong>ASCII å¯è¾“å‡º %dï¼ˆå­—ç¬¦çš„ ASCII ç çš„åè¿›åˆ¶æ•°ï¼‰ï¼Œä¹Ÿå¯è¾“å‡º %cï¼ˆå¯¹åº”çš„å­—ç¬¦ï¼‰ã€‚</strong></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;article class=&quot;message is-warning&quot;&gt;
        &lt;div class=&quot;message-header&quot;&gt;&lt;p&gt;ç‰ˆæƒå£°æ˜&lt;/p&gt;
&lt;/div&gt;
        &lt;div class=&quot;message-body&quot;&gt;
            &lt;</summary>
      
    
    
    
    <category term="å­¦ä¸ªä¹ " scheme="https://liyanan2004.github.io/categories/%E5%AD%A6%E4%B8%AA%E4%B9%A0/"/>
    
    
  </entry>
  
  <entry>
    <title>Cè¯­è¨€ ä¹‹ æ ¼å¼åŒ–è¾“å‡º</title>
    <link href="https://liyanan2004.github.io/formatted-output-in-c-programming-language/"/>
    <id>https://liyanan2004.github.io/formatted-output-in-c-programming-language/</id>
    <published>2022-10-08T13:34:26.173Z</published>
    <updated>2022-10-12T02:56:08.343Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ä¸¤å¤©ä¸Šè¯¾çš„æ—¶å€™ï¼Œè€å¸ˆè®©è¾“å‡ºä¸ªä¹ä¹ä¹˜æ³•è¡¨ã€‚</p><p>ä½†æ˜¯å®é™…è¾“å‡ºä¼šè§‰å¾—æ€ªæ€ªçš„ï¼Œæ²¡å¯¹é½ï¼Œå°è¯•ä¸‹å¯¹é½å§ã€‚</p><p>è¿™æ ·ä¹Ÿä¸æ˜¯ä¸è¡Œæ˜¯å§ï¼Œå“ˆå“ˆã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;1x1=1&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;2x1=2 2x2= 4&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;3x1=3 3x2= 6 3x3= 9&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;4x1=4 4x2= 8 4x3=12 4x4=16&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;5x1=5 5x2=10 5x3=15 5x4=20 5x5=25&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;6x1=6 6x2=12 6x3=18 6x4=24 6x5=30 6x6=36&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;7x1=7 7x2=14 7x3=21 7x4=28 7x5=35 7x6=42 7x7=49&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;8x1=8 8x2=16 8x3=24 8x4=32 8x5=40 8x6=48 8x7=56 8x8=64&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;9x1=9 9x2=18 9x3=27 9x4=36 9x5=45 9x6=54 9x7=63 9x8=72 9x9=81&quot;</span>);</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="æ²¡å¯¹é½çš„ç‰ˆæœ¬"><a href="#æ²¡å¯¹é½çš„ç‰ˆæœ¬" class="headerlink" title="æ²¡å¯¹é½çš„ç‰ˆæœ¬"></a>æ²¡å¯¹é½çš„ç‰ˆæœ¬</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%dx%d=%d &quot;</span>, i, j, i*j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯¹å ä½ç¬¦æ ¼å¼åŒ–è¾“å‡º"><a href="#å¯¹å ä½ç¬¦æ ¼å¼åŒ–è¾“å‡º" class="headerlink" title="å¯¹å ä½ç¬¦æ ¼å¼åŒ–è¾“å‡º"></a>å¯¹å ä½ç¬¦æ ¼å¼åŒ–è¾“å‡º</h2><p>å°±ç”¨ä¹˜æ³•è¡¨ä½œä¸ºä¾‹å­ï¼Œ</p><p>è¾“å‡ºçš„æ˜¯ Intï¼ˆ%dï¼‰ï¼Œ</p><p>éœ€è¦å¯¹ä¸€ä½æ•°çš„ç»“æœè¿›è¡Œæ‰©å±•ï¼Œè®©å®ƒèƒ½å¤Ÿ<strong>å¯¹é½ä¸‹é¢çš„ä¸¤ä½æ•°æ•°å­—</strong>ã€‚</p><p><strong>æ ¼å¼åŒ–è¾“å‡ºæ ¼å¼ï¼š</strong>% (-&#x2F;0) [ä½å®½ n] . [ç²¾åº¦ m] d</p><article class="message is-warning">                <div class="message-body">            <p>æ ¼å¼ä¸­æˆ‘å¢åŠ äº†ç©ºæ ¼ï¼Œæ–¹ä¾¿é˜…è¯»ï¼Œ<strong>å®é™…ä»£ç ä¸­ä¸èƒ½æœ‰ç©ºæ ¼å“¦</strong>ã€‚</p>        </div>    </article><p><strong>è§£é‡Šä¸€ä¸‹ï¼š</strong></p><p>ä½å®½ nï¼šè¾“å‡ºçš„å†…å®¹å å‘½ä»¤è¡Œçš„ n ä¸ªå­—ç¬¦å®½åº¦ï¼Œæ¯”å¦‚ï¼š[4]ï¼ˆn&#x3D;1ï¼‰ï¼Œ[ 4]ï¼ˆn&#x3D;2ï¼‰</p><p>ç²¾åº¦mï¼šå°æ•°ç‚¹åä¿ç•™å‡ ä½ï¼ˆè²Œä¼¼é»˜è®¤æ˜¯ 6 å¥½åƒï¼‰ï¼Œæ¯”å¦‚ <code>printf(&quot;%.2f&quot;, 3.1415);</code> è¾“å‡ºçš„æ˜¯3.14</p><p>-&#x2F;0ï¼šè¿™ä¸€éƒ¨åˆ†æ˜¯å¯¹è‡ªå®šä¹‰æ ¼å¼çš„ä¸€ä¸ªè¡¥å……ã€‚</p><ul><li><p>â€˜-â€˜ï¼šé å·¦è¾“å‡ºï¼ˆæ–¹æ‹¬å·å¹¶éè¾“å‡ºå†…å®¹ï¼Œåªæ˜¯æ–¹ä¾¿çœ‹åˆ°ç©ºæ ¼å“ˆï¼‰</p><ul><li><code>printf(&quot;%-2d, 1&quot;);</code> è¾“å‡ºçš„æ˜¯ï¼š[1 ]</li><li><code>printf(&quot;%2d, 1&quot;);</code> è¾“å‡ºçš„æ˜¯ï¼š[ 1]</li></ul></li><li><p>â€˜0â€™ï¼š<strong>å·¦ä¾§</strong>è¡¥0âƒ£ï¸</p><ul><li><code>printf(&quot;%02d, 1&quot;);</code> è¾“å‡ºçš„æ˜¯ï¼š01</li></ul></li><li><p>-&#x2F;0 <strong>åªèƒ½ç”¨ä¸€ä¸ª</strong>ï¼Œå…¶ä¸­ï¼ˆé å·¦è¾“å‡ºâ€™-â€˜ï¼‰çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œæ‰€ä»¥ <code>printf(&quot;%-02d&quot;, 1);</code> è¾“å‡ºçš„æ˜¯ [1 ]</p></li></ul><article class="message is-primary">                <div class="message-body">            <p>%d å°±æ²¡æœ‰å¿…è¦è®¾ç½®ç²¾åº¦äº†å“ˆï¼Œä¸‰ä¸ªæ ¼å¼åŒ–å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œä½†æ˜¯è¦è®¾ç½®ç²¾åº¦çš„è¯è®°å¾—åŠ ä¸Š <strong>Dotï¼ˆ.ï¼‰</strong> å“¦ï¼</p><p>æ¯”å¦‚ï¼š</p><ul><li><code>%-2d</code></li><li><code>%05d</code></li><li><code>%.3f</code></li><li><code>%-5.2f</code></li><li>â€¦</li></ul><p>å¯ä»¥åœ¨ç”µè„‘ä¸Šè¯•è¯•çœ‹è¿™äº›çš„è¾“å‡ºï¼Œæ›´å¥½åœ°ç†è§£ä¸‹ã€‚</p>        </div>    </article><h2 id="æ”¹è¿›åçš„ç‰ˆæœ¬"><a href="#æ”¹è¿›åçš„ç‰ˆæœ¬" class="headerlink" title="æ”¹è¿›åçš„ç‰ˆæœ¬"></a>æ”¹è¿›åçš„ç‰ˆæœ¬</h2><ol><li>é å³å¯¹é½ï¼š</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%dx%d=%2d &quot;</span>, i, j, i*j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><article class="message is-dark">        <div class="message-header"><p>è¾“å‡ºç»“æœ</p></div>        <div class="message-body">            <p>1x1&#x3D; 1<br>2x1&#x3D; 2 2x2&#x3D; 4<br>3x1&#x3D; 3 3x2&#x3D; 6 3x3&#x3D; 9<br>4x1&#x3D; 4 4x2&#x3D; 8 4x3&#x3D;12 4x4&#x3D;16<br>5x1&#x3D; 5 5x2&#x3D;10 5x3&#x3D;15 5x4&#x3D;20 5x5&#x3D;25<br>6x1&#x3D; 6 6x2&#x3D;12 6x3&#x3D;18 6x4&#x3D;24 6x5&#x3D;30 6x6&#x3D;36<br>7x1&#x3D; 7 7x2&#x3D;14 7x3&#x3D;21 7x4&#x3D;28 7x5&#x3D;35 7x6&#x3D;42 7x7&#x3D;49<br>8x1&#x3D; 8 8x2&#x3D;16 8x3&#x3D;24 8x4&#x3D;32 8x5&#x3D;40 8x6&#x3D;48 8x7&#x3D;56 8x8&#x3D;64<br>9x1&#x3D; 9 9x2&#x3D;18 9x3&#x3D;27 9x4&#x3D;36 9x5&#x3D;45 9x6&#x3D;54 9x7&#x3D;63 9x8&#x3D;72 9x9&#x3D;81 </p>        </div>    </article><ol start="2"><li>è¡¥é›¶ç‰ˆæœ¬ï¼š</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%dx%d=%02d &quot;</span>, i, j, i*j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><article class="message is-dark">        <div class="message-header"><p>è¾“å‡ºç»“æœ</p></div>        <div class="message-body">            <p>1x1&#x3D;01<br>2x1&#x3D;02 2x2&#x3D;04<br>3x1&#x3D;03 3x2&#x3D;06 3x3&#x3D;09<br>4x1&#x3D;04 4x2&#x3D;08 4x3&#x3D;12 4x4&#x3D;16<br>5x1&#x3D;05 5x2&#x3D;10 5x3&#x3D;15 5x4&#x3D;20 5x5&#x3D;25<br>6x1&#x3D;06 6x2&#x3D;12 6x3&#x3D;18 6x4&#x3D;24 6x5&#x3D;30 6x6&#x3D;36<br>7x1&#x3D;07 7x2&#x3D;14 7x3&#x3D;21 7x4&#x3D;28 7x5&#x3D;35 7x6&#x3D;42 7x7&#x3D;49<br>8x1&#x3D;08 8x2&#x3D;16 8x3&#x3D;24 8x4&#x3D;32 8x5&#x3D;40 8x6&#x3D;48 8x7&#x3D;56 8x8&#x3D;64<br>9x1&#x3D;09 9x2&#x3D;18 9x3&#x3D;27 9x4&#x3D;36 9x5&#x3D;45 9x6&#x3D;54 9x7&#x3D;63 9x8&#x3D;72 9x9&#x3D;81 </p>        </div>    </article><ol start="3"><li>é å·¦å¯¹é½ï¼š</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,j;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%dx%d=%-2d &quot;</span>, i, j, i*j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><article class="message is-dark">        <div class="message-header"><p>è¾“å‡ºç»“æœ</p></div>        <div class="message-body">            <p>1x1&#x3D;1<br>2x1&#x3D;2   2x2&#x3D;4<br>3x1&#x3D;3   3x2&#x3D;6   3x3&#x3D;9<br>4x1&#x3D;4   4x2&#x3D;8   4x3&#x3D;12 4x4&#x3D;16<br>5x1&#x3D;5   5x2&#x3D;10 5x3&#x3D;15 5x4&#x3D;20 5x5&#x3D;25<br>6x1&#x3D;6   6x2&#x3D;12 6x3&#x3D;18 6x4&#x3D;24 6x5&#x3D;30 6x6&#x3D;36<br>7x1&#x3D;7   7x2&#x3D;14 7x3&#x3D;21 7x4&#x3D;28 7x5&#x3D;35 7x6&#x3D;42 7x7&#x3D;49<br>8x1&#x3D;8   8x2&#x3D;16 8x3&#x3D;24 8x4&#x3D;32 8x5&#x3D;40 8x6&#x3D;48 8x7&#x3D;56 8x8&#x3D;64<br>9x1&#x3D;9   9x2&#x3D;18 9x3&#x3D;27 9x4&#x3D;36 9x5&#x3D;45 9x6&#x3D;54 9x7&#x3D;63 9x8&#x3D;72 9x9&#x3D;81 </p>        </div>    </article>]]></content>
    
    
    <summary type="html">&lt;p&gt;å‰ä¸¤å¤©ä¸Šè¯¾çš„æ—¶å€™ï¼Œè€å¸ˆè®©è¾“å‡ºä¸ªä¹ä¹ä¹˜æ³•è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å®é™…è¾“å‡ºä¼šè§‰å¾—æ€ªæ€ªçš„ï¼Œæ²¡å¯¹é½ï¼Œå°è¯•ä¸‹å¯¹é½å§ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·ä¹Ÿä¸æ˜¯ä¸è¡Œæ˜¯å§ï¼Œå“ˆå“ˆã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;1x1=1&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;2x1=2 2x2= 4&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;3x1=3 3x2= 6 3x3= 9&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;4x1=4 4x2= 8 4x3=12 4x4=16&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;5x1=5 5x2=10 5x3=15 5x4=20 5x5=25&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;6x1=6 6x2=12 6x3=18 6x4=24 6x5=30 6x6=36&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;7x1=7 7x2=14 7x3=21 7x4=28 7x5=35 7x6=42 7x7=49&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;8x1=8 8x2=16 8x3=24 8x4=32 8x5=40 8x6=48 8x7=56 8x8=64&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;9x1=9 9x2=18 9x3=27 9x4=36 9x5=45 9x6=54 9x7=63 9x8=72 9x9=81&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="å­¦ä¸ªä¹ " scheme="https://liyanan2004.github.io/categories/%E5%AD%A6%E4%B8%AA%E4%B9%A0/"/>
    
    
    <category term="Cè¯­è¨€" scheme="https://liyanan2004.github.io/tags/C%E8%AF%AD%E8%A8%80/"/>
    
    <category term="å†™ä»£ç " scheme="https://liyanan2004.github.io/tags/%E5%86%99%E4%BB%A3%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>JsDelivrä¸çµäº†ï¼Ÿæ·¦ï¼</title>
    <link href="https://liyanan2004.github.io/jsdelivr-can-no-longer-accelerate-static-resources/"/>
    <id>https://liyanan2004.github.io/jsdelivr-can-no-longer-accelerate-static-resources/</id>
    <published>2022-10-05T07:03:05.022Z</published>
    <updated>2022-10-11T11:40:15.164Z</updated>
    
    <content type="html"><![CDATA[<p>è¿˜è®°å¾—å‡ å¹´å‰åšåšå®¢çš„æ—¶å€™ï¼Œ</p><p>å›¾ç‰‡ä¸Šä¼ åˆ° GitHub ä¸Šï¼Œ</p><p>ç”¨ JsDelivr æ‹‰å– GitHub ä¸Šçš„é™æ€èµ„æºï¼Œ</p><p>é€Ÿåº¦å˜å˜å¿«ï¼Œ</p><p>ä½†æ˜¯æœ€è¿‘å‘ç°ï¼Œ</p><p>é™æ€èµ„æºè²Œä¼¼éƒ½è¢«é‡å®šå‘åˆ° githubusercontent ä¸Šå»äº†ï¼Œ</p><p><strong>å¯æ˜¯ï¼Œå®˜ç½‘ä¸Šå´å†™ç€ï¼š</strong></p><p><img src="/img/jsdelivr-can-no-longer-accelerate-static-resources/important-in-china.jpeg"></p><span id="more"></span><h2 id="DNS-è¢«æ±¡æŸ“"><a href="#DNS-è¢«æ±¡æŸ“" class="headerlink" title="DNS è¢«æ±¡æŸ“"></a>DNS è¢«æ±¡æŸ“</h2><p>GitHub ä¸Šçš„ issueï¼š</p><blockquote><p>Jsdelivr has been block again in China. Some places are polluted by DNS and are resolved to the IP of websites such as Facebook, Twitter, etc. Although other places can be resolved to the correct IP, they are reset by GWF during the TLS handshake and still inaccessible.<br>But fortunately, <code>fastly.jsdelivr.net</code> is not polluted at present.</p></blockquote><p>è‡³äºåŸå› ï¼Œ</p><p>ä¼°è®¡æ˜¯æŸäº›äººæŠŠéæ³•çš„ä¸œè¥¿æŒ‚åˆ° GitHub ä¸Šé¢å»åˆ†äº«ï¼Œ</p><p>ç”¨ JsDelivr å»æ­£å¸¸è®¿é—®ï¼Œ</p><p>é’»ç©ºå­åˆ«å‘ç°äº† å“ˆå“ˆã€‚</p><article class="message is-success">                <div class="message-body">            <p>ä¸è¿‡å¥½åœ¨ DNS æ±¡æŸ“å·²ç»è¢«è§£å†³ï¼Œä½†æ˜¯åœ¨å¤§é™†åœ°åŒºä¹Ÿå¢åŠ äº†è®¸å¤šé™åˆ¶äº†ï¼Œæ¥ä¿è¯ä¸ä¼šå†æ¬¡è¢«æ±¡æŸ“ã€‚</p>        </div>    </article><h2 id="æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"><a href="#æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ" class="headerlink" title="æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"></a>æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</h2><p><strong>DNSè§£æ</strong>ç°åœ¨å·²ç»æ¢å¤æ­£å¸¸ï¼Œ</p><p>ä½†æ˜¯å›½å†…çš„ ICP åº”è¯¥æ˜¯ä¸å¯èƒ½æ¢å¤äº†ï¼Œ</p><p>JsDelivr ä¹Ÿä¸å†æä¾› <strong>ä¸­å›½å¤§é™†åœ°åŒº</strong> çš„ GitHub é™æ€èµ„æºçš„åŠ é€Ÿï¼Œï¼ˆJS CSS ç±»æ–‡ä»¶é™¤å¤–ï¼‰</p><p>æ‰€ä»¥åšå®¢å†…çš„å›¾ç‰‡ä¹Ÿåªèƒ½ä» GitHub æ‹‰å–äº†ï¼Œ</p><p>å¯¼è‡´<strong>ç½‘ç«™åŠ è½½æ—¶é—´å¯èƒ½ä¼šç•¥é•¿</strong>ã€‚</p><article class="message is-warning">        <div class="message-header"><p>6æœˆä»½çš„æ—¶å€™å›½å†…é™æ€èµ„æºå·²ç»ä¸ç»™è®¿é—®äº†</p></div>        <div class="message-body">            <p>ä¸­å›½ä»…æ­¤ä¸€å®¶åˆæ³•çš„å…¬å…± CDN å°±è¿™ä¹ˆè¢«é™åˆ¶äº†ã€‚</p><p>ICPä¹Ÿè¢«åŠé”€äº†ã€‚</p><p>æ·¦ï¼ï¼ </p>        </div>    </article><article class="message is-dark">        <div class="message-header"><p>æ€ä¹ˆåŠå‘¢ï¼Ÿ</p></div>        <div class="message-body">            <p>æˆ‘ä¹Ÿåœ¨å¯»æ‰¾æ›´ä¼˜çš„è§£å†³æ–¹æ¡ˆæ¥åŠ é€Ÿé¡µé¢åŠ è½½ã€‚</p><p>åç»­å¯èƒ½è€ƒè™‘ä» GitHub è½¬åˆ°å›½å†…çš„ Gitee</p>        </div>    </article>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿˜è®°å¾—å‡ å¹´å‰åšåšå®¢çš„æ—¶å€™ï¼Œ&lt;/p&gt;
&lt;p&gt;å›¾ç‰‡ä¸Šä¼ åˆ° GitHub ä¸Šï¼Œ&lt;/p&gt;
&lt;p&gt;ç”¨ JsDelivr æ‹‰å– GitHub ä¸Šçš„é™æ€èµ„æºï¼Œ&lt;/p&gt;
&lt;p&gt;é€Ÿåº¦å˜å˜å¿«ï¼Œ&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æœ€è¿‘å‘ç°ï¼Œ&lt;/p&gt;
&lt;p&gt;é™æ€èµ„æºè²Œä¼¼éƒ½è¢«é‡å®šå‘åˆ° githubusercontent ä¸Šå»äº†ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¯æ˜¯ï¼Œå®˜ç½‘ä¸Šå´å†™ç€ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/jsdelivr-can-no-longer-accelerate-static-resources/important-in-china.jpeg&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="åä¸ªæ§½" scheme="https://liyanan2004.github.io/categories/%E5%90%90%E4%B8%AA%E6%A7%BD/"/>
    
    
    <category term="Web" scheme="https://liyanan2004.github.io/tags/Web/"/>
    
    <category term="JS" scheme="https://liyanan2004.github.io/tags/JS/"/>
    
    <category term="CDN" scheme="https://liyanan2004.github.io/tags/CDN/"/>
    
  </entry>
  
</feed>
